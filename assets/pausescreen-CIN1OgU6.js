import{O as s,C as i}from"./bsConstants-DXOcgBzX.js";import{$ as S}from"./blockrain.jquery-C9-467bX.js";document.querySelector("#pauseScreen").innerHTML=`
<div id="gameFlexBox">
    <div class="wrapper">
        <div id="breakMessage" class="break-message" style="display:none;"></div>
    </div>
    <div id="breakTimer"></div>
    <div id="attendanceBox">
        <ul id="playerList"></ul>
    </div>
    <div id="blockGameContainer" class="block-game"></div>
</div>
`;let d,c=!1,l;const r=document.getElementById("playerList"),m=document.getElementById("breakTimer"),f=document.getElementById("breakMessage");s.onReady(async()=>{d=await s.player.getId();const y=await s.room.getMetadata(),E=y[`${i.EXTENSIONID}/game`],g=y[`${i.EXTENSIONID}/time`],o=document.createElement("li");o.id=`pl_${d}`,o.classList.add("self-list-item"),o.innerText="Click when ready!",r.appendChild(o),l=await s.party.getPlayers(),u(),s.party.onChange(e=>{l=e,u()}),o.onclick=async e=>{e.preventDefault(),c=!c,o.style.backgroundImage=c?"url(/check.svg)":"url(/cross.svg)",o.innerText=c?"Click to un-ready":"Click when ready!",await s.broadcast.sendMessage(i.TRANSPORT,c?i.READY:i.BUSY)},s.broadcast.onMessage(i.TRANSPORT,async e=>{const t=e.connectionId,n=l.find(a=>a.connectionId===t);if(n){const a=`pl_${n.id}`,I=document.getElementById(a);I&&(I.style.backgroundImage=e.data===i.READY?"url(/check.svg)":"url(/cross.svg)")}}),s.broadcast.onMessage(i.SCORE,async e=>{const t=`con_${e.connectionId}`,n=document.getElementById(t);n&&(n.innerText=`Score: ${e.data}`)}),s.broadcast.onMessage(i.MESSAGE,async e=>{e.data&&(f.innerText=e.data,f.style.display="block")});function u(){const e=r.querySelectorAll("li");for(const t of e){const n=t.id.split("_")[1];l.some(a=>a.id===n)||n!==d&&t.remove()}for(const t of l)if(!document.getElementById(`pl_${t.id}`)){const a=document.createElement("li");a.id=`pl_${t.id}`,a.classList.add("player-list-item"),a.innerHTML=`${t.name} <div id="con_${t.connectionId}"></div>`,r.appendChild(a)}}function T(e){let t=e*60;p(t);const n=setInterval(()=>{t--,t<=0?(clearInterval(n),m.innerText="Time is up!"):p(t)},1e3)}function p(e){const t=Math.floor(e/60),n=e%60,a=`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`;m.innerText=a}g>0?T(g):m.style.display="none",E?S(".block-game").blockrain({autoplay:!1,autoplayRestart:!1,theme:"candy",playText:"Pass some time during the break?",playButtonText:"Play",gameOverText:"Game Over",restartButtonText:"Play Again",scoreText:"Score",onStart:async function(){await s.broadcast.sendMessage(i.SCORE,0)},onRestart:function(){},onLine:async function(e,t,n){await s.broadcast.sendMessage(i.SCORE,n)}}):document.getElementById("blockGameContainer").style.display="none"});
