(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}})();var ge=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class Co{constructor(t){this.messageBus=t}get id(){if(!this.messageBus.userId)throw Error("Unable to get user ID: not ready");return this.messageBus.userId}getSelection(){return ge(this,void 0,void 0,function*(){const{selection:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SELECTION",{});return t})}select(t,r){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:t,replace:r})})}deselect(t){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_DESELECT",{items:t})})}getName(){return ge(this,void 0,void 0,function*(){const{name:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_NAME",{});return t})}setName(t){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_NAME",{name:t})})}getColor(){return ge(this,void 0,void 0,function*(){const{color:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_COLOR",{});return t})}setColor(t){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_COLOR",{color:t})})}getSyncView(){return ge(this,void 0,void 0,function*(){const{syncView:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_SYNC_VIEW",{});return t})}setSyncView(t){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_SYNC_VIEW",{syncView:t})})}getId(){return ge(this,void 0,void 0,function*(){const{id:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ID",{});return t})}getRole(){return ge(this,void 0,void 0,function*(){const{role:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_ROLE",{});return t})}getMetadata(){return ge(this,void 0,void 0,function*(){const{metadata:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_METADATA",{});return t})}setMetadata(t){return ge(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_PLAYER_SET_METADATA",{update:t})})}hasPermission(t){return ge(this,void 0,void 0,function*(){if((yield this.getRole())==="GM")return!0;const{permissions:o}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return o.indexOf(t)>-1})}getConnectionId(){return ge(this,void 0,void 0,function*(){const{connectionId:t}=yield this.messageBus.sendAsync("OBR_PLAYER_GET_CONNECTION_ID",{});return t})}onChange(t){const r=o=>{t(o.player)};return this.messageBus.send("OBR_PLAYER_SUBSCRIBE",{}),this.messageBus.on("OBR_PLAYER_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_PLAYER_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PLAYER_EVENT_CHANGE",r)}}}var Ie=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class Bo{constructor(t){this.messageBus=t}reset(){return Ie(this,void 0,void 0,function*(){const{transform:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_RESET",{});return t})}animateTo(t){return Ie(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO",{transform:t})})}animateToBounds(t){return Ie(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_ANIMATE_TO_BOUNDS",{bounds:t})})}getPosition(){return Ie(this,void 0,void 0,function*(){const{position:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_POSITION",{});return t})}setPosition(t){return Ie(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_POSITION",{position:t})})}getScale(){return Ie(this,void 0,void 0,function*(){const{scale:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_SCALE",{});return t})}setScale(t){return Ie(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_VIEWPORT_SET_SCALE",{scale:t})})}getWidth(){return Ie(this,void 0,void 0,function*(){const{width:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_WIDTH",{});return t})}getHeight(){return Ie(this,void 0,void 0,function*(){const{height:t}=yield this.messageBus.sendAsync("OBR_VIEWPORT_GET_HEIGHT",{});return t})}transformPoint(t){return Ie(this,void 0,void 0,function*(){const{point:r}=yield this.messageBus.sendAsync("OBR_VIEWPORT_TRANSFORM_POINT",{point:t});return r})}inverseTransformPoint(t){return Ie(this,void 0,void 0,function*(){const{point:r}=yield this.messageBus.sendAsync("OBR_VIEWPORT_INVERSE_TRANSFORM_POINT",{point:t});return r})}}function So(a){return typeof a.id=="string"}var wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Kn={exports:{}},Ot=typeof Reflect=="object"?Reflect:null,Fi=Ot&&typeof Ot.apply=="function"?Ot.apply:function(t,r,o){return Function.prototype.apply.call(t,r,o)},on;Ot&&typeof Ot.ownKeys=="function"?on=Ot.ownKeys:Object.getOwnPropertySymbols?on=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:on=function(t){return Object.getOwnPropertyNames(t)};function Io(a){console&&console.warn&&console.warn(a)}var ur=Number.isNaN||function(t){return t!==t};function re(){re.init.call(this)}Kn.exports=re;Kn.exports.once=Do;re.EventEmitter=re;re.prototype._events=void 0;re.prototype._eventsCount=0;re.prototype._maxListeners=void 0;var Zi=10;function fn(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(re,"defaultMaxListeners",{enumerable:!0,get:function(){return Zi},set:function(a){if(typeof a!="number"||a<0||ur(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");Zi=a}});re.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};re.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ur(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cr(a){return a._maxListeners===void 0?re.defaultMaxListeners:a._maxListeners}re.prototype.getMaxListeners=function(){return cr(this)};re.prototype.emit=function(t){for(var r=[],o=1;o<arguments.length;o++)r.push(arguments[o]);var l=t==="error",h=this._events;if(h!==void 0)l=l&&h.error===void 0;else if(!l)return!1;if(l){var p;if(r.length>0&&(p=r[0]),p instanceof Error)throw p;var _=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw _.context=p,_}var b=h[t];if(b===void 0)return!1;if(typeof b=="function")Fi(b,this,r);else for(var A=b.length,y=pr(b,A),o=0;o<A;++o)Fi(y[o],this,r);return!0};function fr(a,t,r,o){var l,h,p;if(fn(r),h=a._events,h===void 0?(h=a._events=Object.create(null),a._eventsCount=0):(h.newListener!==void 0&&(a.emit("newListener",t,r.listener?r.listener:r),h=a._events),p=h[t]),p===void 0)p=h[t]=r,++a._eventsCount;else if(typeof p=="function"?p=h[t]=o?[r,p]:[p,r]:o?p.unshift(r):p.push(r),l=cr(a),l>0&&p.length>l&&!p.warned){p.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=a,_.type=t,_.count=p.length,Io(_)}return a}re.prototype.addListener=function(t,r){return fr(this,t,r,!1)};re.prototype.on=re.prototype.addListener;re.prototype.prependListener=function(t,r){return fr(this,t,r,!0)};function xo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lr(a,t,r){var o={fired:!1,wrapFn:void 0,target:a,type:t,listener:r},l=xo.bind(o);return l.listener=r,o.wrapFn=l,l}re.prototype.once=function(t,r){return fn(r),this.on(t,lr(this,t,r)),this};re.prototype.prependOnceListener=function(t,r){return fn(r),this.prependListener(t,lr(this,t,r)),this};re.prototype.removeListener=function(t,r){var o,l,h,p,_;if(fn(r),l=this._events,l===void 0)return this;if(o=l[t],o===void 0)return this;if(o===r||o.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete l[t],l.removeListener&&this.emit("removeListener",t,o.listener||r));else if(typeof o!="function"){for(h=-1,p=o.length-1;p>=0;p--)if(o[p]===r||o[p].listener===r){_=o[p].listener,h=p;break}if(h<0)return this;h===0?o.shift():No(o,h),o.length===1&&(l[t]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",t,_||r)}return this};re.prototype.off=re.prototype.removeListener;re.prototype.removeAllListeners=function(t){var r,o,l;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var h=Object.keys(o),p;for(l=0;l<h.length;++l)p=h[l],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=o[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(l=r.length-1;l>=0;l--)this.removeListener(t,r[l]);return this};function dr(a,t,r){var o=a._events;if(o===void 0)return[];var l=o[t];return l===void 0?[]:typeof l=="function"?r?[l.listener||l]:[l]:r?ko(l):pr(l,l.length)}re.prototype.listeners=function(t){return dr(this,t,!0)};re.prototype.rawListeners=function(t){return dr(this,t,!1)};re.listenerCount=function(a,t){return typeof a.listenerCount=="function"?a.listenerCount(t):hr.call(a,t)};re.prototype.listenerCount=hr;function hr(a){var t=this._events;if(t!==void 0){var r=t[a];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}re.prototype.eventNames=function(){return this._eventsCount>0?on(this._events):[]};function pr(a,t){for(var r=new Array(t),o=0;o<t;++o)r[o]=a[o];return r}function No(a,t){for(;t+1<a.length;t++)a[t]=a[t+1];a.pop()}function ko(a){for(var t=new Array(a.length),r=0;r<t.length;++r)t[r]=a[r].listener||a[r];return t}function Do(a,t){return new Promise(function(r,o){function l(p){a.removeListener(t,h),o(p)}function h(){typeof a.removeListener=="function"&&a.removeListener("error",l),r([].slice.call(arguments))}gr(a,t,h,{once:!0}),t!=="error"&&Mo(a,l,{once:!0})})}function Mo(a,t,r){typeof a.on=="function"&&gr(a,"error",t,r)}function gr(a,t,r,o){if(typeof a.on=="function")o.once?a.once(t,r):a.on(t,r);else if(typeof a.addEventListener=="function")a.addEventListener(t,function l(h){o.once&&a.removeEventListener(t,l),r(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var Lo=Kn.exports;let en;const Go=new Uint8Array(16);function Ho(){if(!en&&(en=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!en))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return en(Go)}const le=[];for(let a=0;a<256;++a)le.push((a+256).toString(16).slice(1));function jo(a,t=0){return le[a[t+0]]+le[a[t+1]]+le[a[t+2]]+le[a[t+3]]+"-"+le[a[t+4]]+le[a[t+5]]+"-"+le[a[t+6]]+le[a[t+7]]+"-"+le[a[t+8]]+le[a[t+9]]+"-"+le[a[t+10]]+le[a[t+11]]+le[a[t+12]]+le[a[t+13]]+le[a[t+14]]+le[a[t+15]]}const Po=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qi={randomUUID:Po};function Uo(a,t,r){if(qi.randomUUID&&!t&&!a)return qi.randomUUID();a=a||{};const o=a.random||(a.rng||Ho)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let l=0;l<16;++l)t[r+l]=o[l];return t}return jo(o)}class Yo extends Lo.EventEmitter{constructor(t,r){super(),this.ready=!1,this.userId=null,this.ref=null,this.handleMessage=o=>{const l=o.data;if(o.origin===this.targetOrigin&&So(l)){if(l.id==="OBR_READY"){this.ready=!0;const h=l.data;this.ref=h.ref,this.userId=h.userId}this.emit(l.id,l.data)}},this.send=(o,l,h)=>{var p;if(!this.ref)throw Error("Unable to send message: not ready");(p=window.parent)===null||p===void 0||p.postMessage({id:o,data:l,ref:this.ref,nonce:h},this.targetOrigin)},this.sendAsync=(o,l,h=5e3)=>{const p=`_${Uo()}`;return this.send(o,l,p),Promise.race([new Promise((_,b)=>{const A=this;function y(G){A.off(`${o}_RESPONSE${p}`,y),A.off(`${o}_ERROR${p}`,T),_(G)}function T(G){A.off(`${o}_RESPONSE${p}`,y),A.off(`${o}_ERROR${p}`,T),b(G)}this.on(`${o}_RESPONSE${p}`,y),this.on(`${o}_ERROR${p}`,T)}),...h>0?[new Promise((_,b)=>window.setTimeout(()=>b(new Error(`Message ${o} took longer than ${h}ms to get a result`)),h))]:[]])},this.roomId=r,this.targetOrigin=t,window.addEventListener("message",this.handleMessage),this.setMaxListeners(100)}destroy(){window.removeEventListener("message",this.handleMessage)}}var Ki=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class Wo{constructor(t){this.messageBus=t}show(t,r){return Ki(this,void 0,void 0,function*(){const{id:o}=yield this.messageBus.sendAsync("OBR_NOTIFICATION_SHOW",{message:t,variant:r});return o})}close(t){return Ki(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_NOTIFICATION_CLOSE",{id:t})})}}var At=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class Vo{constructor(t){this.messageBus=t}getColor(){return At(this,void 0,void 0,function*(){const{color:t}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_COLOR",{});return t})}setColor(t){return At(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_COLOR",{color:t})})}getStrokeWidth(){return At(this,void 0,void 0,function*(){const{strokeWidth:t}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_STROKE_WIDTH",{});return t})}setStrokeWidth(t){return At(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_STROKE_WIDTH",{strokeWidth:t})})}getFilled(){return At(this,void 0,void 0,function*(){const{filled:t}=yield this.messageBus.sendAsync("OBR_SCENE_FOG_GET_FILLED",{});return t})}setFilled(t){return At(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_FOG_SET_FILLED",{filled:t})})}onChange(t){const r=o=>{t(o.fog)};return this.messageBus.send("OBR_SCENE_FOG_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_FOG_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_FOG_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_FOG_EVENT_CHANGE",r)}}}var ye=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class zo{constructor(t){this.messageBus=t}getDpi(){return ye(this,void 0,void 0,function*(){const{dpi:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DPI",{});return t})}getScale(){return ye(this,void 0,void 0,function*(){return yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_SCALE",{})})}setScale(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_SCALE",{scale:t})})}getColor(){return ye(this,void 0,void 0,function*(){const{color:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_COLOR",{});return t})}setColor(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_COLOR",{color:t})})}getOpacity(){return ye(this,void 0,void 0,function*(){const{opacity:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_OPACITY",{});return t})}setOpacity(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_OPACITY",{opacity:t})})}getType(){return ye(this,void 0,void 0,function*(){const{type:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_TYPE",{});return t})}setType(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_TYPE",{type:t})})}getLineType(){return ye(this,void 0,void 0,function*(){const{lineType:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_LINE_TYPE",{});return t})}setLineType(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_LINE_TYPE",{lineType:t})})}getMeasurement(){return ye(this,void 0,void 0,function*(){const{measurement:t}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_MEASUREMENT",{});return t})}setMeasurement(t){return ye(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_GRID_SET_MEASUREMENT",{measurement:t})})}snapPosition(t,r,o,l){return ye(this,void 0,void 0,function*(){const{position:h}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_SNAP_POSITION",{position:t,snappingSensitivity:r,useCorners:o,useCenter:l});return h})}getDistance(t,r){return ye(this,void 0,void 0,function*(){const{distance:o}=yield this.messageBus.sendAsync("OBR_SCENE_GRID_GET_DISTANCE",{from:t,to:r});return o})}onChange(t){const r=o=>{t(o.grid)};return this.messageBus.send("OBR_SCENE_GRID_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_GRID_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_GRID_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_GRID_EVENT_CHANGE",r)}}}var tn=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class Fo{constructor(t){this.messageBus=t}undo(){return tn(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_UNDO",{})})}redo(){return tn(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_REDO",{})})}canUndo(){return tn(this,void 0,void 0,function*(){const{canUndo:t}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_UNDO",{});return t})}canRedo(){return tn(this,void 0,void 0,function*(){const{canRedo:t}=yield this.messageBus.sendAsync("OBR_SCENE_HISTORY_CAN_REDO",{});return t})}}function he(a){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];throw Error("[Immer] minified error nr: "+a+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ct(a){return!!a&&!!a[be]}function Je(a){var t;return!!a&&(function(r){if(!r||typeof r!="object")return!1;var o=Object.getPrototypeOf(r);if(o===null)return!0;var l=Object.hasOwnProperty.call(o,"constructor")&&o.constructor;return l===Object||typeof l=="function"&&Function.toString.call(l)===es}(a)||Array.isArray(a)||!!a[Ht]||!!(!((t=a.constructor)===null||t===void 0)&&t[Ht])||ln(a)||dn(a))}function Ct(a,t,r){r===void 0&&(r=!1),$e(a)===0?(r?Object.keys:ni)(a).forEach(function(o){r&&typeof o=="symbol"||t(o,a[o],a)}):a.forEach(function(o,l){return t(l,o,a)})}function $e(a){var t=a[be];return t?t.i>3?t.i-4:t.i:Array.isArray(a)?1:ln(a)?2:dn(a)?3:0}function Pt(a,t){return $e(a)===2?a.has(t):Object.prototype.hasOwnProperty.call(a,t)}function sn(a,t){return $e(a)===2?a.get(t):a[t]}function yr(a,t,r){var o=$e(a);o===2?a.set(t,r):o===3?a.add(r):a[t]=r}function Zo(a,t){return a===t?a!==0||1/a==1/t:a!=a&&t!=t}function ln(a){return Jo&&a instanceof Map}function dn(a){return $o&&a instanceof Set}function at(a){return a.o||a.t}function Qn(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var t=ts(a);delete t[be];for(var r=ni(t),o=0;o<r.length;o++){var l=r[o],h=t[l];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(t[l]={configurable:!0,writable:!0,enumerable:h.enumerable,value:a[l]})}return Object.create(Object.getPrototypeOf(a),t)}function Xn(a,t){return t===void 0&&(t=!1),Jn(a)||ct(a)||!Je(a)||($e(a)>1&&(a.set=a.add=a.clear=a.delete=qo),Object.freeze(a),t&&Ct(a,function(r,o){return Xn(o,!0)},!0)),a}function qo(){he(2)}function Jn(a){return a==null||typeof a!="object"||Object.isFrozen(a)}function Pe(a){var t=Fn[a];return t||he(18,a),t}function Ko(a,t){Fn[a]||(Fn[a]=t)}function Qi(){return Ut}function Gn(a,t){t&&(Pe("Patches"),a.u=[],a.s=[],a.v=t)}function an(a){Wn(a),a.p.forEach(Qo),a.p=null}function Wn(a){a===Ut&&(Ut=a.l)}function Xi(a){return Ut={p:[],l:Ut,h:a,m:!0,_:0}}function Qo(a){var t=a[be];t.i===0||t.i===1?t.j():t.g=!0}function Hn(a,t){t._=t.p.length;var r=t.p[0],o=a!==void 0&&a!==r;return t.h.O||Pe("ES5").S(t,a,o),o?(r[be].P&&(an(t),he(4)),Je(a)&&(a=un(t,a),t.l||cn(t,a)),t.u&&Pe("Patches").M(r[be].t,a,t.u,t.s)):a=un(t,r,[]),an(t),t.u&&t.v(t.u,t.s),a!==ti?a:void 0}function un(a,t,r){if(Jn(t))return t;var o=t[be];if(!o)return Ct(t,function(_,b){return Ji(a,o,t,_,b,r)},!0),t;if(o.A!==a)return t;if(!o.P)return cn(a,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var l=o.i===4||o.i===5?o.o=Qn(o.k):o.o,h=l,p=!1;o.i===3&&(h=new Set(l),l.clear(),p=!0),Ct(h,function(_,b){return Ji(a,o,l,_,b,r,p)}),cn(a,l,!1),r&&a.u&&Pe("Patches").N(o,r,a.u,a.s)}return o.o}function Ji(a,t,r,o,l,h,p){if(ct(l)){var _=un(a,l,h&&t&&t.i!==3&&!Pt(t.R,o)?h.concat(o):void 0);if(yr(r,o,_),!ct(_))return;a.m=!1}else p&&r.add(l);if(Je(l)&&!Jn(l)){if(!a.h.D&&a._<1)return;un(a,l),t&&t.A.l||cn(a,l)}}function cn(a,t,r){r===void 0&&(r=!1),!a.l&&a.h.D&&a.m&&Xn(t,r)}function jn(a,t){var r=a[be];return(r?at(r):a)[t]}function $i(a,t){if(t in a)for(var r=Object.getPrototypeOf(a);r;){var o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Object.getPrototypeOf(r)}}function Vn(a){a.P||(a.P=!0,a.l&&Vn(a.l))}function Pn(a){a.o||(a.o=Qn(a.t))}function zn(a,t,r){var o=ln(t)?Pe("MapSet").F(t,r):dn(t)?Pe("MapSet").T(t,r):a.O?function(l,h){var p=Array.isArray(l),_={i:p?1:0,A:h?h.A:Qi(),P:!1,I:!1,R:{},l:h,t:l,k:null,o:null,j:null,C:!1},b=_,A=Zn;p&&(b=[_],A=Gt);var y=Proxy.revocable(b,A),T=y.revoke,G=y.proxy;return _.k=G,_.j=T,G}(t,r):Pe("ES5").J(t,r);return(r?r.A:Qi()).p.push(o),o}function Xo(a){return ct(a)||he(22,a),function t(r){if(!Je(r))return r;var o,l=r[be],h=$e(r);if(l){if(!l.P&&(l.i<4||!Pe("ES5").K(l)))return l.t;l.I=!0,o=er(r,h),l.I=!1}else o=er(r,h);return Ct(o,function(p,_){l&&sn(l.t,p)===_||yr(o,p,t(_))}),h===3?new Set(o):o}(a)}function er(a,t){switch(t){case 2:return new Map(a);case 3:return Array.from(a)}return Qn(a)}function $n(){function a(o){if(!Je(o))return o;if(Array.isArray(o))return o.map(a);if(ln(o))return new Map(Array.from(o.entries()).map(function(p){return[p[0],a(p[1])]}));if(dn(o))return new Set(Array.from(o).map(a));var l=Object.create(Object.getPrototypeOf(o));for(var h in o)l[h]=a(o[h]);return Pt(o,Ht)&&(l[Ht]=o[Ht]),l}function t(o){return ct(o)?a(o):o}var r="add";Ko("Patches",{$:function(o,l){return l.forEach(function(h){for(var p=h.path,_=h.op,b=o,A=0;A<p.length-1;A++){var y=$e(b),T=p[A];typeof T!="string"&&typeof T!="number"&&(T=""+T),y!==0&&y!==1||T!=="__proto__"&&T!=="constructor"||he(24),typeof b=="function"&&T==="prototype"&&he(24),typeof(b=sn(b,T))!="object"&&he(15,p.join("/"))}var G=$e(b),N=a(h.value),x=p[p.length-1];switch(_){case"replace":switch(G){case 2:return b.set(x,N);case 3:he(16);default:return b[x]=N}case r:switch(G){case 1:return x==="-"?b.push(N):b.splice(x,0,N);case 2:return b.set(x,N);case 3:return b.add(N);default:return b[x]=N}case"remove":switch(G){case 1:return b.splice(x,1);case 2:return b.delete(x);case 3:return b.delete(h.value);default:return delete b[x]}default:he(17,_)}}),o},N:function(o,l,h,p){switch(o.i){case 0:case 4:case 2:return function(_,b,A,y){var T=_.t,G=_.o;Ct(_.R,function(N,x){var D=sn(T,N),V=sn(G,N),L=x?Pt(T,N)?"replace":r:"remove";if(D!==V||L!=="replace"){var $=b.concat(N);A.push(L==="remove"?{op:L,path:$}:{op:L,path:$,value:V}),y.push(L===r?{op:"remove",path:$}:L==="remove"?{op:r,path:$,value:t(D)}:{op:"replace",path:$,value:t(D)})}})}(o,l,h,p);case 5:case 1:return function(_,b,A,y){var T=_.t,G=_.R,N=_.o;if(N.length<T.length){var x=[N,T];T=x[0],N=x[1];var D=[y,A];A=D[0],y=D[1]}for(var V=0;V<T.length;V++)if(G[V]&&N[V]!==T[V]){var L=b.concat([V]);A.push({op:"replace",path:L,value:t(N[V])}),y.push({op:"replace",path:L,value:t(T[V])})}for(var $=T.length;$<N.length;$++){var Z=b.concat([$]);A.push({op:r,path:Z,value:t(N[$])})}T.length<N.length&&y.push({op:"replace",path:b.concat(["length"]),value:T.length})}(o,l,h,p);case 3:return function(_,b,A,y){var T=_.t,G=_.o,N=0;T.forEach(function(x){if(!G.has(x)){var D=b.concat([N]);A.push({op:"remove",path:D,value:x}),y.unshift({op:r,path:D,value:x})}N++}),N=0,G.forEach(function(x){if(!T.has(x)){var D=b.concat([N]);A.push({op:r,path:D,value:x}),y.unshift({op:"remove",path:D,value:x})}N++})}(o,l,h,p)}},M:function(o,l,h,p){h.push({op:"replace",path:[],value:l===ti?void 0:l}),p.push({op:"replace",path:[],value:o})}})}var tr,Ut,ei=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Jo=typeof Map<"u",$o=typeof Set<"u",nr=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ti=ei?Symbol.for("immer-nothing"):((tr={})["immer-nothing"]=!0,tr),Ht=ei?Symbol.for("immer-draftable"):"__$immer_draftable",be=ei?Symbol.for("immer-state"):"__$immer_state",es=""+Object.prototype.constructor,ni=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,ts=Object.getOwnPropertyDescriptors||function(a){var t={};return ni(a).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(a,r)}),t},Fn={},Zn={get:function(a,t){if(t===be)return a;var r=at(a);if(!Pt(r,t))return function(l,h,p){var _,b=$i(h,p);return b?"value"in b?b.value:(_=b.get)===null||_===void 0?void 0:_.call(l.k):void 0}(a,r,t);var o=r[t];return a.I||!Je(o)?o:o===jn(a.t,t)?(Pn(a),a.o[t]=zn(a.A.h,o,a)):o},has:function(a,t){return t in at(a)},ownKeys:function(a){return Reflect.ownKeys(at(a))},set:function(a,t,r){var o=$i(at(a),t);if(o?.set)return o.set.call(a.k,r),!0;if(!a.P){var l=jn(at(a),t),h=l?.[be];if(h&&h.t===r)return a.o[t]=r,a.R[t]=!1,!0;if(Zo(r,l)&&(r!==void 0||Pt(a.t,t)))return!0;Pn(a),Vn(a)}return a.o[t]===r&&(r!==void 0||t in a.o)||Number.isNaN(r)&&Number.isNaN(a.o[t])||(a.o[t]=r,a.R[t]=!0),!0},deleteProperty:function(a,t){return jn(a.t,t)!==void 0||t in a.t?(a.R[t]=!1,Pn(a),Vn(a)):delete a.R[t],a.o&&delete a.o[t],!0},getOwnPropertyDescriptor:function(a,t){var r=at(a),o=Reflect.getOwnPropertyDescriptor(r,t);return o&&{writable:!0,configurable:a.i!==1||t!=="length",enumerable:o.enumerable,value:r[t]}},defineProperty:function(){he(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){he(12)}},Gt={};Ct(Zn,function(a,t){Gt[a]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Gt.deleteProperty=function(a,t){return Gt.set.call(this,a,t,void 0)},Gt.set=function(a,t,r){return Zn.set.call(this,a[0],t,r,a[0])};var ns=function(){function a(r){var o=this;this.O=nr,this.D=!0,this.produce=function(l,h,p){if(typeof l=="function"&&typeof h!="function"){var _=h;h=l;var b=o;return function(D){var V=this;D===void 0&&(D=_);for(var L=arguments.length,$=Array(L>1?L-1:0),Z=1;Z<L;Z++)$[Z-1]=arguments[Z];return b.produce(D,function(ae){var Oe;return(Oe=h).call.apply(Oe,[V,ae].concat($))})}}var A;if(typeof h!="function"&&he(6),p!==void 0&&typeof p!="function"&&he(7),Je(l)){var y=Xi(o),T=zn(o,l,void 0),G=!0;try{A=h(T),G=!1}finally{G?an(y):Wn(y)}return typeof Promise<"u"&&A instanceof Promise?A.then(function(D){return Gn(y,p),Hn(D,y)},function(D){throw an(y),D}):(Gn(y,p),Hn(A,y))}if(!l||typeof l!="object"){if((A=h(l))===void 0&&(A=l),A===ti&&(A=void 0),o.D&&Xn(A,!0),p){var N=[],x=[];Pe("Patches").M(l,A,N,x),p(N,x)}return A}he(21,l)},this.produceWithPatches=function(l,h){if(typeof l=="function")return function(A){for(var y=arguments.length,T=Array(y>1?y-1:0),G=1;G<y;G++)T[G-1]=arguments[G];return o.produceWithPatches(A,function(N){return l.apply(void 0,[N].concat(T))})};var p,_,b=o.produce(l,h,function(A,y){p=A,_=y});return typeof Promise<"u"&&b instanceof Promise?b.then(function(A){return[A,p,_]}):[b,p,_]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=a.prototype;return t.createDraft=function(r){Je(r)||he(8),ct(r)&&(r=Xo(r));var o=Xi(this),l=zn(this,r,void 0);return l[be].C=!0,Wn(o),l},t.finishDraft=function(r,o){var l=r&&r[be],h=l.A;return Gn(h,o),Hn(void 0,h)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!nr&&he(20),this.O=r},t.applyPatches=function(r,o){var l;for(l=o.length-1;l>=0;l--){var h=o[l];if(h.path.length===0&&h.op==="replace"){r=h.value;break}}l>-1&&(o=o.slice(l+1));var p=Pe("Patches").$;return ct(r)?p(r,o):this.produce(r,function(_){return p(_,o)})},a}(),Te=new ns;Te.produce;var ii=Te.produceWithPatches.bind(Te);Te.setAutoFreeze.bind(Te);Te.setUseProxies.bind(Te);Te.applyPatches.bind(Te);Te.createDraft.bind(Te);Te.finishDraft.bind(Te);var Et=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};$n();class is{constructor(t){this.messageBus=t}getItems(t){return Et(this,void 0,void 0,function*(){if(Array.isArray(t)){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEMS",{ids:t});return r}else if(t){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return r.filter(t)}else{const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ALL_ITEMS",{});return r}})}isItemArray(t){return Array.isArray(t)&&t.every(r=>typeof r!="string")}updateItems(t,r,o=!0){return Et(this,void 0,void 0,function*(){let l;this.isItemArray(t)?l=t:l=yield this.getItems(t);const[h,p]=ii(l,r),_=h.map(A=>({id:A.id,type:A.type}));for(const A of p){const[y,T]=A.path;typeof y=="number"&&typeof T=="string"&&(_[y][T]=h[y][T])}const b=_.filter(A=>Object.keys(A).length>2);b.length!==0&&(yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_UPDATE_ITEMS",{updates:b,updateAttachments:o}))})}addItems(t){return Et(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_ADD_ITEMS",{items:t})})}deleteItems(t){return Et(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_DELETE_ITEMS",{ids:t})})}getItemAttachments(t){return Et(this,void 0,void 0,function*(){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_ATTACHMENTS",{ids:t});return r})}getItemBounds(t){return Et(this,void 0,void 0,function*(){const{bounds:r}=yield this.messageBus.sendAsync("OBR_SCENE_ITEMS_GET_ITEM_BOUNDS",{ids:t});return r})}onChange(t){const r=o=>{t(o.items)};return this.messageBus.send("OBR_SCENE_ITEMS_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_ITEMS_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_ITEMS_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_ITEMS_EVENT_CHANGE",r)}}}var bt=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};$n();class rs{constructor(t){this.messageBus=t}getItems(t){return bt(this,void 0,void 0,function*(){if(Array.isArray(t)){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEMS",{ids:t});return r}else if(t){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return r.filter(t)}else{const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ALL_ITEMS",{});return r}})}updateItems(t,r,o,l=!0){return bt(this,void 0,void 0,function*(){const h=yield this.getItems(t),[p,_]=ii(h,r),b=p.map(y=>({id:y.id,type:y.type}));for(const y of _){const[T,G]=y.path;typeof T=="number"&&typeof G=="string"&&(b[T][G]=p[T][G])}const A=b.filter(y=>Object.keys(y).length>2);A.length!==0&&(yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_UPDATE_ITEMS",{updates:A,fastUpdate:o,updateAttachments:l}))})}addItems(t){return bt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_ADD_ITEMS",{items:t})})}deleteItems(t){return bt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_DELETE_ITEMS",{ids:t})})}getItemAttachments(t){return bt(this,void 0,void 0,function*(){const{items:r}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_ATTACHMENTS",{ids:t});return r})}getItemBounds(t){return bt(this,void 0,void 0,function*(){const{bounds:r}=yield this.messageBus.sendAsync("OBR_SCENE_LOCAL_GET_ITEM_BOUNDS",{ids:t});return r})}onChange(t){const r=o=>{t(o.items)};return this.messageBus.send("OBR_SCENE_LOCAL_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_LOCAL_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_LOCAL_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_LOCAL_EVENT_CHANGE",r)}}}var Un=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class os{constructor(t){this.messageBus=t,this.grid=new zo(t),this.fog=new Vo(t),this.history=new Fo(t),this.items=new is(t),this.local=new rs(t)}isReady(){return Un(this,void 0,void 0,function*(){const{ready:t}=yield this.messageBus.sendAsync("OBR_SCENE_IS_READY",{});return t})}onReadyChange(t){const r=o=>{t(o.ready)};return this.messageBus.send("OBR_SCENE_READY_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_EVENT_READY_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_READY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_EVENT_READY_CHANGE",r)}}getMetadata(){return Un(this,void 0,void 0,function*(){const{metadata:t}=yield this.messageBus.sendAsync("OBR_SCENE_GET_METADATA",{});return t})}setMetadata(t){return Un(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_SCENE_SET_METADATA",{update:t})})}onMetadataChange(t){const r=o=>{t(o.metadata)};return this.messageBus.send("OBR_SCENE_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_SCENE_METADATA_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_SCENE_METADATA_UNSUBSCRIBE",{}),this.messageBus.off("OBR_SCENE_METADATA_EVENT_CHANGE",r)}}}function vr(a){return a.startsWith("http")?a:`${window.location.origin}${a}`}function jt(a){return a.map(t=>Object.assign(Object.assign({},t),{icon:vr(t.icon)}))}function ri(a){return Object.assign(Object.assign({},a),{url:vr(a.url)})}var ir=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class ss{constructor(t){this.contextMenus={},this.handleClick=r=>{var o;const l=this.contextMenus[r.id];l&&((o=l.onClick)===null||o===void 0||o.call(l,r.context,r.elementId))},this.messageBus=t,t.on("OBR_CONTEXT_MENU_EVENT_CLICK",this.handleClick)}create(t){return ir(this,void 0,void 0,function*(){this.messageBus.sendAsync("OBR_CONTEXT_MENU_CREATE",{id:t.id,shortcut:t.shortcut,icons:jt(t.icons),embed:t.embed&&ri(t.embed)}),this.contextMenus[t.id]=t})}remove(t){return ir(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_CONTEXT_MENU_REMOVE",{id:t}),delete this.contextMenus[t]})}}var je=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class as{constructor(t){this.tools={},this.toolActions={},this.toolModes={},this.handleToolClick=r=>{const o=this.tools[r.id];if(o)if(o.onClick){const l=o.onClick(r.context,r.elementId);Promise.resolve(l).then(h=>{h&&this.messageBus.send("OBR_TOOL_ACTIVATE",{id:r.id})})}else this.messageBus.send("OBR_TOOL_ACTIVATE",{id:r.id})},this.handleToolActionClick=r=>{var o;const l=this.toolActions[r.id];l&&((o=l.onClick)===null||o===void 0||o.call(l,r.context,r.elementId))},this.handleToolModeClick=r=>{const o=this.toolModes[r.id];if(o)if(o.onClick){const l=o.onClick(r.context,r.elementId);Promise.resolve(l).then(h=>{h&&this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:r.context.activeTool,modeId:r.id})})}else this.messageBus.send("OBR_TOOL_MODE_ACTIVATE",{toolId:r.context.activeTool,modeId:r.id})},this.handleToolModeToolClick=r=>{const o=this.toolModes[r.id];if(o)if(o.onToolClick){const l=o.onToolClick(r.context,r.event);Promise.resolve(l).then(h=>{h&&r.event.target&&!r.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[r.event.target.id]})})}else r.event.target&&!r.event.target.locked&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[r.event.target.id]})},this.handleToolModeToolDoubleClick=r=>{const o=this.toolModes[r.id];if(o)if(o.onToolDoubleClick){const l=o.onToolDoubleClick(r.context,r.event);Promise.resolve(l).then(h=>{h&&r.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[r.event.target.id]})})}else r.event.target&&this.messageBus.sendAsync("OBR_PLAYER_SELECT",{items:[r.event.target.id]})},this.handleToolModeToolDown=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolDown)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolMove=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolMove)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolUp=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolUp)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolDragStart=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolDragStart)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolDragMove=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolDragMove)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolDragEnd=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolDragEnd)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeToolDragCancel=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onToolDragCancel)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeKeyDown=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onKeyDown)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeKeyUp=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onKeyUp)===null||o===void 0||o.call(l,r.context,r.event))},this.handleToolModeActivate=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onActivate)===null||o===void 0||o.call(l,r.context))},this.handleToolModeDeactivate=r=>{var o;const l=this.toolModes[r.id];l&&((o=l.onDeactivate)===null||o===void 0||o.call(l,r.context))},this.messageBus=t,t.on("OBR_TOOL_EVENT_CLICK",this.handleToolClick),t.on("OBR_TOOL_ACTION_EVENT_CLICK",this.handleToolActionClick),t.on("OBR_TOOL_MODE_EVENT_CLICK",this.handleToolModeClick),t.on("OBR_TOOL_MODE_EVENT_TOOL_CLICK",this.handleToolModeToolClick),t.on("OBR_TOOL_MODE_EVENT_TOOL_DOUBLE_CLICK",this.handleToolModeToolDoubleClick),t.on("OBR_TOOL_MODE_EVENT_TOOL_DOWN",this.handleToolModeToolDown),t.on("OBR_TOOL_MODE_EVENT_TOOL_MOVE",this.handleToolModeToolMove),t.on("OBR_TOOL_MODE_EVENT_TOOL_UP",this.handleToolModeToolUp),t.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_START",this.handleToolModeToolDragStart),t.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_MOVE",this.handleToolModeToolDragMove),t.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_END",this.handleToolModeToolDragEnd),t.on("OBR_TOOL_MODE_EVENT_TOOL_DRAG_CANCEL",this.handleToolModeToolDragCancel),t.on("OBR_TOOL_MODE_EVENT_KEY_DOWN",this.handleToolModeKeyDown),t.on("OBR_TOOL_MODE_EVENT_KEY_UP",this.handleToolModeKeyUp),t.on("OBR_TOOL_MODE_EVENT_ACTIVATE",this.handleToolModeActivate),t.on("OBR_TOOL_MODE_EVENT_DEACTIVATE",this.handleToolModeDeactivate)}create(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_CREATE",{id:t.id,shortcut:t.shortcut,defaultMode:t.defaultMode,defaultMetadata:t.defaultMetadata,icons:jt(t.icons),disabled:t.disabled}),this.tools[t.id]=t})}remove(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_REMOVE",{id:t}),delete this.tools[t]})}activateTool(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTIVATE",{id:t})})}getMetadata(t){return je(this,void 0,void 0,function*(){const{metadata:r}=yield this.messageBus.sendAsync("OBR_TOOL_GET_METADATA",{id:t});return r})}setMetadata(t,r){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_SET_METADATA",{toolId:t,update:r})})}createAction(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_CREATE",{id:t.id,shortcut:t.shortcut,icons:jt(t.icons),disabled:t.disabled}),this.toolActions[t.id]=t})}removeAction(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_ACTION_REMOVE",{id:t}),delete this.tools[t]})}createMode(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_CREATE",{id:t.id,shortcut:t.shortcut,icons:jt(t.icons),preventDrag:t.preventDrag,disabled:t.disabled,cursors:t.cursors}),this.toolModes[t.id]=t})}removeMode(t){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_REMOVE",{id:t}),delete this.tools[t]})}activateMode(t,r){return je(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_TOOL_MODE_ACTIVATE",{toolId:t,modeId:r})})}}var Tt=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class us{constructor(t){this.messageBus=t}open(t){return Tt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_OPEN",Object.assign({},ri(t)))})}close(t){return Tt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_CLOSE",{id:t})})}getWidth(t){return Tt(this,void 0,void 0,function*(){const{width:r}=yield this.messageBus.sendAsync("OBR_POPOVER_GET_WIDTH",{id:t});return r})}setWidth(t,r){return Tt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_SET_WIDTH",{id:t,width:r})})}getHeight(t){return Tt(this,void 0,void 0,function*(){const{height:r}=yield this.messageBus.sendAsync("OBR_POPOVER_GET_HEIGHT",{id:t});return r})}setHeight(t,r){return Tt(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_POPOVER_SET_HEIGHT",{id:t,height:r})})}}var rr=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class cs{constructor(t){this.messageBus=t}open(t){return rr(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_OPEN",Object.assign({},ri(t)))})}close(t){return rr(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_MODAL_CLOSE",{id:t})})}}var ve=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class fs{constructor(t){this.messageBus=t}getWidth(){return ve(this,void 0,void 0,function*(){const{width:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_WIDTH",{});return t})}setWidth(t){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_WIDTH",{width:t})})}getHeight(){return ve(this,void 0,void 0,function*(){const{height:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_HEIGHT",{});return t})}setHeight(t){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_HEIGHT",{height:t})})}getBadgeText(){return ve(this,void 0,void 0,function*(){const{badgeText:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_TEXT",{});return t})}setBadgeText(t){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_TEXT",{badgeText:t})})}getBadgeBackgroundColor(){return ve(this,void 0,void 0,function*(){const{badgeBackgroundColor:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_BADGE_BACKGROUND_COLOR",{});return t})}setBadgeBackgroundColor(t){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_BADGE_BACKGROUND_COLOR",{badgeBackgroundColor:t})})}getIcon(){return ve(this,void 0,void 0,function*(){const{icon:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_ICON",{});return t})}setIcon(t){return ve(this,void 0,void 0,function*(){const r=jt([{icon:t}]);yield this.messageBus.sendAsync("OBR_ACTION_SET_ICON",{icon:r[0].icon})})}getTitle(){return ve(this,void 0,void 0,function*(){const{title:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_TITLE",{});return t})}setTitle(t){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_SET_TITLE",{title:t})})}isOpen(){return ve(this,void 0,void 0,function*(){const{isOpen:t}=yield this.messageBus.sendAsync("OBR_ACTION_GET_IS_OPEN",{});return t})}open(){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_OPEN",{})})}close(){return ve(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ACTION_CLOSE",{})})}onOpenChange(t){const r=o=>{t(o.isOpen)};return this.messageBus.send("OBR_ACTION_IS_OPEN_SUBSCRIBE",{}),this.messageBus.on("OBR_ACTION_IS_OPEN_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_IS_OPEN_ACTION_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ACTION_IS_OPEN_EVENT_CHANGE",r)}}}var ls=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};$n();class ds{constructor(t){this.messageBus=t}startItemInteraction(t,r=!0){return ls(this,void 0,void 0,function*(){const{id:o}=yield this.messageBus.sendAsync("OBR_INTERACTION_START_ITEM_INTERACTION",{baseState:t,updateAttachments:r});let l=t;return[_=>{const[b,A]=ii(l,_);return l=b,this.messageBus.send("OBR_INTERACTION_UPDATE_ITEM_INTERACTION",{id:o,patches:A}),b},()=>{this.messageBus.send("OBR_INTERACTION_STOP_ITEM_INTERACTION",{id:o})}]})}}var hs=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class ps{constructor(t){this.messageBus=t}getPlayers(){return hs(this,void 0,void 0,function*(){const{players:t}=yield this.messageBus.sendAsync("OBR_PARTY_GET_PLAYERS",{});return t})}onChange(t){const r=o=>{t(o.players)};return this.messageBus.send("OBR_PARTY_SUBSCRIBE",{}),this.messageBus.on("OBR_PARTY_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_PARTY_UNSUBSCRIBE",{}),this.messageBus.off("OBR_PARTY_EVENT_CHANGE",r)}}}var Yn=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class gs{constructor(t){this.messageBus=t}get id(){return this.messageBus.roomId}getPermissions(){return Yn(this,void 0,void 0,function*(){const{permissions:t}=yield this.messageBus.sendAsync("OBR_ROOM_GET_PERMISSIONS",{});return t})}getMetadata(){return Yn(this,void 0,void 0,function*(){const{metadata:t}=yield this.messageBus.sendAsync("OBR_ROOM_GET_METADATA",{});return t})}setMetadata(t){return Yn(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ROOM_SET_METADATA",{update:t})})}onMetadataChange(t){const r=o=>{t(o.metadata)};return this.messageBus.send("OBR_ROOM_METADATA_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_METADATA_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_METADATA_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_METADATA_EVENT_CHANGE",r)}}onPermissionsChange(t){const r=o=>{t(o.permissions)};return this.messageBus.send("OBR_ROOM_PERMISSIONS_SUBSCRIBE",{}),this.messageBus.on("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_PERMISSIONS_ROOM_UNSUBSCRIBE",{}),this.messageBus.off("OBR_ROOM_PERMISSIONS_EVENT_CHANGE",r)}}}var ys=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class vs{constructor(t){this.messageBus=t}getTheme(){return ys(this,void 0,void 0,function*(){const{theme:t}=yield this.messageBus.sendAsync("OBR_THEME_GET_THEME",{});return t})}onChange(t){const r=o=>{t(o.theme)};return this.messageBus.send("OBR_THEME_SUBSCRIBE",{}),this.messageBus.on("OBR_THEME_EVENT_CHANGE",r),()=>{this.messageBus.send("OBR_THEME_UNSUBSCRIBE",{}),this.messageBus.off("OBR_THEME_EVENT_CHANGE",r)}}}var nn=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class _s{constructor(t){this.messageBus=t}uploadImages(t,r){return nn(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ASSETS_UPLOAD_IMAGES",{images:t,typeHint:r})})}uploadScenes(t,r){return nn(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_ASSETS_UPLOAD_SCENES",{scenes:t,disableShowScenes:r})})}downloadImages(t,r,o){return nn(this,void 0,void 0,function*(){const{images:l}=yield this.messageBus.sendAsync("OBR_ASSETS_DOWNLOAD_IMAGES",{multiple:t,defaultSearch:r,typeHint:o},-1);return l})}downloadScenes(t,r){return nn(this,void 0,void 0,function*(){const{scenes:o}=yield this.messageBus.sendAsync("OBR_ASSETS_DOWNLOAD_SCENES",{multiple:t,defaultSearch:r},-1);return o})}}var ms=function(a,t,r,o){function l(h){return h instanceof r?h:new r(function(p){p(h)})}return new(r||(r=Promise))(function(h,p){function _(y){try{A(o.next(y))}catch(T){p(T)}}function b(y){try{A(o.throw(y))}catch(T){p(T)}}function A(y){y.done?h(y.value):l(y.value).then(_,b)}A((o=o.apply(a,t||[])).next())})};class As{constructor(t){this.messageBus=t}sendMessage(t,r){return ms(this,void 0,void 0,function*(){yield this.messageBus.sendAsync("OBR_BROADCAST_SEND_MESSAGE",{channel:t,data:r})})}onMessage(t,r){return this.messageBus.send("OBR_BROADCAST_SUBSCRIBE",{channel:t}),this.messageBus.on(`OBR_BROADCAST_MESSAGE_${t}`,r),()=>{this.messageBus.send("OBR_BROADCAST_UNSUBSCRIBE",{channel:t}),this.messageBus.off(`OBR_BROADCAST_MESSAGE_${t}`,r)}}}const oi=typeof Buffer=="function",or=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const Es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bs=Array.prototype.slice.call(Es),rn=(a=>{let t={};return a.forEach((r,o)=>t[r]=o),t})(bs),Ts=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ut=String.fromCharCode.bind(String),sr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):a=>new Uint8Array(Array.prototype.slice.call(a,0)),_r=a=>a.replace(/[^A-Za-z0-9\+\/]/g,""),Os=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Cs=a=>{switch(a.length){case 4:var t=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),r=t-65536;return ut((r>>>10)+55296)+ut((r&1023)+56320);case 3:return ut((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return ut((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},Bs=a=>a.replace(Os,Cs),Ss=a=>{if(a=a.replace(/\s+/g,""),!Ts.test(a))throw new TypeError("malformed base64.");a+="==".slice(2-(a.length&3));let t,r="",o,l;for(let h=0;h<a.length;)t=rn[a.charAt(h++)]<<18|rn[a.charAt(h++)]<<12|(o=rn[a.charAt(h++)])<<6|(l=rn[a.charAt(h++)]),r+=o===64?ut(t>>16&255):l===64?ut(t>>16&255,t>>8&255):ut(t>>16&255,t>>8&255,t&255);return r},mr=typeof atob=="function"?a=>atob(_r(a)):oi?a=>Buffer.from(a,"base64").toString("binary"):Ss,ws=oi?a=>sr(Buffer.from(a,"base64")):a=>sr(mr(a).split("").map(t=>t.charCodeAt(0))),Rs=oi?a=>Buffer.from(a,"base64").toString("utf8"):or?a=>or.decode(ws(a)):a=>Bs(mr(a)),Is=a=>_r(a.replace(/[-_]/g,t=>t=="-"?"+":"/")),xs=a=>Rs(Is(a));function Ns(){const t=new URLSearchParams(window.location.search).get("obrref");let r="",o="";if(t){const h=xs(t).split(" ");h.length===2&&(r=h[0],o=h[1])}return{origin:r,roomId:o}}var ar;(function(a){a[a.MOVE=0]="MOVE",a[a.LINE=1]="LINE",a[a.QUAD=2]="QUAD",a[a.CONIC=3]="CONIC",a[a.CUBIC=4]="CUBIC",a[a.CLOSE=5]="CLOSE"})(ar||(ar={}));const qn=Ns(),ce=new Yo(qn.origin,qn.roomId),ks=new Bo(ce),Ds=new Co(ce),Ms=new ps(ce),Ls=new Wo(ce),Gs=new os(ce),Hs=new ss(ce),js=new as(ce),Ps=new us(ce),Us=new cs(ce),Ys=new fs(ce),Ws=new ds(ce),Vs=new gs(ce),zs=new vs(ce),Fs=new _s(ce),Zs=new As(ce),Ks={onReady:a=>{ce.ready?a():ce.once("OBR_READY",()=>a())},get isReady(){return ce.ready},viewport:ks,player:Ds,party:Ms,notification:Ls,scene:Gs,contextMenu:Hs,tool:js,popover:Ps,modal:Us,action:Ys,interaction:Ws,room:Vs,theme:zs,assets:Fs,broadcast:Zs,isAvailable:!!qn.origin};var Ar={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(a){(function(t,r){a.exports=t.document?r(t,!0):function(o){if(!o.document)throw new Error("jQuery requires a window with a document");return r(o)}})(typeof window<"u"?window:wo,function(t,r){var o=[],l=Object.getPrototypeOf,h=o.slice,p=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},_=o.push,b=o.indexOf,A={},y=A.toString,T=A.hasOwnProperty,G=T.toString,N=G.call(Object),x={},D=function(n){return typeof n=="function"&&typeof n.nodeType!="number"&&typeof n.item!="function"},V=function(n){return n!=null&&n===n.window},L=t.document,$={type:!0,src:!0,nonce:!0,noModule:!0};function Z(e,n,i){i=i||L;var s,c,f=i.createElement("script");if(f.text=e,n)for(s in $)c=n[s]||n.getAttribute&&n.getAttribute(s),c&&f.setAttribute(s,c);i.head.appendChild(f).parentNode.removeChild(f)}function ae(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?A[y.call(e)]||"object":typeof e}var Oe="3.7.1",Ue=/HTML$/i,u=function(e,n){return new u.fn.init(e,n)};u.fn=u.prototype={jquery:Oe,constructor:u,length:0,toArray:function(){return h.call(this)},get:function(e){return e==null?h.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var n=u.merge(this.constructor(),e);return n.prevObject=this,n},each:function(e){return u.each(this,e)},map:function(e){return this.pushStack(u.map(this,function(n,i){return e.call(n,i,n)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(u.grep(this,function(e,n){return(n+1)%2}))},odd:function(){return this.pushStack(u.grep(this,function(e,n){return n%2}))},eq:function(e){var n=this.length,i=+e+(e<0?n:0);return this.pushStack(i>=0&&i<n?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:_,sort:o.sort,splice:o.splice},u.extend=u.fn.extend=function(){var e,n,i,s,c,f,d=arguments[0]||{},m=1,v=arguments.length,O=!1;for(typeof d=="boolean"&&(O=d,d=arguments[m]||{},m++),typeof d!="object"&&!D(d)&&(d={}),m===v&&(d=this,m--);m<v;m++)if((e=arguments[m])!=null)for(n in e)s=e[n],!(n==="__proto__"||d===s)&&(O&&s&&(u.isPlainObject(s)||(c=Array.isArray(s)))?(i=d[n],c&&!Array.isArray(i)?f=[]:!c&&!u.isPlainObject(i)?f={}:f=i,c=!1,d[n]=u.extend(O,f,s)):s!==void 0&&(d[n]=s));return d},u.extend({expando:"jQuery"+(Oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var n,i;return!e||y.call(e)!=="[object Object]"?!1:(n=l(e),n?(i=T.call(n,"constructor")&&n.constructor,typeof i=="function"&&G.call(i)===N):!0)},isEmptyObject:function(e){var n;for(n in e)return!1;return!0},globalEval:function(e,n,i){Z(e,{nonce:n&&n.nonce},i)},each:function(e,n){var i,s=0;if(xe(e))for(i=e.length;s<i&&n.call(e[s],s,e[s])!==!1;s++);else for(s in e)if(n.call(e[s],s,e[s])===!1)break;return e},text:function(e){var n,i="",s=0,c=e.nodeType;if(!c)for(;n=e[s++];)i+=u.text(n);return c===1||c===11?e.textContent:c===9?e.documentElement.textContent:c===3||c===4?e.nodeValue:i},makeArray:function(e,n){var i=n||[];return e!=null&&(xe(Object(e))?u.merge(i,typeof e=="string"?[e]:e):_.call(i,e)),i},inArray:function(e,n,i){return n==null?-1:b.call(n,e,i)},isXMLDoc:function(e){var n=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!Ue.test(n||i&&i.nodeName||"HTML")},merge:function(e,n){for(var i=+n.length,s=0,c=e.length;s<i;s++)e[c++]=n[s];return e.length=c,e},grep:function(e,n,i){for(var s,c=[],f=0,d=e.length,m=!i;f<d;f++)s=!n(e[f],f),s!==m&&c.push(e[f]);return c},map:function(e,n,i){var s,c,f=0,d=[];if(xe(e))for(s=e.length;f<s;f++)c=n(e[f],f,i),c!=null&&d.push(c);else for(f in e)c=n(e[f],f,i),c!=null&&d.push(c);return p(d)},guid:1,support:x}),typeof Symbol=="function"&&(u.fn[Symbol.iterator]=o[Symbol.iterator]),u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,n){A["[object "+n+"]"]=n.toLowerCase()});function xe(e){var n=!!e&&"length"in e&&e.length,i=ae(e);return D(e)||V(e)?!1:i==="array"||n===0||typeof n=="number"&&n>0&&n-1 in e}function te(e,n){return e.nodeName&&e.nodeName.toLowerCase()===n.toLowerCase()}var et=o.pop,tt=o.sort,Ze=o.splice,ne="[\\x20\\t\\r\\n\\f]",qe=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g");u.contains=function(e,n){var i=n&&n.parentNode;return e===i||!!(i&&i.nodeType===1&&(e.contains?e.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))};var Yt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function br(e,n){return n?e==="\0"?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}u.escapeSelector=function(e){return(e+"").replace(Yt,br)};var Ye=L,hn=_;(function(){var e,n,i,s,c,f=hn,d,m,v,O,w,I=u.expando,B=0,k=0,z=Qt(),J=Qt(),q=Qt(),fe=Qt(),ue=function(g,E){return g===E&&(c=!0),0},De="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Me="(?:\\\\[\\da-fA-F]{1,6}"+ne+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",X="\\["+ne+"*("+Me+")(?:"+ne+"*([*^$|!~]?=)"+ne+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Me+"))|)"+ne+"*\\]",ot=":("+Me+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+X+")*)|.*)\\)|)",ee=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"*,"+ne+"*"),Dt=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),In=new RegExp(ne+"|>"),Le=new RegExp(ot),Mt=new RegExp("^"+Me+"$"),Ge={ID:new RegExp("^#("+Me+")"),CLASS:new RegExp("^\\.("+Me+")"),TAG:new RegExp("^("+Me+"|[*])"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+De+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},Ke=/^(?:input|select|textarea|button)$/i,Qe=/^h\d$/i,Be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xn=/[+~]/,ze=new RegExp("\\\\[\\da-fA-F]{1,6}"+ne+"?|\\\\([^\\r\\n\\f])","g"),Fe=function(g,E){var C="0x"+g.slice(1)-65536;return E||(C<0?String.fromCharCode(C+65536):String.fromCharCode(C>>10|55296,C&1023|56320))},_o=function(){Xe()},mo=Jt(function(g){return g.disabled===!0&&te(g,"fieldset")},{dir:"parentNode",next:"legend"});function Ao(){try{return d.activeElement}catch{}}try{f.apply(o=h.call(Ye.childNodes),Ye.childNodes),o[Ye.childNodes.length].nodeType}catch{f={apply:function(E,C){hn.apply(E,h.call(C))},call:function(E){hn.apply(E,h.call(arguments,1))}}}function ie(g,E,C,S){var R,M,H,P,j,K,W,F=E&&E.ownerDocument,Q=E?E.nodeType:9;if(C=C||[],typeof g!="string"||!g||Q!==1&&Q!==9&&Q!==11)return C;if(!S&&(Xe(E),E=E||d,v)){if(Q!==11&&(j=Be.exec(g)))if(R=j[1]){if(Q===9)if(H=E.getElementById(R)){if(H.id===R)return f.call(C,H),C}else return C;else if(F&&(H=F.getElementById(R))&&ie.contains(E,H)&&H.id===R)return f.call(C,H),C}else{if(j[2])return f.apply(C,E.getElementsByTagName(g)),C;if((R=j[3])&&E.getElementsByClassName)return f.apply(C,E.getElementsByClassName(R)),C}if(!fe[g+" "]&&(!O||!O.test(g))){if(W=g,F=E,Q===1&&(In.test(g)||Dt.test(g))){for(F=xn.test(g)&&Nn(E.parentNode)||E,(F!=E||!x.scope)&&((P=E.getAttribute("id"))?P=u.escapeSelector(P):E.setAttribute("id",P=I)),K=Lt(g),M=K.length;M--;)K[M]=(P?"#"+P:":scope")+" "+Xt(K[M]);W=K.join(",")}try{return f.apply(C,F.querySelectorAll(W)),C}catch{fe(g,!0)}finally{P===I&&E.removeAttribute("id")}}}return zi(g.replace(qe,"$1"),E,C,S)}function Qt(){var g=[];function E(C,S){return g.push(C+" ")>n.cacheLength&&delete E[g.shift()],E[C+" "]=S}return E}function Re(g){return g[I]=!0,g}function _t(g){var E=d.createElement("fieldset");try{return!!g(E)}catch{return!1}finally{E.parentNode&&E.parentNode.removeChild(E),E=null}}function Eo(g){return function(E){return te(E,"input")&&E.type===g}}function bo(g){return function(E){return(te(E,"input")||te(E,"button"))&&E.type===g}}function Wi(g){return function(E){return"form"in E?E.parentNode&&E.disabled===!1?"label"in E?"label"in E.parentNode?E.parentNode.disabled===g:E.disabled===g:E.isDisabled===g||E.isDisabled!==!g&&mo(E)===g:E.disabled===g:"label"in E?E.disabled===g:!1}}function st(g){return Re(function(E){return E=+E,Re(function(C,S){for(var R,M=g([],C.length,E),H=M.length;H--;)C[R=M[H]]&&(C[R]=!(S[R]=C[R]))})})}function Nn(g){return g&&typeof g.getElementsByTagName<"u"&&g}function Xe(g){var E,C=g?g.ownerDocument||g:Ye;return C==d||C.nodeType!==9||!C.documentElement||(d=C,m=d.documentElement,v=!u.isXMLDoc(d),w=m.matches||m.webkitMatchesSelector||m.msMatchesSelector,m.msMatchesSelector&&Ye!=d&&(E=d.defaultView)&&E.top!==E&&E.addEventListener("unload",_o),x.getById=_t(function(S){return m.appendChild(S).id=u.expando,!d.getElementsByName||!d.getElementsByName(u.expando).length}),x.disconnectedMatch=_t(function(S){return w.call(S,"*")}),x.scope=_t(function(){return d.querySelectorAll(":scope")}),x.cssHas=_t(function(){try{return d.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),x.getById?(n.filter.ID=function(S){var R=S.replace(ze,Fe);return function(M){return M.getAttribute("id")===R}},n.find.ID=function(S,R){if(typeof R.getElementById<"u"&&v){var M=R.getElementById(S);return M?[M]:[]}}):(n.filter.ID=function(S){var R=S.replace(ze,Fe);return function(M){var H=typeof M.getAttributeNode<"u"&&M.getAttributeNode("id");return H&&H.value===R}},n.find.ID=function(S,R){if(typeof R.getElementById<"u"&&v){var M,H,P,j=R.getElementById(S);if(j){if(M=j.getAttributeNode("id"),M&&M.value===S)return[j];for(P=R.getElementsByName(S),H=0;j=P[H++];)if(M=j.getAttributeNode("id"),M&&M.value===S)return[j]}return[]}}),n.find.TAG=function(S,R){return typeof R.getElementsByTagName<"u"?R.getElementsByTagName(S):R.querySelectorAll(S)},n.find.CLASS=function(S,R){if(typeof R.getElementsByClassName<"u"&&v)return R.getElementsByClassName(S)},O=[],_t(function(S){var R;m.appendChild(S).innerHTML="<a id='"+I+"' href='' disabled='disabled'></a><select id='"+I+"-\r\\' disabled='disabled'><option selected=''></option></select>",S.querySelectorAll("[selected]").length||O.push("\\["+ne+"*(?:value|"+De+")"),S.querySelectorAll("[id~="+I+"-]").length||O.push("~="),S.querySelectorAll("a#"+I+"+*").length||O.push(".#.+[+~]"),S.querySelectorAll(":checked").length||O.push(":checked"),R=d.createElement("input"),R.setAttribute("type","hidden"),S.appendChild(R).setAttribute("name","D"),m.appendChild(S).disabled=!0,S.querySelectorAll(":disabled").length!==2&&O.push(":enabled",":disabled"),R=d.createElement("input"),R.setAttribute("name",""),S.appendChild(R),S.querySelectorAll("[name='']").length||O.push("\\["+ne+"*name"+ne+"*="+ne+`*(?:''|"")`)}),x.cssHas||O.push(":has"),O=O.length&&new RegExp(O.join("|")),ue=function(S,R){if(S===R)return c=!0,0;var M=!S.compareDocumentPosition-!R.compareDocumentPosition;return M||(M=(S.ownerDocument||S)==(R.ownerDocument||R)?S.compareDocumentPosition(R):1,M&1||!x.sortDetached&&R.compareDocumentPosition(S)===M?S===d||S.ownerDocument==Ye&&ie.contains(Ye,S)?-1:R===d||R.ownerDocument==Ye&&ie.contains(Ye,R)?1:s?b.call(s,S)-b.call(s,R):0:M&4?-1:1)}),d}ie.matches=function(g,E){return ie(g,null,null,E)},ie.matchesSelector=function(g,E){if(Xe(g),v&&!fe[E+" "]&&(!O||!O.test(E)))try{var C=w.call(g,E);if(C||x.disconnectedMatch||g.document&&g.document.nodeType!==11)return C}catch{fe(E,!0)}return ie(E,d,null,[g]).length>0},ie.contains=function(g,E){return(g.ownerDocument||g)!=d&&Xe(g),u.contains(g,E)},ie.attr=function(g,E){(g.ownerDocument||g)!=d&&Xe(g);var C=n.attrHandle[E.toLowerCase()],S=C&&T.call(n.attrHandle,E.toLowerCase())?C(g,E,!v):void 0;return S!==void 0?S:g.getAttribute(E)},ie.error=function(g){throw new Error("Syntax error, unrecognized expression: "+g)},u.uniqueSort=function(g){var E,C=[],S=0,R=0;if(c=!x.sortStable,s=!x.sortStable&&h.call(g,0),tt.call(g,ue),c){for(;E=g[R++];)E===g[R]&&(S=C.push(R));for(;S--;)Ze.call(g,C[S],1)}return s=null,g},u.fn.uniqueSort=function(){return this.pushStack(u.uniqueSort(h.apply(this)))},n=u.expr={cacheLength:50,createPseudo:Re,match:Ge,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(g){return g[1]=g[1].replace(ze,Fe),g[3]=(g[3]||g[4]||g[5]||"").replace(ze,Fe),g[2]==="~="&&(g[3]=" "+g[3]+" "),g.slice(0,4)},CHILD:function(g){return g[1]=g[1].toLowerCase(),g[1].slice(0,3)==="nth"?(g[3]||ie.error(g[0]),g[4]=+(g[4]?g[5]+(g[6]||1):2*(g[3]==="even"||g[3]==="odd")),g[5]=+(g[7]+g[8]||g[3]==="odd")):g[3]&&ie.error(g[0]),g},PSEUDO:function(g){var E,C=!g[6]&&g[2];return Ge.CHILD.test(g[0])?null:(g[3]?g[2]=g[4]||g[5]||"":C&&Le.test(C)&&(E=Lt(C,!0))&&(E=C.indexOf(")",C.length-E)-C.length)&&(g[0]=g[0].slice(0,E),g[2]=C.slice(0,E)),g.slice(0,3))}},filter:{TAG:function(g){var E=g.replace(ze,Fe).toLowerCase();return g==="*"?function(){return!0}:function(C){return te(C,E)}},CLASS:function(g){var E=z[g+" "];return E||(E=new RegExp("(^|"+ne+")"+g+"("+ne+"|$)"))&&z(g,function(C){return E.test(typeof C.className=="string"&&C.className||typeof C.getAttribute<"u"&&C.getAttribute("class")||"")})},ATTR:function(g,E,C){return function(S){var R=ie.attr(S,g);return R==null?E==="!=":E?(R+="",E==="="?R===C:E==="!="?R!==C:E==="^="?C&&R.indexOf(C)===0:E==="*="?C&&R.indexOf(C)>-1:E==="$="?C&&R.slice(-C.length)===C:E==="~="?(" "+R.replace(ee," ")+" ").indexOf(C)>-1:E==="|="?R===C||R.slice(0,C.length+1)===C+"-":!1):!0}},CHILD:function(g,E,C,S,R){var M=g.slice(0,3)!=="nth",H=g.slice(-4)!=="last",P=E==="of-type";return S===1&&R===0?function(j){return!!j.parentNode}:function(j,K,W){var F,Q,Y,oe,Ee,de=M!==H?"nextSibling":"previousSibling",Se=j.parentNode,He=P&&j.nodeName.toLowerCase(),mt=!W&&!P,pe=!1;if(Se){if(M){for(;de;){for(Y=j;Y=Y[de];)if(P?te(Y,He):Y.nodeType===1)return!1;Ee=de=g==="only"&&!Ee&&"nextSibling"}return!0}if(Ee=[H?Se.firstChild:Se.lastChild],H&&mt){for(Q=Se[I]||(Se[I]={}),F=Q[g]||[],oe=F[0]===B&&F[1],pe=oe&&F[2],Y=oe&&Se.childNodes[oe];Y=++oe&&Y&&Y[de]||(pe=oe=0)||Ee.pop();)if(Y.nodeType===1&&++pe&&Y===j){Q[g]=[B,oe,pe];break}}else if(mt&&(Q=j[I]||(j[I]={}),F=Q[g]||[],oe=F[0]===B&&F[1],pe=oe),pe===!1)for(;(Y=++oe&&Y&&Y[de]||(pe=oe=0)||Ee.pop())&&!((P?te(Y,He):Y.nodeType===1)&&++pe&&(mt&&(Q=Y[I]||(Y[I]={}),Q[g]=[B,pe]),Y===j)););return pe-=R,pe===S||pe%S===0&&pe/S>=0}}},PSEUDO:function(g,E){var C,S=n.pseudos[g]||n.setFilters[g.toLowerCase()]||ie.error("unsupported pseudo: "+g);return S[I]?S(E):S.length>1?(C=[g,g,"",E],n.setFilters.hasOwnProperty(g.toLowerCase())?Re(function(R,M){for(var H,P=S(R,E),j=P.length;j--;)H=b.call(R,P[j]),R[H]=!(M[H]=P[j])}):function(R){return S(R,0,C)}):S}},pseudos:{not:Re(function(g){var E=[],C=[],S=Ln(g.replace(qe,"$1"));return S[I]?Re(function(R,M,H,P){for(var j,K=S(R,null,P,[]),W=R.length;W--;)(j=K[W])&&(R[W]=!(M[W]=j))}):function(R,M,H){return E[0]=R,S(E,null,H,C),E[0]=null,!C.pop()}}),has:Re(function(g){return function(E){return ie(g,E).length>0}}),contains:Re(function(g){return g=g.replace(ze,Fe),function(E){return(E.textContent||u.text(E)).indexOf(g)>-1}}),lang:Re(function(g){return Mt.test(g||"")||ie.error("unsupported lang: "+g),g=g.replace(ze,Fe).toLowerCase(),function(E){var C;do if(C=v?E.lang:E.getAttribute("xml:lang")||E.getAttribute("lang"))return C=C.toLowerCase(),C===g||C.indexOf(g+"-")===0;while((E=E.parentNode)&&E.nodeType===1);return!1}}),target:function(g){var E=t.location&&t.location.hash;return E&&E.slice(1)===g.id},root:function(g){return g===m},focus:function(g){return g===Ao()&&d.hasFocus()&&!!(g.type||g.href||~g.tabIndex)},enabled:Wi(!1),disabled:Wi(!0),checked:function(g){return te(g,"input")&&!!g.checked||te(g,"option")&&!!g.selected},selected:function(g){return g.parentNode&&g.parentNode.selectedIndex,g.selected===!0},empty:function(g){for(g=g.firstChild;g;g=g.nextSibling)if(g.nodeType<6)return!1;return!0},parent:function(g){return!n.pseudos.empty(g)},header:function(g){return Qe.test(g.nodeName)},input:function(g){return Ke.test(g.nodeName)},button:function(g){return te(g,"input")&&g.type==="button"||te(g,"button")},text:function(g){var E;return te(g,"input")&&g.type==="text"&&((E=g.getAttribute("type"))==null||E.toLowerCase()==="text")},first:st(function(){return[0]}),last:st(function(g,E){return[E-1]}),eq:st(function(g,E,C){return[C<0?C+E:C]}),even:st(function(g,E){for(var C=0;C<E;C+=2)g.push(C);return g}),odd:st(function(g,E){for(var C=1;C<E;C+=2)g.push(C);return g}),lt:st(function(g,E,C){var S;for(C<0?S=C+E:C>E?S=E:S=C;--S>=0;)g.push(S);return g}),gt:st(function(g,E,C){for(var S=C<0?C+E:C;++S<E;)g.push(S);return g})}},n.pseudos.nth=n.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=Eo(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=bo(e);function Vi(){}Vi.prototype=n.filters=n.pseudos,n.setFilters=new Vi;function Lt(g,E){var C,S,R,M,H,P,j,K=J[g+" "];if(K)return E?0:K.slice(0);for(H=g,P=[],j=n.preFilter;H;){(!C||(S=se.exec(H)))&&(S&&(H=H.slice(S[0].length)||H),P.push(R=[])),C=!1,(S=Dt.exec(H))&&(C=S.shift(),R.push({value:C,type:S[0].replace(qe," ")}),H=H.slice(C.length));for(M in n.filter)(S=Ge[M].exec(H))&&(!j[M]||(S=j[M](S)))&&(C=S.shift(),R.push({value:C,type:M,matches:S}),H=H.slice(C.length));if(!C)break}return E?H.length:H?ie.error(g):J(g,P).slice(0)}function Xt(g){for(var E=0,C=g.length,S="";E<C;E++)S+=g[E].value;return S}function Jt(g,E,C){var S=E.dir,R=E.next,M=R||S,H=C&&M==="parentNode",P=k++;return E.first?function(j,K,W){for(;j=j[S];)if(j.nodeType===1||H)return g(j,K,W);return!1}:function(j,K,W){var F,Q,Y=[B,P];if(W){for(;j=j[S];)if((j.nodeType===1||H)&&g(j,K,W))return!0}else for(;j=j[S];)if(j.nodeType===1||H)if(Q=j[I]||(j[I]={}),R&&te(j,R))j=j[S]||j;else{if((F=Q[M])&&F[0]===B&&F[1]===P)return Y[2]=F[2];if(Q[M]=Y,Y[2]=g(j,K,W))return!0}return!1}}function kn(g){return g.length>1?function(E,C,S){for(var R=g.length;R--;)if(!g[R](E,C,S))return!1;return!0}:g[0]}function To(g,E,C){for(var S=0,R=E.length;S<R;S++)ie(g,E[S],C);return C}function $t(g,E,C,S,R){for(var M,H=[],P=0,j=g.length,K=E!=null;P<j;P++)(M=g[P])&&(!C||C(M,S,R))&&(H.push(M),K&&E.push(P));return H}function Dn(g,E,C,S,R,M){return S&&!S[I]&&(S=Dn(S)),R&&!R[I]&&(R=Dn(R,M)),Re(function(H,P,j,K){var W,F,Q,Y,oe=[],Ee=[],de=P.length,Se=H||To(E||"*",j.nodeType?[j]:j,[]),He=g&&(H||!E)?$t(Se,oe,g,j,K):Se;if(C?(Y=R||(H?g:de||S)?[]:P,C(He,Y,j,K)):Y=He,S)for(W=$t(Y,Ee),S(W,[],j,K),F=W.length;F--;)(Q=W[F])&&(Y[Ee[F]]=!(He[Ee[F]]=Q));if(H){if(R||g){if(R){for(W=[],F=Y.length;F--;)(Q=Y[F])&&W.push(He[F]=Q);R(null,Y=[],W,K)}for(F=Y.length;F--;)(Q=Y[F])&&(W=R?b.call(H,Q):oe[F])>-1&&(H[W]=!(P[W]=Q))}}else Y=$t(Y===P?Y.splice(de,Y.length):Y),R?R(null,P,Y,K):f.apply(P,Y)})}function Mn(g){for(var E,C,S,R=g.length,M=n.relative[g[0].type],H=M||n.relative[" "],P=M?1:0,j=Jt(function(F){return F===E},H,!0),K=Jt(function(F){return b.call(E,F)>-1},H,!0),W=[function(F,Q,Y){var oe=!M&&(Y||Q!=i)||((E=Q).nodeType?j(F,Q,Y):K(F,Q,Y));return E=null,oe}];P<R;P++)if(C=n.relative[g[P].type])W=[Jt(kn(W),C)];else{if(C=n.filter[g[P].type].apply(null,g[P].matches),C[I]){for(S=++P;S<R&&!n.relative[g[S].type];S++);return Dn(P>1&&kn(W),P>1&&Xt(g.slice(0,P-1).concat({value:g[P-2].type===" "?"*":""})).replace(qe,"$1"),C,P<S&&Mn(g.slice(P,S)),S<R&&Mn(g=g.slice(S)),S<R&&Xt(g))}W.push(C)}return kn(W)}function Oo(g,E){var C=E.length>0,S=g.length>0,R=function(M,H,P,j,K){var W,F,Q,Y=0,oe="0",Ee=M&&[],de=[],Se=i,He=M||S&&n.find.TAG("*",K),mt=B+=Se==null?1:Math.random()||.1,pe=He.length;for(K&&(i=H==d||H||K);oe!==pe&&(W=He[oe])!=null;oe++){if(S&&W){for(F=0,!H&&W.ownerDocument!=d&&(Xe(W),P=!v);Q=g[F++];)if(Q(W,H||d,P)){f.call(j,W);break}K&&(B=mt)}C&&((W=!Q&&W)&&Y--,M&&Ee.push(W))}if(Y+=oe,C&&oe!==Y){for(F=0;Q=E[F++];)Q(Ee,de,H,P);if(M){if(Y>0)for(;oe--;)Ee[oe]||de[oe]||(de[oe]=et.call(j));de=$t(de)}f.apply(j,de),K&&!M&&de.length>0&&Y+E.length>1&&u.uniqueSort(j)}return K&&(B=mt,i=Se),Ee};return C?Re(R):R}function Ln(g,E){var C,S=[],R=[],M=q[g+" "];if(!M){for(E||(E=Lt(g)),C=E.length;C--;)M=Mn(E[C]),M[I]?S.push(M):R.push(M);M=q(g,Oo(R,S)),M.selector=g}return M}function zi(g,E,C,S){var R,M,H,P,j,K=typeof g=="function"&&g,W=!S&&Lt(g=K.selector||g);if(C=C||[],W.length===1){if(M=W[0]=W[0].slice(0),M.length>2&&(H=M[0]).type==="ID"&&E.nodeType===9&&v&&n.relative[M[1].type]){if(E=(n.find.ID(H.matches[0].replace(ze,Fe),E)||[])[0],E)K&&(E=E.parentNode);else return C;g=g.slice(M.shift().value.length)}for(R=Ge.needsContext.test(g)?0:M.length;R--&&(H=M[R],!n.relative[P=H.type]);)if((j=n.find[P])&&(S=j(H.matches[0].replace(ze,Fe),xn.test(M[0].type)&&Nn(E.parentNode)||E))){if(M.splice(R,1),g=S.length&&Xt(M),!g)return f.apply(C,S),C;break}}return(K||Ln(g,W))(S,E,!v,C,!E||xn.test(g)&&Nn(E.parentNode)||E),C}x.sortStable=I.split("").sort(ue).join("")===I,Xe(),x.sortDetached=_t(function(g){return g.compareDocumentPosition(d.createElement("fieldset"))&1}),u.find=ie,u.expr[":"]=u.expr.pseudos,u.unique=u.uniqueSort,ie.compile=Ln,ie.select=zi,ie.setDocument=Xe,ie.tokenize=Lt,ie.escape=u.escapeSelector,ie.getText=u.text,ie.isXML=u.isXMLDoc,ie.selectors=u.expr,ie.support=u.support,ie.uniqueSort=u.uniqueSort})();var ft=function(e,n,i){for(var s=[],c=i!==void 0;(e=e[n])&&e.nodeType!==9;)if(e.nodeType===1){if(c&&u(e).is(i))break;s.push(e)}return s},si=function(e,n){for(var i=[];e;e=e.nextSibling)e.nodeType===1&&e!==n&&i.push(e);return i},ai=u.expr.match.needsContext,ui=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function pn(e,n,i){return D(n)?u.grep(e,function(s,c){return!!n.call(s,c,s)!==i}):n.nodeType?u.grep(e,function(s){return s===n!==i}):typeof n!="string"?u.grep(e,function(s){return b.call(n,s)>-1!==i}):u.filter(n,e,i)}u.filter=function(e,n,i){var s=n[0];return i&&(e=":not("+e+")"),n.length===1&&s.nodeType===1?u.find.matchesSelector(s,e)?[s]:[]:u.find.matches(e,u.grep(n,function(c){return c.nodeType===1}))},u.fn.extend({find:function(e){var n,i,s=this.length,c=this;if(typeof e!="string")return this.pushStack(u(e).filter(function(){for(n=0;n<s;n++)if(u.contains(c[n],this))return!0}));for(i=this.pushStack([]),n=0;n<s;n++)u.find(e,c[n],i);return s>1?u.uniqueSort(i):i},filter:function(e){return this.pushStack(pn(this,e||[],!1))},not:function(e){return this.pushStack(pn(this,e||[],!0))},is:function(e){return!!pn(this,typeof e=="string"&&ai.test(e)?u(e):e||[],!1).length}});var ci,Tr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Or=u.fn.init=function(e,n,i){var s,c;if(!e)return this;if(i=i||ci,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?s=[null,e,null]:s=Tr.exec(e),s&&(s[1]||!n))if(s[1]){if(n=n instanceof u?n[0]:n,u.merge(this,u.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:L,!0)),ui.test(s[1])&&u.isPlainObject(n))for(s in n)D(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}else return c=L.getElementById(s[2]),c&&(this[0]=c,this.length=1),this;else return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(D(e))return i.ready!==void 0?i.ready(e):e(u)}return u.makeArray(e,this)};Or.prototype=u.fn,ci=u(L);var Cr=/^(?:parents|prev(?:Until|All))/,Br={children:!0,contents:!0,next:!0,prev:!0};u.fn.extend({has:function(e){var n=u(e,this),i=n.length;return this.filter(function(){for(var s=0;s<i;s++)if(u.contains(this,n[s]))return!0})},closest:function(e,n){var i,s=0,c=this.length,f=[],d=typeof e!="string"&&u(e);if(!ai.test(e)){for(;s<c;s++)for(i=this[s];i&&i!==n;i=i.parentNode)if(i.nodeType<11&&(d?d.index(i)>-1:i.nodeType===1&&u.find.matchesSelector(i,e))){f.push(i);break}}return this.pushStack(f.length>1?u.uniqueSort(f):f)},index:function(e){return e?typeof e=="string"?b.call(u(e),this[0]):b.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,n){return this.pushStack(u.uniqueSort(u.merge(this.get(),u(e,n))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function fi(e,n){for(;(e=e[n])&&e.nodeType!==1;);return e}u.each({parent:function(e){var n=e.parentNode;return n&&n.nodeType!==11?n:null},parents:function(e){return ft(e,"parentNode")},parentsUntil:function(e,n,i){return ft(e,"parentNode",i)},next:function(e){return fi(e,"nextSibling")},prev:function(e){return fi(e,"previousSibling")},nextAll:function(e){return ft(e,"nextSibling")},prevAll:function(e){return ft(e,"previousSibling")},nextUntil:function(e,n,i){return ft(e,"nextSibling",i)},prevUntil:function(e,n,i){return ft(e,"previousSibling",i)},siblings:function(e){return si((e.parentNode||{}).firstChild,e)},children:function(e){return si(e.firstChild)},contents:function(e){return e.contentDocument!=null&&l(e.contentDocument)?e.contentDocument:(te(e,"template")&&(e=e.content||e),u.merge([],e.childNodes))}},function(e,n){u.fn[e]=function(i,s){var c=u.map(this,n,i);return e.slice(-5)!=="Until"&&(s=i),s&&typeof s=="string"&&(c=u.filter(s,c)),this.length>1&&(Br[e]||u.uniqueSort(c),Cr.test(e)&&c.reverse()),this.pushStack(c)}});var Ne=/[^\x20\t\r\n\f]+/g;function Sr(e){var n={};return u.each(e.match(Ne)||[],function(i,s){n[s]=!0}),n}u.Callbacks=function(e){e=typeof e=="string"?Sr(e):u.extend({},e);var n,i,s,c,f=[],d=[],m=-1,v=function(){for(c=c||e.once,s=n=!0;d.length;m=-1)for(i=d.shift();++m<f.length;)f[m].apply(i[0],i[1])===!1&&e.stopOnFalse&&(m=f.length,i=!1);e.memory||(i=!1),n=!1,c&&(i?f=[]:f="")},O={add:function(){return f&&(i&&!n&&(m=f.length-1,d.push(i)),function w(I){u.each(I,function(B,k){D(k)?(!e.unique||!O.has(k))&&f.push(k):k&&k.length&&ae(k)!=="string"&&w(k)})}(arguments),i&&!n&&v()),this},remove:function(){return u.each(arguments,function(w,I){for(var B;(B=u.inArray(I,f,B))>-1;)f.splice(B,1),B<=m&&m--}),this},has:function(w){return w?u.inArray(w,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return c=d=[],f=i="",this},disabled:function(){return!f},lock:function(){return c=d=[],!i&&!n&&(f=i=""),this},locked:function(){return!!c},fireWith:function(w,I){return c||(I=I||[],I=[w,I.slice?I.slice():I],d.push(I),n||v()),this},fire:function(){return O.fireWith(this,arguments),this},fired:function(){return!!s}};return O};function lt(e){return e}function Wt(e){throw e}function li(e,n,i,s){var c;try{e&&D(c=e.promise)?c.call(e).done(n).fail(i):e&&D(c=e.then)?c.call(e,n,i):n.apply(void 0,[e].slice(s))}catch(f){i.apply(void 0,[f])}}u.extend({Deferred:function(e){var n=[["notify","progress",u.Callbacks("memory"),u.Callbacks("memory"),2],["resolve","done",u.Callbacks("once memory"),u.Callbacks("once memory"),0,"resolved"],["reject","fail",u.Callbacks("once memory"),u.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return c.done(arguments).fail(arguments),this},catch:function(f){return s.then(null,f)},pipe:function(){var f=arguments;return u.Deferred(function(d){u.each(n,function(m,v){var O=D(f[v[4]])&&f[v[4]];c[v[1]](function(){var w=O&&O.apply(this,arguments);w&&D(w.promise)?w.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[v[0]+"With"](this,O?[w]:arguments)})}),f=null}).promise()},then:function(f,d,m){var v=0;function O(w,I,B,k){return function(){var z=this,J=arguments,q=function(){var ue,De;if(!(w<v)){if(ue=B.apply(z,J),ue===I.promise())throw new TypeError("Thenable self-resolution");De=ue&&(typeof ue=="object"||typeof ue=="function")&&ue.then,D(De)?k?De.call(ue,O(v,I,lt,k),O(v,I,Wt,k)):(v++,De.call(ue,O(v,I,lt,k),O(v,I,Wt,k),O(v,I,lt,I.notifyWith))):(B!==lt&&(z=void 0,J=[ue]),(k||I.resolveWith)(z,J))}},fe=k?q:function(){try{q()}catch(ue){u.Deferred.exceptionHook&&u.Deferred.exceptionHook(ue,fe.error),w+1>=v&&(B!==Wt&&(z=void 0,J=[ue]),I.rejectWith(z,J))}};w?fe():(u.Deferred.getErrorHook?fe.error=u.Deferred.getErrorHook():u.Deferred.getStackHook&&(fe.error=u.Deferred.getStackHook()),t.setTimeout(fe))}}return u.Deferred(function(w){n[0][3].add(O(0,w,D(m)?m:lt,w.notifyWith)),n[1][3].add(O(0,w,D(f)?f:lt)),n[2][3].add(O(0,w,D(d)?d:Wt))}).promise()},promise:function(f){return f!=null?u.extend(f,s):s}},c={};return u.each(n,function(f,d){var m=d[2],v=d[5];s[d[1]]=m.add,v&&m.add(function(){i=v},n[3-f][2].disable,n[3-f][3].disable,n[0][2].lock,n[0][3].lock),m.add(d[3].fire),c[d[0]]=function(){return c[d[0]+"With"](this===c?void 0:this,arguments),this},c[d[0]+"With"]=m.fireWith}),s.promise(c),e&&e.call(c,c),c},when:function(e){var n=arguments.length,i=n,s=Array(i),c=h.call(arguments),f=u.Deferred(),d=function(m){return function(v){s[m]=this,c[m]=arguments.length>1?h.call(arguments):v,--n||f.resolveWith(s,c)}};if(n<=1&&(li(e,f.done(d(i)).resolve,f.reject,!n),f.state()==="pending"||D(c[i]&&c[i].then)))return f.then();for(;i--;)li(c[i],d(i),f.reject);return f.promise()}});var wr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;u.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&wr.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},u.readyException=function(e){t.setTimeout(function(){throw e})};var gn=u.Deferred();u.fn.ready=function(e){return gn.then(e).catch(function(n){u.readyException(n)}),this},u.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--u.readyWait:u.isReady)||(u.isReady=!0,!(e!==!0&&--u.readyWait>0)&&gn.resolveWith(L,[u]))}}),u.ready.then=gn.then;function Vt(){L.removeEventListener("DOMContentLoaded",Vt),t.removeEventListener("load",Vt),u.ready()}L.readyState==="complete"||L.readyState!=="loading"&&!L.documentElement.doScroll?t.setTimeout(u.ready):(L.addEventListener("DOMContentLoaded",Vt),t.addEventListener("load",Vt));var We=function(e,n,i,s,c,f,d){var m=0,v=e.length,O=i==null;if(ae(i)==="object"){c=!0;for(m in i)We(e,n,m,i[m],!0,f,d)}else if(s!==void 0&&(c=!0,D(s)||(d=!0),O&&(d?(n.call(e,s),n=null):(O=n,n=function(w,I,B){return O.call(u(w),B)})),n))for(;m<v;m++)n(e[m],i,d?s:s.call(e[m],m,n(e[m],i)));return c?e:O?n.call(e):v?n(e[0],i):f},Rr=/^-ms-/,Ir=/-([a-z])/g;function xr(e,n){return n.toUpperCase()}function ke(e){return e.replace(Rr,"ms-").replace(Ir,xr)}var Bt=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function St(){this.expando=u.expando+St.uid++}St.uid=1,St.prototype={cache:function(e){var n=e[this.expando];return n||(n={},Bt(e)&&(e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,configurable:!0}))),n},set:function(e,n,i){var s,c=this.cache(e);if(typeof n=="string")c[ke(n)]=i;else for(s in n)c[ke(s)]=n[s];return c},get:function(e,n){return n===void 0?this.cache(e):e[this.expando]&&e[this.expando][ke(n)]},access:function(e,n,i){return n===void 0||n&&typeof n=="string"&&i===void 0?this.get(e,n):(this.set(e,n,i),i!==void 0?i:n)},remove:function(e,n){var i,s=e[this.expando];if(s!==void 0){if(n!==void 0)for(Array.isArray(n)?n=n.map(ke):(n=ke(n),n=n in s?[n]:n.match(Ne)||[]),i=n.length;i--;)delete s[n[i]];(n===void 0||u.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var n=e[this.expando];return n!==void 0&&!u.isEmptyObject(n)}};var U=new St,_e=new St,Nr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kr=/[A-Z]/g;function Dr(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:Nr.test(e)?JSON.parse(e):e}function di(e,n,i){var s;if(i===void 0&&e.nodeType===1)if(s="data-"+n.replace(kr,"-$&").toLowerCase(),i=e.getAttribute(s),typeof i=="string"){try{i=Dr(i)}catch{}_e.set(e,n,i)}else i=void 0;return i}u.extend({hasData:function(e){return _e.hasData(e)||U.hasData(e)},data:function(e,n,i){return _e.access(e,n,i)},removeData:function(e,n){_e.remove(e,n)},_data:function(e,n,i){return U.access(e,n,i)},_removeData:function(e,n){U.remove(e,n)}}),u.fn.extend({data:function(e,n){var i,s,c,f=this[0],d=f&&f.attributes;if(e===void 0){if(this.length&&(c=_e.get(f),f.nodeType===1&&!U.get(f,"hasDataAttrs"))){for(i=d.length;i--;)d[i]&&(s=d[i].name,s.indexOf("data-")===0&&(s=ke(s.slice(5)),di(f,s,c[s])));U.set(f,"hasDataAttrs",!0)}return c}return typeof e=="object"?this.each(function(){_e.set(this,e)}):We(this,function(m){var v;if(f&&m===void 0)return v=_e.get(f,e),v!==void 0||(v=di(f,e),v!==void 0)?v:void 0;this.each(function(){_e.set(this,e,m)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),u.extend({queue:function(e,n,i){var s;if(e)return n=(n||"fx")+"queue",s=U.get(e,n),i&&(!s||Array.isArray(i)?s=U.access(e,n,u.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,n){n=n||"fx";var i=u.queue(e,n),s=i.length,c=i.shift(),f=u._queueHooks(e,n),d=function(){u.dequeue(e,n)};c==="inprogress"&&(c=i.shift(),s--),c&&(n==="fx"&&i.unshift("inprogress"),delete f.stop,c.call(e,d,f)),!s&&f&&f.empty.fire()},_queueHooks:function(e,n){var i=n+"queueHooks";return U.get(e,i)||U.access(e,i,{empty:u.Callbacks("once memory").add(function(){U.remove(e,[n+"queue",i])})})}}),u.fn.extend({queue:function(e,n){var i=2;return typeof e!="string"&&(n=e,e="fx",i--),arguments.length<i?u.queue(this[0],e):n===void 0?this:this.each(function(){var s=u.queue(this,e,n);u._queueHooks(this,e),e==="fx"&&s[0]!=="inprogress"&&u.dequeue(this,e)})},dequeue:function(e){return this.each(function(){u.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,s=1,c=u.Deferred(),f=this,d=this.length,m=function(){--s||c.resolveWith(f,[f])};for(typeof e!="string"&&(n=e,e=void 0),e=e||"fx";d--;)i=U.get(f[d],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(m));return m(),c.promise(n)}});var hi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=new RegExp("^(?:([+-])=|)("+hi+")([a-z%]*)$","i"),Ve=["Top","Right","Bottom","Left"],nt=L.documentElement,dt=function(e){return u.contains(e.ownerDocument,e)},Mr={composed:!0};nt.getRootNode&&(dt=function(e){return u.contains(e.ownerDocument,e)||e.getRootNode(Mr)===e.ownerDocument});var zt=function(e,n){return e=n||e,e.style.display==="none"||e.style.display===""&&dt(e)&&u.css(e,"display")==="none"};function pi(e,n,i,s){var c,f,d=20,m=s?function(){return s.cur()}:function(){return u.css(e,n,"")},v=m(),O=i&&i[3]||(u.cssNumber[n]?"":"px"),w=e.nodeType&&(u.cssNumber[n]||O!=="px"&&+v)&&wt.exec(u.css(e,n));if(w&&w[3]!==O){for(v=v/2,O=O||w[3],w=+v||1;d--;)u.style(e,n,w+O),(1-f)*(1-(f=m()/v||.5))<=0&&(d=0),w=w/f;w=w*2,u.style(e,n,w+O),i=i||[]}return i&&(w=+w||+v||0,c=i[1]?w+(i[1]+1)*i[2]:+i[2],s&&(s.unit=O,s.start=w,s.end=c)),c}var gi={};function Lr(e){var n,i=e.ownerDocument,s=e.nodeName,c=gi[s];return c||(n=i.body.appendChild(i.createElement(s)),c=u.css(n,"display"),n.parentNode.removeChild(n),c==="none"&&(c="block"),gi[s]=c,c)}function ht(e,n){for(var i,s,c=[],f=0,d=e.length;f<d;f++)s=e[f],s.style&&(i=s.style.display,n?(i==="none"&&(c[f]=U.get(s,"display")||null,c[f]||(s.style.display="")),s.style.display===""&&zt(s)&&(c[f]=Lr(s))):i!=="none"&&(c[f]="none",U.set(s,"display",i)));for(f=0;f<d;f++)c[f]!=null&&(e[f].style.display=c[f]);return e}u.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){zt(this)?u(this).show():u(this).hide()})}});var Rt=/^(?:checkbox|radio)$/i,yi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=L.createDocumentFragment(),n=e.appendChild(L.createElement("div")),i=L.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),n.appendChild(i),x.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue,n.innerHTML="<option></option>",x.option=!!n.lastChild})();var Ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,x.option||(Ce.optgroup=Ce.option=[1,"<select multiple='multiple'>","</select>"]);function me(e,n){var i;return typeof e.getElementsByTagName<"u"?i=e.getElementsByTagName(n||"*"):typeof e.querySelectorAll<"u"?i=e.querySelectorAll(n||"*"):i=[],n===void 0||n&&te(e,n)?u.merge([e],i):i}function yn(e,n){for(var i=0,s=e.length;i<s;i++)U.set(e[i],"globalEval",!n||U.get(n[i],"globalEval"))}var Gr=/<|&#?\w+;/;function _i(e,n,i,s,c){for(var f,d,m,v,O,w,I=n.createDocumentFragment(),B=[],k=0,z=e.length;k<z;k++)if(f=e[k],f||f===0)if(ae(f)==="object")u.merge(B,f.nodeType?[f]:f);else if(!Gr.test(f))B.push(n.createTextNode(f));else{for(d=d||I.appendChild(n.createElement("div")),m=(yi.exec(f)||["",""])[1].toLowerCase(),v=Ce[m]||Ce._default,d.innerHTML=v[1]+u.htmlPrefilter(f)+v[2],w=v[0];w--;)d=d.lastChild;u.merge(B,d.childNodes),d=I.firstChild,d.textContent=""}for(I.textContent="",k=0;f=B[k++];){if(s&&u.inArray(f,s)>-1){c&&c.push(f);continue}if(O=dt(f),d=me(I.appendChild(f),"script"),O&&yn(d),i)for(w=0;f=d[w++];)vi.test(f.type||"")&&i.push(f)}return I}var mi=/^([^.]*)(?:\.(.+)|)/;function pt(){return!0}function gt(){return!1}function vn(e,n,i,s,c,f){var d,m;if(typeof n=="object"){typeof i!="string"&&(s=s||i,i=void 0);for(m in n)vn(e,m,i,s,n[m],f);return e}if(s==null&&c==null?(c=i,s=i=void 0):c==null&&(typeof i=="string"?(c=s,s=void 0):(c=s,s=i,i=void 0)),c===!1)c=gt;else if(!c)return e;return f===1&&(d=c,c=function(v){return u().off(v),d.apply(this,arguments)},c.guid=d.guid||(d.guid=u.guid++)),e.each(function(){u.event.add(this,n,c,s,i)})}u.event={global:{},add:function(e,n,i,s,c){var f,d,m,v,O,w,I,B,k,z,J,q=U.get(e);if(Bt(e))for(i.handler&&(f=i,i=f.handler,c=f.selector),c&&u.find.matchesSelector(nt,c),i.guid||(i.guid=u.guid++),(v=q.events)||(v=q.events=Object.create(null)),(d=q.handle)||(d=q.handle=function(fe){return typeof u<"u"&&u.event.triggered!==fe.type?u.event.dispatch.apply(e,arguments):void 0}),n=(n||"").match(Ne)||[""],O=n.length;O--;)m=mi.exec(n[O])||[],k=J=m[1],z=(m[2]||"").split(".").sort(),k&&(I=u.event.special[k]||{},k=(c?I.delegateType:I.bindType)||k,I=u.event.special[k]||{},w=u.extend({type:k,origType:J,data:s,handler:i,guid:i.guid,selector:c,needsContext:c&&u.expr.match.needsContext.test(c),namespace:z.join(".")},f),(B=v[k])||(B=v[k]=[],B.delegateCount=0,(!I.setup||I.setup.call(e,s,z,d)===!1)&&e.addEventListener&&e.addEventListener(k,d)),I.add&&(I.add.call(e,w),w.handler.guid||(w.handler.guid=i.guid)),c?B.splice(B.delegateCount++,0,w):B.push(w),u.event.global[k]=!0)},remove:function(e,n,i,s,c){var f,d,m,v,O,w,I,B,k,z,J,q=U.hasData(e)&&U.get(e);if(!(!q||!(v=q.events))){for(n=(n||"").match(Ne)||[""],O=n.length;O--;){if(m=mi.exec(n[O])||[],k=J=m[1],z=(m[2]||"").split(".").sort(),!k){for(k in v)u.event.remove(e,k+n[O],i,s,!0);continue}for(I=u.event.special[k]||{},k=(s?I.delegateType:I.bindType)||k,B=v[k]||[],m=m[2]&&new RegExp("(^|\\.)"+z.join("\\.(?:.*\\.|)")+"(\\.|$)"),d=f=B.length;f--;)w=B[f],(c||J===w.origType)&&(!i||i.guid===w.guid)&&(!m||m.test(w.namespace))&&(!s||s===w.selector||s==="**"&&w.selector)&&(B.splice(f,1),w.selector&&B.delegateCount--,I.remove&&I.remove.call(e,w));d&&!B.length&&((!I.teardown||I.teardown.call(e,z,q.handle)===!1)&&u.removeEvent(e,k,q.handle),delete v[k])}u.isEmptyObject(v)&&U.remove(e,"handle events")}},dispatch:function(e){var n,i,s,c,f,d,m=new Array(arguments.length),v=u.event.fix(e),O=(U.get(this,"events")||Object.create(null))[v.type]||[],w=u.event.special[v.type]||{};for(m[0]=v,n=1;n<arguments.length;n++)m[n]=arguments[n];if(v.delegateTarget=this,!(w.preDispatch&&w.preDispatch.call(this,v)===!1)){for(d=u.event.handlers.call(this,v,O),n=0;(c=d[n++])&&!v.isPropagationStopped();)for(v.currentTarget=c.elem,i=0;(f=c.handlers[i++])&&!v.isImmediatePropagationStopped();)(!v.rnamespace||f.namespace===!1||v.rnamespace.test(f.namespace))&&(v.handleObj=f,v.data=f.data,s=((u.event.special[f.origType]||{}).handle||f.handler).apply(c.elem,m),s!==void 0&&(v.result=s)===!1&&(v.preventDefault(),v.stopPropagation()));return w.postDispatch&&w.postDispatch.call(this,v),v.result}},handlers:function(e,n){var i,s,c,f,d,m=[],v=n.delegateCount,O=e.target;if(v&&O.nodeType&&!(e.type==="click"&&e.button>=1)){for(;O!==this;O=O.parentNode||this)if(O.nodeType===1&&!(e.type==="click"&&O.disabled===!0)){for(f=[],d={},i=0;i<v;i++)s=n[i],c=s.selector+" ",d[c]===void 0&&(d[c]=s.needsContext?u(c,this).index(O)>-1:u.find(c,this,null,[O]).length),d[c]&&f.push(s);f.length&&m.push({elem:O,handlers:f})}}return O=this,v<n.length&&m.push({elem:O,handlers:n.slice(v)}),m},addProp:function(e,n){Object.defineProperty(u.Event.prototype,e,{enumerable:!0,configurable:!0,get:D(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(i){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:i})}})},fix:function(e){return e[u.expando]?e:new u.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var n=this||e;return Rt.test(n.type)&&n.click&&te(n,"input")&&Ft(n,"click",!0),!1},trigger:function(e){var n=this||e;return Rt.test(n.type)&&n.click&&te(n,"input")&&Ft(n,"click"),!0},_default:function(e){var n=e.target;return Rt.test(n.type)&&n.click&&te(n,"input")&&U.get(n,"click")||te(n,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function Ft(e,n,i){if(!i){U.get(e,n)===void 0&&u.event.add(e,n,pt);return}U.set(e,n,!1),u.event.add(e,n,{namespace:!1,handler:function(s){var c,f=U.get(this,n);if(s.isTrigger&1&&this[n]){if(f)(u.event.special[n]||{}).delegateType&&s.stopPropagation();else if(f=h.call(arguments),U.set(this,n,f),this[n](),c=U.get(this,n),U.set(this,n,!1),f!==c)return s.stopImmediatePropagation(),s.preventDefault(),c}else f&&(U.set(this,n,u.event.trigger(f[0],f.slice(1),this)),s.stopPropagation(),s.isImmediatePropagationStopped=pt)}})}u.removeEvent=function(e,n,i){e.removeEventListener&&e.removeEventListener(n,i)},u.Event=function(e,n){if(!(this instanceof u.Event))return new u.Event(e,n);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?pt:gt,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,n&&u.extend(this,n),this.timeStamp=e&&e.timeStamp||Date.now(),this[u.expando]=!0},u.Event.prototype={constructor:u.Event,isDefaultPrevented:gt,isPropagationStopped:gt,isImmediatePropagationStopped:gt,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=pt,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=pt,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=pt,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},u.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},u.event.addProp),u.each({focus:"focusin",blur:"focusout"},function(e,n){function i(s){if(L.documentMode){var c=U.get(this,"handle"),f=u.event.fix(s);f.type=s.type==="focusin"?"focus":"blur",f.isSimulated=!0,c(s),f.target===f.currentTarget&&c(f)}else u.event.simulate(n,s.target,u.event.fix(s))}u.event.special[e]={setup:function(){var s;if(Ft(this,e,!0),L.documentMode)s=U.get(this,n),s||this.addEventListener(n,i),U.set(this,n,(s||0)+1);else return!1},trigger:function(){return Ft(this,e),!0},teardown:function(){var s;if(L.documentMode)s=U.get(this,n)-1,s?U.set(this,n,s):(this.removeEventListener(n,i),U.remove(this,n));else return!1},_default:function(s){return U.get(s.target,e)},delegateType:n},u.event.special[n]={setup:function(){var s=this.ownerDocument||this.document||this,c=L.documentMode?this:s,f=U.get(c,n);f||(L.documentMode?this.addEventListener(n,i):s.addEventListener(e,i,!0)),U.set(c,n,(f||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,c=L.documentMode?this:s,f=U.get(c,n)-1;f?U.set(c,n,f):(L.documentMode?this.removeEventListener(n,i):s.removeEventListener(e,i,!0),U.remove(c,n))}}}),u.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){u.event.special[e]={delegateType:n,bindType:n,handle:function(i){var s,c=this,f=i.relatedTarget,d=i.handleObj;return(!f||f!==c&&!u.contains(c,f))&&(i.type=d.origType,s=d.handler.apply(this,arguments),i.type=n),s}}}),u.fn.extend({on:function(e,n,i,s){return vn(this,e,n,i,s)},one:function(e,n,i,s){return vn(this,e,n,i,s,1)},off:function(e,n,i){var s,c;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,u(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if(typeof e=="object"){for(c in e)this.off(c,n,e[c]);return this}return(n===!1||typeof n=="function")&&(i=n,n=void 0),i===!1&&(i=gt),this.each(function(){u.event.remove(this,e,i,n)})}});var Hr=/<script|<style|<link/i,jr=/checked\s*(?:[^=]|=\s*.checked.)/i,Pr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ai(e,n){return te(e,"table")&&te(n.nodeType!==11?n:n.firstChild,"tr")&&u(e).children("tbody")[0]||e}function Ur(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Yr(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ei(e,n){var i,s,c,f,d,m,v;if(n.nodeType===1){if(U.hasData(e)&&(f=U.get(e),v=f.events,v)){U.remove(n,"handle events");for(c in v)for(i=0,s=v[c].length;i<s;i++)u.event.add(n,c,v[c][i])}_e.hasData(e)&&(d=_e.access(e),m=u.extend({},d),_e.set(n,m))}}function Wr(e,n){var i=n.nodeName.toLowerCase();i==="input"&&Rt.test(e.type)?n.checked=e.checked:(i==="input"||i==="textarea")&&(n.defaultValue=e.defaultValue)}function yt(e,n,i,s){n=p(n);var c,f,d,m,v,O,w=0,I=e.length,B=I-1,k=n[0],z=D(k);if(z||I>1&&typeof k=="string"&&!x.checkClone&&jr.test(k))return e.each(function(J){var q=e.eq(J);z&&(n[0]=k.call(this,J,q.html())),yt(q,n,i,s)});if(I&&(c=_i(n,e[0].ownerDocument,!1,e,s),f=c.firstChild,c.childNodes.length===1&&(c=f),f||s)){for(d=u.map(me(c,"script"),Ur),m=d.length;w<I;w++)v=c,w!==B&&(v=u.clone(v,!0,!0),m&&u.merge(d,me(v,"script"))),i.call(e[w],v,w);if(m)for(O=d[d.length-1].ownerDocument,u.map(d,Yr),w=0;w<m;w++)v=d[w],vi.test(v.type||"")&&!U.access(v,"globalEval")&&u.contains(O,v)&&(v.src&&(v.type||"").toLowerCase()!=="module"?u._evalUrl&&!v.noModule&&u._evalUrl(v.src,{nonce:v.nonce||v.getAttribute("nonce")},O):Z(v.textContent.replace(Pr,""),v,O))}return e}function bi(e,n,i){for(var s,c=n?u.filter(n,e):e,f=0;(s=c[f])!=null;f++)!i&&s.nodeType===1&&u.cleanData(me(s)),s.parentNode&&(i&&dt(s)&&yn(me(s,"script")),s.parentNode.removeChild(s));return e}u.extend({htmlPrefilter:function(e){return e},clone:function(e,n,i){var s,c,f,d,m=e.cloneNode(!0),v=dt(e);if(!x.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!u.isXMLDoc(e))for(d=me(m),f=me(e),s=0,c=f.length;s<c;s++)Wr(f[s],d[s]);if(n)if(i)for(f=f||me(e),d=d||me(m),s=0,c=f.length;s<c;s++)Ei(f[s],d[s]);else Ei(e,m);return d=me(m,"script"),d.length>0&&yn(d,!v&&me(e,"script")),m},cleanData:function(e){for(var n,i,s,c=u.event.special,f=0;(i=e[f])!==void 0;f++)if(Bt(i)){if(n=i[U.expando]){if(n.events)for(s in n.events)c[s]?u.event.remove(i,s):u.removeEvent(i,s,n.handle);i[U.expando]=void 0}i[_e.expando]&&(i[_e.expando]=void 0)}}}),u.fn.extend({detach:function(e){return bi(this,e,!0)},remove:function(e){return bi(this,e)},text:function(e){return We(this,function(n){return n===void 0?u.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=n)})},null,e,arguments.length)},append:function(){return yt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var n=Ai(this,e);n.appendChild(e)}})},prepend:function(){return yt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var n=Ai(this,e);n.insertBefore(e,n.firstChild)}})},before:function(){return yt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return yt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,n=0;(e=this[n])!=null;n++)e.nodeType===1&&(u.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,n){return e=e??!1,n=n??e,this.map(function(){return u.clone(this,e,n)})},html:function(e){return We(this,function(n){var i=this[0]||{},s=0,c=this.length;if(n===void 0&&i.nodeType===1)return i.innerHTML;if(typeof n=="string"&&!Hr.test(n)&&!Ce[(yi.exec(n)||["",""])[1].toLowerCase()]){n=u.htmlPrefilter(n);try{for(;s<c;s++)i=this[s]||{},i.nodeType===1&&(u.cleanData(me(i,!1)),i.innerHTML=n);i=0}catch{}}i&&this.empty().append(n)},null,e,arguments.length)},replaceWith:function(){var e=[];return yt(this,arguments,function(n){var i=this.parentNode;u.inArray(this,e)<0&&(u.cleanData(me(this)),i&&i.replaceChild(n,this))},e)}}),u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){u.fn[e]=function(i){for(var s,c=[],f=u(i),d=f.length-1,m=0;m<=d;m++)s=m===d?this:this.clone(!0),u(f[m])[n](s),_.apply(c,s.get());return this.pushStack(c)}});var _n=new RegExp("^("+hi+")(?!px)[a-z%]+$","i"),mn=/^--/,Zt=function(e){var n=e.ownerDocument.defaultView;return(!n||!n.opener)&&(n=t),n.getComputedStyle(e)},Ti=function(e,n,i){var s,c,f={};for(c in n)f[c]=e.style[c],e.style[c]=n[c];s=i.call(e);for(c in n)e.style[c]=f[c];return s},Vr=new RegExp(Ve.join("|"),"i");(function(){function e(){if(O){v.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",O.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(v).appendChild(O);var w=t.getComputedStyle(O);i=w.top!=="1%",m=n(w.marginLeft)===12,O.style.right="60%",f=n(w.right)===36,s=n(w.width)===36,O.style.position="absolute",c=n(O.offsetWidth/3)===12,nt.removeChild(v),O=null}}function n(w){return Math.round(parseFloat(w))}var i,s,c,f,d,m,v=L.createElement("div"),O=L.createElement("div");O.style&&(O.style.backgroundClip="content-box",O.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle=O.style.backgroundClip==="content-box",u.extend(x,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),f},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),m},scrollboxSize:function(){return e(),c},reliableTrDimensions:function(){var w,I,B,k;return d==null&&(w=L.createElement("table"),I=L.createElement("tr"),B=L.createElement("div"),w.style.cssText="position:absolute;left:-11111px;border-collapse:separate",I.style.cssText="box-sizing:content-box;border:1px solid",I.style.height="1px",B.style.height="9px",B.style.display="block",nt.appendChild(w).appendChild(I).appendChild(B),k=t.getComputedStyle(I),d=parseInt(k.height,10)+parseInt(k.borderTopWidth,10)+parseInt(k.borderBottomWidth,10)===I.offsetHeight,nt.removeChild(w)),d}}))})();function It(e,n,i){var s,c,f,d,m=mn.test(n),v=e.style;return i=i||Zt(e),i&&(d=i.getPropertyValue(n)||i[n],m&&d&&(d=d.replace(qe,"$1")||void 0),d===""&&!dt(e)&&(d=u.style(e,n)),!x.pixelBoxStyles()&&_n.test(d)&&Vr.test(n)&&(s=v.width,c=v.minWidth,f=v.maxWidth,v.minWidth=v.maxWidth=v.width=d,d=i.width,v.width=s,v.minWidth=c,v.maxWidth=f)),d!==void 0?d+"":d}function Oi(e,n){return{get:function(){if(e()){delete this.get;return}return(this.get=n).apply(this,arguments)}}}var Ci=["Webkit","Moz","ms"],Bi=L.createElement("div").style,Si={};function zr(e){for(var n=e[0].toUpperCase()+e.slice(1),i=Ci.length;i--;)if(e=Ci[i]+n,e in Bi)return e}function An(e){var n=u.cssProps[e]||Si[e];return n||(e in Bi?e:Si[e]=zr(e)||e)}var Fr=/^(none|table(?!-c[ea]).+)/,Zr={position:"absolute",visibility:"hidden",display:"block"},wi={letterSpacing:"0",fontWeight:"400"};function Ri(e,n,i){var s=wt.exec(n);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):n}function En(e,n,i,s,c,f){var d=n==="width"?1:0,m=0,v=0,O=0;if(i===(s?"border":"content"))return 0;for(;d<4;d+=2)i==="margin"&&(O+=u.css(e,i+Ve[d],!0,c)),s?(i==="content"&&(v-=u.css(e,"padding"+Ve[d],!0,c)),i!=="margin"&&(v-=u.css(e,"border"+Ve[d]+"Width",!0,c))):(v+=u.css(e,"padding"+Ve[d],!0,c),i!=="padding"?v+=u.css(e,"border"+Ve[d]+"Width",!0,c):m+=u.css(e,"border"+Ve[d]+"Width",!0,c));return!s&&f>=0&&(v+=Math.max(0,Math.ceil(e["offset"+n[0].toUpperCase()+n.slice(1)]-f-v-m-.5))||0),v+O}function Ii(e,n,i){var s=Zt(e),c=!x.boxSizingReliable()||i,f=c&&u.css(e,"boxSizing",!1,s)==="border-box",d=f,m=It(e,n,s),v="offset"+n[0].toUpperCase()+n.slice(1);if(_n.test(m)){if(!i)return m;m="auto"}return(!x.boxSizingReliable()&&f||!x.reliableTrDimensions()&&te(e,"tr")||m==="auto"||!parseFloat(m)&&u.css(e,"display",!1,s)==="inline")&&e.getClientRects().length&&(f=u.css(e,"boxSizing",!1,s)==="border-box",d=v in e,d&&(m=e[v])),m=parseFloat(m)||0,m+En(e,n,i||(f?"border":"content"),d,s,m)+"px"}u.extend({cssHooks:{opacity:{get:function(e,n){if(n){var i=It(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,n,i,s){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var c,f,d,m=ke(n),v=mn.test(n),O=e.style;if(v||(n=An(m)),d=u.cssHooks[n]||u.cssHooks[m],i!==void 0){if(f=typeof i,f==="string"&&(c=wt.exec(i))&&c[1]&&(i=pi(e,n,c),f="number"),i==null||i!==i)return;f==="number"&&!v&&(i+=c&&c[3]||(u.cssNumber[m]?"":"px")),!x.clearCloneStyle&&i===""&&n.indexOf("background")===0&&(O[n]="inherit"),(!d||!("set"in d)||(i=d.set(e,i,s))!==void 0)&&(v?O.setProperty(n,i):O[n]=i)}else return d&&"get"in d&&(c=d.get(e,!1,s))!==void 0?c:O[n]}},css:function(e,n,i,s){var c,f,d,m=ke(n),v=mn.test(n);return v||(n=An(m)),d=u.cssHooks[n]||u.cssHooks[m],d&&"get"in d&&(c=d.get(e,!0,i)),c===void 0&&(c=It(e,n,s)),c==="normal"&&n in wi&&(c=wi[n]),i===""||i?(f=parseFloat(c),i===!0||isFinite(f)?f||0:c):c}}),u.each(["height","width"],function(e,n){u.cssHooks[n]={get:function(i,s,c){if(s)return Fr.test(u.css(i,"display"))&&(!i.getClientRects().length||!i.getBoundingClientRect().width)?Ti(i,Zr,function(){return Ii(i,n,c)}):Ii(i,n,c)},set:function(i,s,c){var f,d=Zt(i),m=!x.scrollboxSize()&&d.position==="absolute",v=m||c,O=v&&u.css(i,"boxSizing",!1,d)==="border-box",w=c?En(i,n,c,O,d):0;return O&&m&&(w-=Math.ceil(i["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(d[n])-En(i,n,"border",!1,d)-.5)),w&&(f=wt.exec(s))&&(f[3]||"px")!=="px"&&(i.style[n]=s,s=u.css(i,n)),Ri(i,s,w)}}}),u.cssHooks.marginLeft=Oi(x.reliableMarginLeft,function(e,n){if(n)return(parseFloat(It(e,"marginLeft"))||e.getBoundingClientRect().left-Ti(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),u.each({margin:"",padding:"",border:"Width"},function(e,n){u.cssHooks[e+n]={expand:function(i){for(var s=0,c={},f=typeof i=="string"?i.split(" "):[i];s<4;s++)c[e+Ve[s]+n]=f[s]||f[s-2]||f[0];return c}},e!=="margin"&&(u.cssHooks[e+n].set=Ri)}),u.fn.extend({css:function(e,n){return We(this,function(i,s,c){var f,d,m={},v=0;if(Array.isArray(s)){for(f=Zt(i),d=s.length;v<d;v++)m[s[v]]=u.css(i,s[v],!1,f);return m}return c!==void 0?u.style(i,s,c):u.css(i,s)},e,n,arguments.length>1)}});function Ae(e,n,i,s,c){return new Ae.prototype.init(e,n,i,s,c)}u.Tween=Ae,Ae.prototype={constructor:Ae,init:function(e,n,i,s,c,f){this.elem=e,this.prop=i,this.easing=c||u.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=s,this.unit=f||(u.cssNumber[i]?"":"px")},cur:function(){var e=Ae.propHooks[this.prop];return e&&e.get?e.get(this):Ae.propHooks._default.get(this)},run:function(e){var n,i=Ae.propHooks[this.prop];return this.options.duration?this.pos=n=u.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=n=e,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ae.propHooks._default.set(this),this}},Ae.prototype.init.prototype=Ae.prototype,Ae.propHooks={_default:{get:function(e){var n;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(n=u.css(e.elem,e.prop,""),!n||n==="auto"?0:n)},set:function(e){u.fx.step[e.prop]?u.fx.step[e.prop](e):e.elem.nodeType===1&&(u.cssHooks[e.prop]||e.elem.style[An(e.prop)]!=null)?u.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ae.propHooks.scrollTop=Ae.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},u.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},u.fx=Ae.prototype.init,u.fx.step={};var vt,qt,qr=/^(?:toggle|show|hide)$/,Kr=/queueHooks$/;function bn(){qt&&(L.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(bn):t.setTimeout(bn,u.fx.interval),u.fx.tick())}function xi(){return t.setTimeout(function(){vt=void 0}),vt=Date.now()}function Kt(e,n){var i,s=0,c={height:e};for(n=n?1:0;s<4;s+=2-n)i=Ve[s],c["margin"+i]=c["padding"+i]=e;return n&&(c.opacity=c.width=e),c}function Ni(e,n,i){for(var s,c=(we.tweeners[n]||[]).concat(we.tweeners["*"]),f=0,d=c.length;f<d;f++)if(s=c[f].call(i,n,e))return s}function Qr(e,n,i){var s,c,f,d,m,v,O,w,I="width"in n||"height"in n,B=this,k={},z=e.style,J=e.nodeType&&zt(e),q=U.get(e,"fxshow");i.queue||(d=u._queueHooks(e,"fx"),d.unqueued==null&&(d.unqueued=0,m=d.empty.fire,d.empty.fire=function(){d.unqueued||m()}),d.unqueued++,B.always(function(){B.always(function(){d.unqueued--,u.queue(e,"fx").length||d.empty.fire()})}));for(s in n)if(c=n[s],qr.test(c)){if(delete n[s],f=f||c==="toggle",c===(J?"hide":"show"))if(c==="show"&&q&&q[s]!==void 0)J=!0;else continue;k[s]=q&&q[s]||u.style(e,s)}if(v=!u.isEmptyObject(n),!(!v&&u.isEmptyObject(k))){I&&e.nodeType===1&&(i.overflow=[z.overflow,z.overflowX,z.overflowY],O=q&&q.display,O==null&&(O=U.get(e,"display")),w=u.css(e,"display"),w==="none"&&(O?w=O:(ht([e],!0),O=e.style.display||O,w=u.css(e,"display"),ht([e]))),(w==="inline"||w==="inline-block"&&O!=null)&&u.css(e,"float")==="none"&&(v||(B.done(function(){z.display=O}),O==null&&(w=z.display,O=w==="none"?"":w)),z.display="inline-block")),i.overflow&&(z.overflow="hidden",B.always(function(){z.overflow=i.overflow[0],z.overflowX=i.overflow[1],z.overflowY=i.overflow[2]})),v=!1;for(s in k)v||(q?"hidden"in q&&(J=q.hidden):q=U.access(e,"fxshow",{display:O}),f&&(q.hidden=!J),J&&ht([e],!0),B.done(function(){J||ht([e]),U.remove(e,"fxshow");for(s in k)u.style(e,s,k[s])})),v=Ni(J?q[s]:0,s,B),s in q||(q[s]=v.start,J&&(v.end=v.start,v.start=0))}}function Xr(e,n){var i,s,c,f,d;for(i in e)if(s=ke(i),c=n[s],f=e[i],Array.isArray(f)&&(c=f[1],f=e[i]=f[0]),i!==s&&(e[s]=f,delete e[i]),d=u.cssHooks[s],d&&"expand"in d){f=d.expand(f),delete e[s];for(i in f)i in e||(e[i]=f[i],n[i]=c)}else n[s]=c}function we(e,n,i){var s,c,f=0,d=we.prefilters.length,m=u.Deferred().always(function(){delete v.elem}),v=function(){if(c)return!1;for(var I=vt||xi(),B=Math.max(0,O.startTime+O.duration-I),k=B/O.duration||0,z=1-k,J=0,q=O.tweens.length;J<q;J++)O.tweens[J].run(z);return m.notifyWith(e,[O,z,B]),z<1&&q?B:(q||m.notifyWith(e,[O,1,0]),m.resolveWith(e,[O]),!1)},O=m.promise({elem:e,props:u.extend({},n),opts:u.extend(!0,{specialEasing:{},easing:u.easing._default},i),originalProperties:n,originalOptions:i,startTime:vt||xi(),duration:i.duration,tweens:[],createTween:function(I,B){var k=u.Tween(e,O.opts,I,B,O.opts.specialEasing[I]||O.opts.easing);return O.tweens.push(k),k},stop:function(I){var B=0,k=I?O.tweens.length:0;if(c)return this;for(c=!0;B<k;B++)O.tweens[B].run(1);return I?(m.notifyWith(e,[O,1,0]),m.resolveWith(e,[O,I])):m.rejectWith(e,[O,I]),this}}),w=O.props;for(Xr(w,O.opts.specialEasing);f<d;f++)if(s=we.prefilters[f].call(O,e,w,O.opts),s)return D(s.stop)&&(u._queueHooks(O.elem,O.opts.queue).stop=s.stop.bind(s)),s;return u.map(w,Ni,O),D(O.opts.start)&&O.opts.start.call(e,O),O.progress(O.opts.progress).done(O.opts.done,O.opts.complete).fail(O.opts.fail).always(O.opts.always),u.fx.timer(u.extend(v,{elem:e,anim:O,queue:O.opts.queue})),O}u.Animation=u.extend(we,{tweeners:{"*":[function(e,n){var i=this.createTween(e,n);return pi(i.elem,e,wt.exec(n),i),i}]},tweener:function(e,n){D(e)?(n=e,e=["*"]):e=e.match(Ne);for(var i,s=0,c=e.length;s<c;s++)i=e[s],we.tweeners[i]=we.tweeners[i]||[],we.tweeners[i].unshift(n)},prefilters:[Qr],prefilter:function(e,n){n?we.prefilters.unshift(e):we.prefilters.push(e)}}),u.speed=function(e,n,i){var s=e&&typeof e=="object"?u.extend({},e):{complete:i||!i&&n||D(e)&&e,duration:e,easing:i&&n||n&&!D(n)&&n};return u.fx.off?s.duration=0:typeof s.duration!="number"&&(s.duration in u.fx.speeds?s.duration=u.fx.speeds[s.duration]:s.duration=u.fx.speeds._default),(s.queue==null||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){D(s.old)&&s.old.call(this),s.queue&&u.dequeue(this,s.queue)},s},u.fn.extend({fadeTo:function(e,n,i,s){return this.filter(zt).css("opacity",0).show().end().animate({opacity:n},e,i,s)},animate:function(e,n,i,s){var c=u.isEmptyObject(e),f=u.speed(n,i,s),d=function(){var m=we(this,u.extend({},e),f);(c||U.get(this,"finish"))&&m.stop(!0)};return d.finish=d,c||f.queue===!1?this.each(d):this.queue(f.queue,d)},stop:function(e,n,i){var s=function(c){var f=c.stop;delete c.stop,f(i)};return typeof e!="string"&&(i=n,n=e,e=void 0),n&&this.queue(e||"fx",[]),this.each(function(){var c=!0,f=e!=null&&e+"queueHooks",d=u.timers,m=U.get(this);if(f)m[f]&&m[f].stop&&s(m[f]);else for(f in m)m[f]&&m[f].stop&&Kr.test(f)&&s(m[f]);for(f=d.length;f--;)d[f].elem===this&&(e==null||d[f].queue===e)&&(d[f].anim.stop(i),c=!1,d.splice(f,1));(c||!i)&&u.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var n,i=U.get(this),s=i[e+"queue"],c=i[e+"queueHooks"],f=u.timers,d=s?s.length:0;for(i.finish=!0,u.queue(this,e,[]),c&&c.stop&&c.stop.call(this,!0),n=f.length;n--;)f[n].elem===this&&f[n].queue===e&&(f[n].anim.stop(!0),f.splice(n,1));for(n=0;n<d;n++)s[n]&&s[n].finish&&s[n].finish.call(this);delete i.finish})}}),u.each(["toggle","show","hide"],function(e,n){var i=u.fn[n];u.fn[n]=function(s,c,f){return s==null||typeof s=="boolean"?i.apply(this,arguments):this.animate(Kt(n,!0),s,c,f)}}),u.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){u.fn[e]=function(i,s,c){return this.animate(n,i,s,c)}}),u.timers=[],u.fx.tick=function(){var e,n=0,i=u.timers;for(vt=Date.now();n<i.length;n++)e=i[n],!e()&&i[n]===e&&i.splice(n--,1);i.length||u.fx.stop(),vt=void 0},u.fx.timer=function(e){u.timers.push(e),u.fx.start()},u.fx.interval=13,u.fx.start=function(){qt||(qt=!0,bn())},u.fx.stop=function(){qt=null},u.fx.speeds={slow:600,fast:200,_default:400},u.fn.delay=function(e,n){return e=u.fx&&u.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(i,s){var c=t.setTimeout(i,e);s.stop=function(){t.clearTimeout(c)}})},function(){var e=L.createElement("input"),n=L.createElement("select"),i=n.appendChild(L.createElement("option"));e.type="checkbox",x.checkOn=e.value!=="",x.optSelected=i.selected,e=L.createElement("input"),e.value="t",e.type="radio",x.radioValue=e.value==="t"}();var ki,xt=u.expr.attrHandle;u.fn.extend({attr:function(e,n){return We(this,u.attr,e,n,arguments.length>1)},removeAttr:function(e){return this.each(function(){u.removeAttr(this,e)})}}),u.extend({attr:function(e,n,i){var s,c,f=e.nodeType;if(!(f===3||f===8||f===2)){if(typeof e.getAttribute>"u")return u.prop(e,n,i);if((f!==1||!u.isXMLDoc(e))&&(c=u.attrHooks[n.toLowerCase()]||(u.expr.match.bool.test(n)?ki:void 0)),i!==void 0){if(i===null){u.removeAttr(e,n);return}return c&&"set"in c&&(s=c.set(e,i,n))!==void 0?s:(e.setAttribute(n,i+""),i)}return c&&"get"in c&&(s=c.get(e,n))!==null?s:(s=u.find.attr(e,n),s??void 0)}},attrHooks:{type:{set:function(e,n){if(!x.radioValue&&n==="radio"&&te(e,"input")){var i=e.value;return e.setAttribute("type",n),i&&(e.value=i),n}}}},removeAttr:function(e,n){var i,s=0,c=n&&n.match(Ne);if(c&&e.nodeType===1)for(;i=c[s++];)e.removeAttribute(i)}}),ki={set:function(e,n,i){return n===!1?u.removeAttr(e,i):e.setAttribute(i,i),i}},u.each(u.expr.match.bool.source.match(/\w+/g),function(e,n){var i=xt[n]||u.find.attr;xt[n]=function(s,c,f){var d,m,v=c.toLowerCase();return f||(m=xt[v],xt[v]=d,d=i(s,c,f)!=null?v:null,xt[v]=m),d}});var Jr=/^(?:input|select|textarea|button)$/i,$r=/^(?:a|area)$/i;u.fn.extend({prop:function(e,n){return We(this,u.prop,e,n,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[u.propFix[e]||e]})}}),u.extend({prop:function(e,n,i){var s,c,f=e.nodeType;if(!(f===3||f===8||f===2))return(f!==1||!u.isXMLDoc(e))&&(n=u.propFix[n]||n,c=u.propHooks[n]),i!==void 0?c&&"set"in c&&(s=c.set(e,i,n))!==void 0?s:e[n]=i:c&&"get"in c&&(s=c.get(e,n))!==null?s:e[n]},propHooks:{tabIndex:{get:function(e){var n=u.find.attr(e,"tabindex");return n?parseInt(n,10):Jr.test(e.nodeName)||$r.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(u.propHooks.selected={get:function(e){var n=e.parentNode;return n&&n.parentNode&&n.parentNode.selectedIndex,null},set:function(e){var n=e.parentNode;n&&(n.selectedIndex,n.parentNode&&n.parentNode.selectedIndex)}}),u.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){u.propFix[this.toLowerCase()]=this});function it(e){var n=e.match(Ne)||[];return n.join(" ")}function rt(e){return e.getAttribute&&e.getAttribute("class")||""}function Tn(e){return Array.isArray(e)?e:typeof e=="string"?e.match(Ne)||[]:[]}u.fn.extend({addClass:function(e){var n,i,s,c,f,d;return D(e)?this.each(function(m){u(this).addClass(e.call(this,m,rt(this)))}):(n=Tn(e),n.length?this.each(function(){if(s=rt(this),i=this.nodeType===1&&" "+it(s)+" ",i){for(f=0;f<n.length;f++)c=n[f],i.indexOf(" "+c+" ")<0&&(i+=c+" ");d=it(i),s!==d&&this.setAttribute("class",d)}}):this)},removeClass:function(e){var n,i,s,c,f,d;return D(e)?this.each(function(m){u(this).removeClass(e.call(this,m,rt(this)))}):arguments.length?(n=Tn(e),n.length?this.each(function(){if(s=rt(this),i=this.nodeType===1&&" "+it(s)+" ",i){for(f=0;f<n.length;f++)for(c=n[f];i.indexOf(" "+c+" ")>-1;)i=i.replace(" "+c+" "," ");d=it(i),s!==d&&this.setAttribute("class",d)}}):this):this.attr("class","")},toggleClass:function(e,n){var i,s,c,f,d=typeof e,m=d==="string"||Array.isArray(e);return D(e)?this.each(function(v){u(this).toggleClass(e.call(this,v,rt(this),n),n)}):typeof n=="boolean"&&m?n?this.addClass(e):this.removeClass(e):(i=Tn(e),this.each(function(){if(m)for(f=u(this),c=0;c<i.length;c++)s=i[c],f.hasClass(s)?f.removeClass(s):f.addClass(s);else(e===void 0||d==="boolean")&&(s=rt(this),s&&U.set(this,"__className__",s),this.setAttribute&&this.setAttribute("class",s||e===!1?"":U.get(this,"__className__")||""))}))},hasClass:function(e){var n,i,s=0;for(n=" "+e+" ";i=this[s++];)if(i.nodeType===1&&(" "+it(rt(i))+" ").indexOf(n)>-1)return!0;return!1}});var eo=/\r/g;u.fn.extend({val:function(e){var n,i,s,c=this[0];return arguments.length?(s=D(e),this.each(function(f){var d;this.nodeType===1&&(s?d=e.call(this,f,u(this).val()):d=e,d==null?d="":typeof d=="number"?d+="":Array.isArray(d)&&(d=u.map(d,function(m){return m==null?"":m+""})),n=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()],(!n||!("set"in n)||n.set(this,d,"value")===void 0)&&(this.value=d))})):c?(n=u.valHooks[c.type]||u.valHooks[c.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(c,"value"))!==void 0?i:(i=c.value,typeof i=="string"?i.replace(eo,""):i??"")):void 0}}),u.extend({valHooks:{option:{get:function(e){var n=u.find.attr(e,"value");return n??it(u.text(e))}},select:{get:function(e){var n,i,s,c=e.options,f=e.selectedIndex,d=e.type==="select-one",m=d?null:[],v=d?f+1:c.length;for(f<0?s=v:s=d?f:0;s<v;s++)if(i=c[s],(i.selected||s===f)&&!i.disabled&&(!i.parentNode.disabled||!te(i.parentNode,"optgroup"))){if(n=u(i).val(),d)return n;m.push(n)}return m},set:function(e,n){for(var i,s,c=e.options,f=u.makeArray(n),d=c.length;d--;)s=c[d],(s.selected=u.inArray(u.valHooks.option.get(s),f)>-1)&&(i=!0);return i||(e.selectedIndex=-1),f}}}}),u.each(["radio","checkbox"],function(){u.valHooks[this]={set:function(e,n){if(Array.isArray(n))return e.checked=u.inArray(u(e).val(),n)>-1}},x.checkOn||(u.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Nt=t.location,Di={guid:Date.now()},On=/\?/;u.parseXML=function(e){var n,i;if(!e||typeof e!="string")return null;try{n=new t.DOMParser().parseFromString(e,"text/xml")}catch{}return i=n&&n.getElementsByTagName("parsererror")[0],(!n||i)&&u.error("Invalid XML: "+(i?u.map(i.childNodes,function(s){return s.textContent}).join(`
`):e)),n};var Mi=/^(?:focusinfocus|focusoutblur)$/,Li=function(e){e.stopPropagation()};u.extend(u.event,{trigger:function(e,n,i,s){var c,f,d,m,v,O,w,I,B=[i||L],k=T.call(e,"type")?e.type:e,z=T.call(e,"namespace")?e.namespace.split("."):[];if(f=I=d=i=i||L,!(i.nodeType===3||i.nodeType===8)&&!Mi.test(k+u.event.triggered)&&(k.indexOf(".")>-1&&(z=k.split("."),k=z.shift(),z.sort()),v=k.indexOf(":")<0&&"on"+k,e=e[u.expando]?e:new u.Event(k,typeof e=="object"&&e),e.isTrigger=s?2:3,e.namespace=z.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+z.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=n==null?[e]:u.makeArray(n,[e]),w=u.event.special[k]||{},!(!s&&w.trigger&&w.trigger.apply(i,n)===!1))){if(!s&&!w.noBubble&&!V(i)){for(m=w.delegateType||k,Mi.test(m+k)||(f=f.parentNode);f;f=f.parentNode)B.push(f),d=f;d===(i.ownerDocument||L)&&B.push(d.defaultView||d.parentWindow||t)}for(c=0;(f=B[c++])&&!e.isPropagationStopped();)I=f,e.type=c>1?m:w.bindType||k,O=(U.get(f,"events")||Object.create(null))[e.type]&&U.get(f,"handle"),O&&O.apply(f,n),O=v&&f[v],O&&O.apply&&Bt(f)&&(e.result=O.apply(f,n),e.result===!1&&e.preventDefault());return e.type=k,!s&&!e.isDefaultPrevented()&&(!w._default||w._default.apply(B.pop(),n)===!1)&&Bt(i)&&v&&D(i[k])&&!V(i)&&(d=i[v],d&&(i[v]=null),u.event.triggered=k,e.isPropagationStopped()&&I.addEventListener(k,Li),i[k](),e.isPropagationStopped()&&I.removeEventListener(k,Li),u.event.triggered=void 0,d&&(i[v]=d)),e.result}},simulate:function(e,n,i){var s=u.extend(new u.Event,i,{type:e,isSimulated:!0});u.event.trigger(s,null,n)}}),u.fn.extend({trigger:function(e,n){return this.each(function(){u.event.trigger(e,n,this)})},triggerHandler:function(e,n){var i=this[0];if(i)return u.event.trigger(e,n,i,!0)}});var to=/\[\]$/,Gi=/\r?\n/g,no=/^(?:submit|button|image|reset|file)$/i,io=/^(?:input|select|textarea|keygen)/i;function Cn(e,n,i,s){var c;if(Array.isArray(n))u.each(n,function(f,d){i||to.test(e)?s(e,d):Cn(e+"["+(typeof d=="object"&&d!=null?f:"")+"]",d,i,s)});else if(!i&&ae(n)==="object")for(c in n)Cn(e+"["+c+"]",n[c],i,s);else s(e,n)}u.param=function(e,n){var i,s=[],c=function(f,d){var m=D(d)?d():d;s[s.length]=encodeURIComponent(f)+"="+encodeURIComponent(m??"")};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!u.isPlainObject(e))u.each(e,function(){c(this.name,this.value)});else for(i in e)Cn(i,e[i],n,c);return s.join("&")},u.fn.extend({serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=u.prop(this,"elements");return e?u.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!u(this).is(":disabled")&&io.test(this.nodeName)&&!no.test(e)&&(this.checked||!Rt.test(e))}).map(function(e,n){var i=u(this).val();return i==null?null:Array.isArray(i)?u.map(i,function(s){return{name:n.name,value:s.replace(Gi,`\r
`)}}):{name:n.name,value:i.replace(Gi,`\r
`)}}).get()}});var ro=/%20/g,oo=/#.*$/,so=/([?&])_=[^&]*/,ao=/^(.*?):[ \t]*([^\r\n]*)$/mg,uo=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,fo=/^\/\//,Hi={},Bn={},ji="*/".concat("*"),Sn=L.createElement("a");Sn.href=Nt.href;function Pi(e){return function(n,i){typeof n!="string"&&(i=n,n="*");var s,c=0,f=n.toLowerCase().match(Ne)||[];if(D(i))for(;s=f[c++];)s[0]==="+"?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function Ui(e,n,i,s){var c={},f=e===Bn;function d(m){var v;return c[m]=!0,u.each(e[m]||[],function(O,w){var I=w(n,i,s);if(typeof I=="string"&&!f&&!c[I])return n.dataTypes.unshift(I),d(I),!1;if(f)return!(v=I)}),v}return d(n.dataTypes[0])||!c["*"]&&d("*")}function wn(e,n){var i,s,c=u.ajaxSettings.flatOptions||{};for(i in n)n[i]!==void 0&&((c[i]?e:s||(s={}))[i]=n[i]);return s&&u.extend(!0,e,s),e}function lo(e,n,i){for(var s,c,f,d,m=e.contents,v=e.dataTypes;v[0]==="*";)v.shift(),s===void 0&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s){for(c in m)if(m[c]&&m[c].test(s)){v.unshift(c);break}}if(v[0]in i)f=v[0];else{for(c in i){if(!v[0]||e.converters[c+" "+v[0]]){f=c;break}d||(d=c)}f=f||d}if(f)return f!==v[0]&&v.unshift(f),i[f]}function ho(e,n,i,s){var c,f,d,m,v,O={},w=e.dataTypes.slice();if(w[1])for(d in e.converters)O[d.toLowerCase()]=e.converters[d];for(f=w.shift();f;)if(e.responseFields[f]&&(i[e.responseFields[f]]=n),!v&&s&&e.dataFilter&&(n=e.dataFilter(n,e.dataType)),v=f,f=w.shift(),f){if(f==="*")f=v;else if(v!=="*"&&v!==f){if(d=O[v+" "+f]||O["* "+f],!d){for(c in O)if(m=c.split(" "),m[1]===f&&(d=O[v+" "+m[0]]||O["* "+m[0]],d)){d===!0?d=O[c]:O[c]!==!0&&(f=m[0],w.unshift(m[1]));break}}if(d!==!0)if(d&&e.throws)n=d(n);else try{n=d(n)}catch(I){return{state:"parsererror",error:d?I:"No conversion from "+v+" to "+f}}}}return{state:"success",data:n}}u.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt.href,type:"GET",isLocal:uo.test(Nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ji,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":u.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?wn(wn(e,u.ajaxSettings),n):wn(u.ajaxSettings,e)},ajaxPrefilter:Pi(Hi),ajaxTransport:Pi(Bn),ajax:function(e,n){typeof e=="object"&&(n=e,e=void 0),n=n||{};var i,s,c,f,d,m,v,O,w,I,B=u.ajaxSetup({},n),k=B.context||B,z=B.context&&(k.nodeType||k.jquery)?u(k):u.event,J=u.Deferred(),q=u.Callbacks("once memory"),fe=B.statusCode||{},ue={},De={},Me="canceled",X={readyState:0,getResponseHeader:function(ee){var se;if(v){if(!f)for(f={};se=ao.exec(c);)f[se[1].toLowerCase()+" "]=(f[se[1].toLowerCase()+" "]||[]).concat(se[2]);se=f[ee.toLowerCase()+" "]}return se==null?null:se.join(", ")},getAllResponseHeaders:function(){return v?c:null},setRequestHeader:function(ee,se){return v==null&&(ee=De[ee.toLowerCase()]=De[ee.toLowerCase()]||ee,ue[ee]=se),this},overrideMimeType:function(ee){return v==null&&(B.mimeType=ee),this},statusCode:function(ee){var se;if(ee)if(v)X.always(ee[X.status]);else for(se in ee)fe[se]=[fe[se],ee[se]];return this},abort:function(ee){var se=ee||Me;return i&&i.abort(se),ot(0,se),this}};if(J.promise(X),B.url=((e||B.url||Nt.href)+"").replace(fo,Nt.protocol+"//"),B.type=n.method||n.type||B.method||B.type,B.dataTypes=(B.dataType||"*").toLowerCase().match(Ne)||[""],B.crossDomain==null){m=L.createElement("a");try{m.href=B.url,m.href=m.href,B.crossDomain=Sn.protocol+"//"+Sn.host!=m.protocol+"//"+m.host}catch{B.crossDomain=!0}}if(B.data&&B.processData&&typeof B.data!="string"&&(B.data=u.param(B.data,B.traditional)),Ui(Hi,B,n,X),v)return X;O=u.event&&B.global,O&&u.active++===0&&u.event.trigger("ajaxStart"),B.type=B.type.toUpperCase(),B.hasContent=!co.test(B.type),s=B.url.replace(oo,""),B.hasContent?B.data&&B.processData&&(B.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(B.data=B.data.replace(ro,"+")):(I=B.url.slice(s.length),B.data&&(B.processData||typeof B.data=="string")&&(s+=(On.test(s)?"&":"?")+B.data,delete B.data),B.cache===!1&&(s=s.replace(so,"$1"),I=(On.test(s)?"&":"?")+"_="+Di.guid+++I),B.url=s+I),B.ifModified&&(u.lastModified[s]&&X.setRequestHeader("If-Modified-Since",u.lastModified[s]),u.etag[s]&&X.setRequestHeader("If-None-Match",u.etag[s])),(B.data&&B.hasContent&&B.contentType!==!1||n.contentType)&&X.setRequestHeader("Content-Type",B.contentType),X.setRequestHeader("Accept",B.dataTypes[0]&&B.accepts[B.dataTypes[0]]?B.accepts[B.dataTypes[0]]+(B.dataTypes[0]!=="*"?", "+ji+"; q=0.01":""):B.accepts["*"]);for(w in B.headers)X.setRequestHeader(w,B.headers[w]);if(B.beforeSend&&(B.beforeSend.call(k,X,B)===!1||v))return X.abort();if(Me="abort",q.add(B.complete),X.done(B.success),X.fail(B.error),i=Ui(Bn,B,n,X),!i)ot(-1,"No Transport");else{if(X.readyState=1,O&&z.trigger("ajaxSend",[X,B]),v)return X;B.async&&B.timeout>0&&(d=t.setTimeout(function(){X.abort("timeout")},B.timeout));try{v=!1,i.send(ue,ot)}catch(ee){if(v)throw ee;ot(-1,ee)}}function ot(ee,se,Dt,In){var Le,Mt,Ge,Ke,Qe,Be=se;v||(v=!0,d&&t.clearTimeout(d),i=void 0,c=In||"",X.readyState=ee>0?4:0,Le=ee>=200&&ee<300||ee===304,Dt&&(Ke=lo(B,X,Dt)),!Le&&u.inArray("script",B.dataTypes)>-1&&u.inArray("json",B.dataTypes)<0&&(B.converters["text script"]=function(){}),Ke=ho(B,Ke,X,Le),Le?(B.ifModified&&(Qe=X.getResponseHeader("Last-Modified"),Qe&&(u.lastModified[s]=Qe),Qe=X.getResponseHeader("etag"),Qe&&(u.etag[s]=Qe)),ee===204||B.type==="HEAD"?Be="nocontent":ee===304?Be="notmodified":(Be=Ke.state,Mt=Ke.data,Ge=Ke.error,Le=!Ge)):(Ge=Be,(ee||!Be)&&(Be="error",ee<0&&(ee=0))),X.status=ee,X.statusText=(se||Be)+"",Le?J.resolveWith(k,[Mt,Be,X]):J.rejectWith(k,[X,Be,Ge]),X.statusCode(fe),fe=void 0,O&&z.trigger(Le?"ajaxSuccess":"ajaxError",[X,B,Le?Mt:Ge]),q.fireWith(k,[X,Be]),O&&(z.trigger("ajaxComplete",[X,B]),--u.active||u.event.trigger("ajaxStop")))}return X},getJSON:function(e,n,i){return u.get(e,n,i,"json")},getScript:function(e,n){return u.get(e,void 0,n,"script")}}),u.each(["get","post"],function(e,n){u[n]=function(i,s,c,f){return D(s)&&(f=f||c,c=s,s=void 0),u.ajax(u.extend({url:i,type:n,dataType:f,data:s,success:c},u.isPlainObject(i)&&i))}}),u.ajaxPrefilter(function(e){var n;for(n in e.headers)n.toLowerCase()==="content-type"&&(e.contentType=e.headers[n]||"")}),u._evalUrl=function(e,n,i){return u.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(s){u.globalEval(s,n,i)}})},u.fn.extend({wrapAll:function(e){var n;return this[0]&&(D(e)&&(e=e.call(this[0])),n=u(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var i=this;i.firstElementChild;)i=i.firstElementChild;return i}).append(this)),this},wrapInner:function(e){return D(e)?this.each(function(n){u(this).wrapInner(e.call(this,n))}):this.each(function(){var n=u(this),i=n.contents();i.length?i.wrapAll(e):n.append(e)})},wrap:function(e){var n=D(e);return this.each(function(i){u(this).wrapAll(n?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){u(this).replaceWith(this.childNodes)}),this}}),u.expr.pseudos.hidden=function(e){return!u.expr.pseudos.visible(e)},u.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},u.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var po={0:200,1223:204},kt=u.ajaxSettings.xhr();x.cors=!!kt&&"withCredentials"in kt,x.ajax=kt=!!kt,u.ajaxTransport(function(e){var n,i;if(x.cors||kt&&!e.crossDomain)return{send:function(s,c){var f,d=e.xhr();if(d.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(f in e.xhrFields)d[f]=e.xhrFields[f];e.mimeType&&d.overrideMimeType&&d.overrideMimeType(e.mimeType),!e.crossDomain&&!s["X-Requested-With"]&&(s["X-Requested-With"]="XMLHttpRequest");for(f in s)d.setRequestHeader(f,s[f]);n=function(m){return function(){n&&(n=i=d.onload=d.onerror=d.onabort=d.ontimeout=d.onreadystatechange=null,m==="abort"?d.abort():m==="error"?typeof d.status!="number"?c(0,"error"):c(d.status,d.statusText):c(po[d.status]||d.status,d.statusText,(d.responseType||"text")!=="text"||typeof d.responseText!="string"?{binary:d.response}:{text:d.responseText},d.getAllResponseHeaders()))}},d.onload=n(),i=d.onerror=d.ontimeout=n("error"),d.onabort!==void 0?d.onabort=i:d.onreadystatechange=function(){d.readyState===4&&t.setTimeout(function(){n&&i()})},n=n("abort");try{d.send(e.hasContent&&e.data||null)}catch(m){if(n)throw m}},abort:function(){n&&n()}}}),u.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return u.globalEval(e),e}}}),u.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),u.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var n,i;return{send:function(s,c){n=u("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(f){n.remove(),i=null,f&&c(f.type==="error"?404:200,f.type)}),L.head.appendChild(n[0])},abort:function(){i&&i()}}}});var Yi=[],Rn=/(=)\?(?=&|$)|\?\?/;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yi.pop()||u.expando+"_"+Di.guid++;return this[e]=!0,e}}),u.ajaxPrefilter("json jsonp",function(e,n,i){var s,c,f,d=e.jsonp!==!1&&(Rn.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Rn.test(e.data)&&"data");if(d||e.dataTypes[0]==="jsonp")return s=e.jsonpCallback=D(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,d?e[d]=e[d].replace(Rn,"$1"+s):e.jsonp!==!1&&(e.url+=(On.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return f||u.error(s+" was not called"),f[0]},e.dataTypes[0]="json",c=t[s],t[s]=function(){f=arguments},i.always(function(){c===void 0?u(t).removeProp(s):t[s]=c,e[s]&&(e.jsonpCallback=n.jsonpCallback,Yi.push(s)),f&&D(c)&&c(f[0]),f=c=void 0}),"script"}),x.createHTMLDocument=function(){var e=L.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),u.parseHTML=function(e,n,i){if(typeof e!="string")return[];typeof n=="boolean"&&(i=n,n=!1);var s,c,f;return n||(x.createHTMLDocument?(n=L.implementation.createHTMLDocument(""),s=n.createElement("base"),s.href=L.location.href,n.head.appendChild(s)):n=L),c=ui.exec(e),f=!i&&[],c?[n.createElement(c[1])]:(c=_i([e],n,f),f&&f.length&&u(f).remove(),u.merge([],c.childNodes))},u.fn.load=function(e,n,i){var s,c,f,d=this,m=e.indexOf(" ");return m>-1&&(s=it(e.slice(m)),e=e.slice(0,m)),D(n)?(i=n,n=void 0):n&&typeof n=="object"&&(c="POST"),d.length>0&&u.ajax({url:e,type:c||"GET",dataType:"html",data:n}).done(function(v){f=arguments,d.html(s?u("<div>").append(u.parseHTML(v)).find(s):v)}).always(i&&function(v,O){d.each(function(){i.apply(this,f||[v.responseText,O,v])})}),this},u.expr.pseudos.animated=function(e){return u.grep(u.timers,function(n){return e===n.elem}).length},u.offset={setOffset:function(e,n,i){var s,c,f,d,m,v,O,w=u.css(e,"position"),I=u(e),B={};w==="static"&&(e.style.position="relative"),m=I.offset(),f=u.css(e,"top"),v=u.css(e,"left"),O=(w==="absolute"||w==="fixed")&&(f+v).indexOf("auto")>-1,O?(s=I.position(),d=s.top,c=s.left):(d=parseFloat(f)||0,c=parseFloat(v)||0),D(n)&&(n=n.call(e,i,u.extend({},m))),n.top!=null&&(B.top=n.top-m.top+d),n.left!=null&&(B.left=n.left-m.left+c),"using"in n?n.using.call(e,B):I.css(B)}},u.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(c){u.offset.setOffset(this,e,c)});var n,i,s=this[0];if(s)return s.getClientRects().length?(n=s.getBoundingClientRect(),i=s.ownerDocument.defaultView,{top:n.top+i.pageYOffset,left:n.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,n,i,s=this[0],c={top:0,left:0};if(u.css(s,"position")==="fixed")n=s.getBoundingClientRect();else{for(n=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&u.css(e,"position")==="static";)e=e.parentNode;e&&e!==s&&e.nodeType===1&&(c=u(e).offset(),c.top+=u.css(e,"borderTopWidth",!0),c.left+=u.css(e,"borderLeftWidth",!0))}return{top:n.top-c.top-u.css(s,"marginTop",!0),left:n.left-c.left-u.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&u.css(e,"position")==="static";)e=e.offsetParent;return e||nt})}}),u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=n==="pageYOffset";u.fn[e]=function(s){return We(this,function(c,f,d){var m;if(V(c)?m=c:c.nodeType===9&&(m=c.defaultView),d===void 0)return m?m[n]:c[f];m?m.scrollTo(i?m.pageXOffset:d,i?d:m.pageYOffset):c[f]=d},e,s,arguments.length)}}),u.each(["top","left"],function(e,n){u.cssHooks[n]=Oi(x.pixelPosition,function(i,s){if(s)return s=It(i,n),_n.test(s)?u(i).position()[n]+"px":s})}),u.each({Height:"height",Width:"width"},function(e,n){u.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,s){u.fn[s]=function(c,f){var d=arguments.length&&(i||typeof c!="boolean"),m=i||(c===!0||f===!0?"margin":"border");return We(this,function(v,O,w){var I;return V(v)?s.indexOf("outer")===0?v["inner"+e]:v.document.documentElement["client"+e]:v.nodeType===9?(I=v.documentElement,Math.max(v.body["scroll"+e],I["scroll"+e],v.body["offset"+e],I["offset"+e],I["client"+e])):w===void 0?u.css(v,O,m):u.style(v,O,w,m)},n,d?c:void 0,d)}})}),u.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,n){u.fn[n]=function(i){return this.on(n,i)}}),u.fn.extend({bind:function(e,n,i){return this.on(e,null,n,i)},unbind:function(e,n){return this.off(e,null,n)},delegate:function(e,n,i,s){return this.on(n,e,i,s)},undelegate:function(e,n,i){return arguments.length===1?this.off(e,"**"):this.off(n,e||"**",i)},hover:function(e,n){return this.on("mouseenter",e).on("mouseleave",n||e)}}),u.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){u.fn[n]=function(i,s){return arguments.length>0?this.on(n,null,i,s):this.trigger(n)}});var go=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;u.proxy=function(e,n){var i,s,c;if(typeof n=="string"&&(i=e[n],n=e,e=i),!!D(e))return s=h.call(arguments,2),c=function(){return e.apply(n||this,s.concat(h.call(arguments)))},c.guid=e.guid=e.guid||u.guid++,c},u.holdReady=function(e){e?u.readyWait++:u.ready(!0)},u.isArray=Array.isArray,u.parseJSON=JSON.parse,u.nodeName=te,u.isFunction=D,u.isWindow=V,u.camelCase=ke,u.type=ae,u.now=Date.now,u.isNumeric=function(e){var n=u.type(e);return(n==="number"||n==="string")&&!isNaN(e-parseFloat(e))},u.trim=function(e){return e==null?"":(e+"").replace(go,"$1")};var yo=t.jQuery,vo=t.$;return u.noConflict=function(e){return t.$===u&&(t.$=vo),e&&t.jQuery===u&&(t.jQuery=yo),u},typeof r>"u"&&(t.jQuery=t.$=u),u})})(Ar);var qs=Ar.exports;const Er=Ro(qs);/*!
 * BlockRain.js 0.2.0
 * jQuery plugin that lets you put a playable (and configurable) game of Tetris in your site or just leave it in auto in the background.
 * http://aerolab.github.io/blockrain.js/
 *
 * Copyright (c) 2015 Aerolab <hey@aerolab.co>
 *
 * Released under the MIT license
 * http://aerolab.github.io/blockrain.js/LICENSE.txt
 */(function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(Er)})(function(a){var t=0,r=Array.prototype.slice;a.cleanData=function(o){return function(l){var h,p,_;for(_=0;(p=l[_])!=null;_++)try{h=a._data(p,"events"),h&&h.remove&&a(p).triggerHandler("remove")}catch{}o(l)}}(a.cleanData),a.widget=function(o,l,h){var p,_,b,A,y={},T=o.split(".")[0];return o=o.split(".")[1],p=T+"-"+o,h||(h=l,l=a.Widget),a.expr[":"][p.toLowerCase()]=function(G){return!!a.data(G,p)},a[T]=a[T]||{},_=a[T][o],b=a[T][o]=function(G,N){return this._createWidget?(arguments.length&&this._createWidget(G,N),void 0):new b(G,N)},a.extend(b,_,{version:h.version,_proto:a.extend({},h),_childConstructors:[]}),A=new l,A.options=a.widget.extend({},A.options),a.each(h,function(G,N){return a.isFunction(N)?(y[G]=function(){var x=function(){return l.prototype[G].apply(this,arguments)},D=function(V){return l.prototype[G].apply(this,V)};return function(){var V,L=this._super,$=this._superApply;return this._super=x,this._superApply=D,V=N.apply(this,arguments),this._super=L,this._superApply=$,V}}(),void 0):(y[G]=N,void 0)}),b.prototype=a.widget.extend(A,{widgetEventPrefix:_&&A.widgetEventPrefix||o},y,{constructor:b,namespace:T,widgetName:o,widgetFullName:p}),_?(a.each(_._childConstructors,function(G,N){var x=N.prototype;a.widget(x.namespace+"."+x.widgetName,b,N._proto)}),delete _._childConstructors):l._childConstructors.push(b),a.widget.bridge(o,b),b},a.widget.extend=function(o){for(var l,h,p=r.call(arguments,1),_=0,b=p.length;b>_;_++)for(l in p[_])h=p[_][l],p[_].hasOwnProperty(l)&&h!==void 0&&(o[l]=a.isPlainObject(h)?a.isPlainObject(o[l])?a.widget.extend({},o[l],h):a.widget.extend({},h):h);return o},a.widget.bridge=function(o,l){var h=l.prototype.widgetFullName||o;a.fn[o]=function(p){var _=typeof p=="string",b=r.call(arguments,1),A=this;return p=!_&&b.length?a.widget.extend.apply(null,[p].concat(b)):p,_?this.each(function(){var y,T=a.data(this,h);return p==="instance"?(A=T,!1):T?a.isFunction(T[p])&&p.charAt(0)!=="_"?(y=T[p].apply(T,b),y!==T&&y!==void 0?(A=y&&y.jquery?A.pushStack(y.get()):y,!1):void 0):a.error("no such method '"+p+"' for "+o+" widget instance"):a.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+p+"'")}):this.each(function(){var y=a.data(this,h);y?(y.option(p||{}),y._init&&y._init()):a.data(this,h,new l(p,this))}),A}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(o,l){l=a(l||this.defaultElement||this)[0],this.element=a(l),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),l!==this&&(a.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===l&&this.destroy()}}),this.document=a(l.style?l.ownerDocument:l.document||l),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),o),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(o,l){var h,p,_,b=o;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof o=="string")if(b={},h=o.split("."),o=h.shift(),h.length){for(p=b[o]=a.widget.extend({},this.options[o]),_=0;h.length-1>_;_++)p[h[_]]=p[h[_]]||{},p=p[h[_]];if(o=h.pop(),arguments.length===1)return p[o]===void 0?null:p[o];p[o]=l}else{if(arguments.length===1)return this.options[o]===void 0?null:this.options[o];b[o]=l}return this._setOptions(b),this},_setOptions:function(o){var l;for(l in o)this._setOption(l,o[l]);return this},_setOption:function(o,l){return this.options[o]=l,o==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!l),l&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(o,l,h){var p,_=this;typeof o!="boolean"&&(h=l,l=o,o=!1),h?(l=p=a(l),this.bindings=this.bindings.add(l)):(h=l,l=this.element,p=this.widget()),a.each(h,function(b,A){function y(){return o||_.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?(typeof A=="string"?_[A]:A).apply(_,arguments):void 0}typeof A!="string"&&(y.guid=A.guid=A.guid||y.guid||a.guid++);var T=b.match(/^([\w:-]*)\s*(.*)$/),G=T[1]+_.eventNamespace,N=T[2];N?p.delegate(N,G,y):l.bind(G,y)})},_off:function(o,l){l=(l||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,o.unbind(l).undelegate(l),this.bindings=a(this.bindings.not(o).get()),this.focusable=a(this.focusable.not(o).get()),this.hoverable=a(this.hoverable.not(o).get())},_delay:function(o,l){function h(){return(typeof o=="string"?p[o]:o).apply(p,arguments)}var p=this;return setTimeout(h,l||0)},_hoverable:function(o){this.hoverable=this.hoverable.add(o),this._on(o,{mouseenter:function(l){a(l.currentTarget).addClass("ui-state-hover")},mouseleave:function(l){a(l.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(o){this.focusable=this.focusable.add(o),this._on(o,{focusin:function(l){a(l.currentTarget).addClass("ui-state-focus")},focusout:function(l){a(l.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(o,l,h){var p,_,b=this.options[o];if(h=h||{},l=a.Event(l),l.type=(o===this.widgetEventPrefix?o:this.widgetEventPrefix+o).toLowerCase(),l.target=this.element[0],_=l.originalEvent)for(p in _)p in l||(l[p]=_[p]);return this.element.trigger(l,h),!(a.isFunction(b)&&b.apply(this.element[0],[l].concat(h))===!1||l.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(o,l){a.Widget.prototype["_"+o]=function(h,p,_){typeof p=="string"&&(p={effect:p});var b,A=p?p===!0||typeof p=="number"?l:p.effect||l:o;p=p||{},typeof p=="number"&&(p={duration:p}),b=!a.isEmptyObject(p),p.complete=_,p.delay&&h.delay(p.delay),b&&a.effects&&a.effects.effect[A]?h[o](p):A!==o&&h[A]?h[A](p.duration,p.easing,_):h.queue(function(y){a(this)[o](),_&&_.call(h[0]),y()})}}),a.widget});(function(a){a.widget("aerolab.blockrain",{options:{autoplay:!1,autoplayRestart:!0,showFieldOnStart:!0,theme:null,blockWidth:10,autoBlockWidth:!1,autoBlockSize:24,difficulty:"normal",speed:20,asdwKeys:!0,playText:"Let's play some Tetris",playButtonText:"Play",gameOverText:"Game Over",restartButtonText:"Play Again",scoreText:"Score",onStart:function(){},onRestart:function(){},onGameOver:function(t){},onPlaced:function(){},onLine:function(t,r,o){}},start:function(){this._doStart(),this.options.onStart.call(this.element)},restart:function(){this._doStart(),this.options.onRestart.call(this.element)},gameover:function(){this.showGameOverMessage(),this._board.gameover=!0,this.options.onGameOver.call(this.element,this._filled.score)},_doStart:function(){this._filled.clearAll(),this._filled._resetScore(),this._board.cur=this._board.nextShape(),this._board.started=!0,this._board.gameover=!1,this._board.dropDelay=5,this._board.render(!0),this._board.animate(),this._$start.fadeOut(150),this._$gameover.fadeOut(150),this._$score.fadeIn(150)},pause:function(){this._board.paused=!0},resume:function(){this._board.paused=!1},autoplay:function(t){typeof t!="boolean"&&(t=!0),this.options.autoplay=t,t&&!this._board.started&&this._doStart(),this._setupControls(!t),this._setupTouchControls(!t)},controls:function(t){typeof t!="boolean"&&(t=!0),this._setupControls(t)},touchControls:function(t){typeof t!="boolean"&&(t=!0),this._setupTouchControls(t)},score:function(t){return typeof t<"u"&&parseInt(t)>=0&&(this._filled.score=parseInt(t),this._$scoreText.text(this._filled_score)),this._filled.score},freesquares:function(){return this._filled.getFreeSpaces()},showStartMessage:function(){this._$start.show()},showGameOverMessage:function(){this._$gameover.show()},updateSizes:function(){this._PIXEL_WIDTH=this.element.innerWidth(),this._PIXEL_HEIGHT=this.element.innerHeight(),this._BLOCK_WIDTH=this.options.blockWidth,this._BLOCK_HEIGHT=Math.floor(this.element.innerHeight()/this.element.innerWidth()*this._BLOCK_WIDTH),this._block_size=Math.floor(this._PIXEL_WIDTH/this._BLOCK_WIDTH),this._border_width=2,this._PIXEL_WIDTH=this._block_size*this._BLOCK_WIDTH,this._PIXEL_HEIGHT=this._block_size*this._BLOCK_HEIGHT,this._$canvas.attr("width",this._PIXEL_WIDTH).attr("height",this._PIXEL_HEIGHT)},theme:function(t){if(typeof t>"u")return this.options.theme||this._theme;typeof t=="string"?(this.options.theme=t,this._theme=a.extend(!0,{},BlockrainThemes[t])):(this.options.theme=null,this._theme=t),(typeof this._theme>"u"||this._theme===null)&&(this._theme=a.extend(!0,{},BlockrainThemes.retro),this.options.theme="retro"),(isNaN(parseInt(this._theme.strokeWidth))||typeof parseInt(this._theme.strokeWidth)!="number")&&(this._theme.strokeWidth=2),this._preloadThemeAssets(),this._board!==null&&(typeof this._theme.background=="string"&&this._$canvas.css("background-color",this._theme.background),this._board.render())},_theme:{},_$game:null,_$canvas:null,_$gameholder:null,_$start:null,_$gameover:null,_$score:null,_$scoreText:null,_canvas:null,_ctx:null,_create:function(){var t=this;this.theme(this.options.theme),this._createHolder(),this._createUI(),this._refreshBlockSizes(),this.updateSizes(),a(window).resize(function(){}),this._SetupShapeFactory(),this._SetupFilled(),this._SetupInfo(),this._SetupBoard(),this._info.init(),this._board.init();var r=function(){requestAnimationFrame(r),t._board.render()};r(),this.options.autoplay?(this.autoplay(!0),this._setupTouchControls(!1)):(this._setupControls(!0),this._setupTouchControls(!1))},_checkCollisions:function(t,r,o,l){for(var h=0,p=o.length,_,b;h<p;h+=2){if(_=t+o[h],b=r+o[h+1],b>=this._BLOCK_HEIGHT||this._filled.check(_,b))return!0;if(!l&&_<0||_>=this._BLOCK_WIDTH)return!0}return!1},_board:null,_info:null,_filled:null,_drawBackground:function(){if(typeof this._theme.background=="string"){if(this._theme.backgroundGrid instanceof Image){if(this._theme.backgroundGrid.width===0||this._theme.backgroundGrid.height===0)return;this._ctx.globalAlpha=1;for(var t=0;t<this._BLOCK_WIDTH;t++)for(var r=0;r<this._BLOCK_HEIGHT;r++){var o=t*this._block_size,l=r*this._block_size;this._ctx.drawImage(this._theme.backgroundGrid,0,0,this._theme.backgroundGrid.width,this._theme.backgroundGrid.height,o,l,this._block_size,this._block_size)}}else if(typeof this._theme.backgroundGrid=="string"){var h=this._theme.strokeWidth;Math.round(this._block_size*.23),Math.round(this._block_size*.3),this._ctx.globalAlpha=1,this._ctx.fillStyle=this._theme.backgroundGrid;for(var t=0;t<this._BLOCK_WIDTH;t++)for(var r=0;r<this._BLOCK_HEIGHT;r++){var o=t*this._block_size,l=r*this._block_size;this._ctx.fillRect(o+h,l+h,this._block_size-h*2,this._block_size-h*2)}}this._ctx.globalAlpha=1}},_shapeFactory:null,_shapes:{line:[[0,-1,0,-2,0,-3,0,-4],[2,-2,1,-2,0,-2,-1,-2],[0,-4,0,-3,0,-2,0,-1],[-1,-2,0,-2,1,-2,2,-2]],square:[[0,0,1,0,0,-1,1,-1],[1,0,1,-1,0,0,0,-1],[1,-1,0,-1,1,0,0,0],[0,-1,0,0,1,-1,1,0]],arrow:[[0,-1,1,-1,2,-1,1,-2],[1,0,1,-1,1,-2,0,-1],[2,-1,1,-1,0,-1,1,0],[1,-2,1,-1,1,0,2,-1]],rightHook:[[2,0,1,0,1,-1,1,-2],[2,-2,2,-1,1,-1,0,-1],[0,-2,1,-2,1,-1,1,0],[0,0,0,-1,1,-1,2,-1]],leftHook:[[0,0,1,0,1,-1,1,-2],[2,0,2,-1,1,-1,0,-1],[2,-2,1,-2,1,-1,1,0],[0,-2,0,-1,1,-1,2,-1]],leftZag:[[0,0,0,-1,1,-1,1,-2],[2,-1,1,-1,1,-2,0,-2],[1,-2,1,-1,0,-1,0,0],[0,-2,1,-2,1,-1,2,-1]],rightZag:[[1,0,1,-1,0,-1,0,-2],[2,-1,1,-1,1,0,0,0],[0,-2,0,-1,1,-1,1,0],[0,0,1,0,1,-1,2,-1]]},_SetupShapeFactory:function(){var t=this;if(this._shapeFactory!==null)return;function r(o,l,h,p){return a.extend(this,{x:0,y:0,symmetrical:h,init:function(){return a.extend(this,{orientation:0,x:Math.floor(o._BLOCK_WIDTH/2)-1,y:-1}),this},blockType:p,blockVariation:null,blocksLen:l[0].length,orientations:l,orientation:0,rotate:function(_){var b=(this.orientation+(_==="left"?1:-1)+4)%4;if(!o._checkCollisions(this.x,this.y,this.getBlocks(b)))this.orientation=b,o._board.renderChanged=!0;else{var A=this.orientation,y=this.x,T=this.y;for(this.orientation=b;this.x>=o._BLOCK_WIDTH-2;)this.x--;for(;this.x<0;)this.x++;this.blockType==="line"&&this.x===0&&this.x++,o._checkCollisions(this.x,this.y,this.getBlocks(b))&&(this.y--,o._checkCollisions(this.x,this.y,this.getBlocks(b))&&(this.x=y,this.y=T,this.orientation=A)),o._board.renderChanged=!0}},moveRight:function(){o._checkCollisions(this.x+1,this.y,this.getBlocks())||(this.x++,o._board.renderChanged=!0)},moveLeft:function(){o._checkCollisions(this.x-1,this.y,this.getBlocks())||(this.x--,o._board.renderChanged=!0)},drop:function(){o._checkCollisions(this.x,this.y+1,this.getBlocks())||(this.y++,o._board.dropCount=-1,o._board.animate(),o._board.renderChanged=!0)},getBlocks:function(_){return this.orientations[_!==void 0?_:this.orientation]},draw:function(_,b,A){for(var y=this.getBlocks(A),T=_===void 0?this.x:_,G=b===void 0?this.y:b,N=0,x=0;N<this.blocksLen;N+=2)o._board.drawBlock(T+y[N],G+y[N+1],this.blockType,this.blockVariation,x,this.orientation,!0),x++},getBounds:function(_){for(var b=a.isArray(_)?_:this.getBlocks(_),A=0,y=b.length,T=999,G=-999,N=999,x=-999;A<y;A+=2)b[A]<T&&(T=b[A]),b[A]>G&&(G=b[A]),b[A+1]<N&&(N=b[A+1]),b[A+1]>x&&(x=b[A+1]);return{left:T,right:G,top:N,bottom:x,width:G-T,height:x-N}}}),this.init()}this._shapeFactory={line:function(){return new r(t,t._shapes.line,!1,"line")},square:function(){return new r(t,t._shapes.square,!1,"square")},arrow:function(){return new r(t,t._shapes.arrow,!1,"arrow")},leftHook:function(){return new r(t,t._shapes.leftHook,!1,"leftHook")},rightHook:function(){return new r(t,t._shapes.rightHook,!1,"rightHook")},leftZag:function(){return new r(t,t._shapes.leftZag,!1,"leftZag")},rightZag:function(){return new r(t,t._shapes.rightZag,!1,"rightZag")}}},_SetupFilled:function(){var t=this;this._filled===null&&(this._filled={data:new Array(t._BLOCK_WIDTH*t._BLOCK_HEIGHT),score:0,toClear:{},check:function(r,o){return this.data[this.asIndex(r,o)]},add:function(r,o,l,h,p,_){r>=0&&r<t._BLOCK_WIDTH&&o>=0&&o<t._BLOCK_HEIGHT&&(this.data[this.asIndex(r,o)]={blockType:l,blockVariation:h,blockIndex:p,blockOrientation:_})},getFreeSpaces:function(){for(var r=0,o=0;o<this.data.length;o++)r+=this.data[o]?1:0},asIndex:function(r,o){return r+o*t._BLOCK_WIDTH},asX:function(r){return r%t._BLOCK_WIDTH},asY:function(r){return Math.floor(r/t._BLOCK_WIDTH)},clearAll:function(){delete this.data,this.data=new Array(t._BLOCK_WIDTH*t._BLOCK_HEIGHT)},_popRow:function(r){for(var o=t._BLOCK_WIDTH*(r+1)-1;o>=0;o--)this.data[o]=o>=t._BLOCK_WIDTH?this.data[o-t._BLOCK_WIDTH]:void 0},checkForClears:function(){var r=t._board.lines,o=[],l,h,p,_;for(l=0,h=this.data.length;l<h;l++)_=this.asX(l),_==0&&(p=0),this.data[l]&&typeof this.data[l]<"u"&&typeof this.data[l].blockType=="string"&&(p+=1),_==t._BLOCK_WIDTH-1&&p==t._BLOCK_WIDTH&&o.push(this.asY(l));for(l=0,h=o.length;l<h;l++)this._popRow(o[l]),t._board.lines++,t._board.lines%10==0&&t._board.dropDelay>1&&(t._board.dropDelay*=.9);var b=t._board.lines-r;this._updateScore(b)},_updateScore:function(r){if(!(r<=0)){var o=[0,400,1e3,3e3,12e3];r>=o.length&&(r=o.length-1),this.score+=o[r],t._$scoreText.text(this.score),t.options.onLine.call(t.element,r,o[r],this.score)}},_resetScore:function(){this.score=0,t._$scoreText.text(this.score)},draw:function(){for(var r=0,o=this.data.length,l,h;r<o;r++)if(this.data[r]!==void 0){l=this.asY(r);var p=this.data[r];t._board.drawBlock(this.asX(r),l,p.blockType,p.blockVariation,p.blockIndex,p.blockOrientation)}}})},_SetupInfo:function(){var t=this;this._info={mode:t.options.difficulty,modes:["normal","nice","evil"],modesY:170,autopilotY:null,init:function(){this.mode=t.options.difficulty},setMode:function(r){this.mode=r,t._board.nextShape(!0)}}},_SetupBoard:function(){var t=this,r=this._info;this._board={animateDelay:1e3/t.options.speed,animateTimeoutId:null,cur:null,lines:0,dropCount:0,dropDelay:5,holding:{left:null,right:null,drop:null},holdingThreshold:200,started:!1,gameover:!1,renderChanged:!0,init:function(){this.cur=this.nextShape(),t.options.showFieldOnStart&&(t._drawBackground(),t._board.createRandomBoard(),t._board.render()),this.showStartMessage()},showStartMessage:function(){t._$start.show()},showGameOverMessage:function(){t._$gameover.show()},nextShape:function(o){var l=this.next,h,p,_;if(r.mode=="nice"||r.mode=="evil"?h=t._niceShapes:h=t._randomShapes(),t.options.no_preview){if(this.next=null,o)return null;if(p=h(t._filled,t._checkCollisions,t._BLOCK_WIDTH,t._BLOCK_HEIGHT,r.mode),!p)throw new Error("No shape returned from shape function!",h);p.init(),_=p}else{if(p=h(t._filled,t._checkCollisions,t._BLOCK_WIDTH,t._BLOCK_HEIGHT,r.mode),!p)throw new Error("No shape returned from shape function!",h);if(p.init(),this.next=p,o)return null;_=l||this.nextShape()}return t.options.autoplay&&(t._niceShapes(t._filled,t._checkCollisions,t._BLOCK_WIDTH,t._BLOCK_HEIGHT,"normal",_),_.orientation=_.best_orientation,_.x=_.best_x),typeof t._theme.complexBlocks<"u"?a.isArray(t._theme.complexBlocks[_.blockType])?_.blockVariation=t._randInt(0,t._theme.complexBlocks[_.blockType].length-1):_.blockVariation=null:typeof t._theme.blocks<"u"&&(a.isArray(t._theme.blocks[_.blockType])?_.blockVariation=t._randInt(0,t._theme.blocks[_.blockType].length-1):_.blockVariation=null),_},animate:function(){var o=!1,l=!1,h=!1,p=Date.now();if(this.animateTimeoutId&&clearTimeout(this.animateTimeoutId),!this.paused&&!this.gameover&&(this.dropCount++,(this.dropCount>=this.dropDelay||t.options.autoplay||this.holding.drop&&p-this.holding.drop>=this.holdingThreshold)&&(o=!0,l=!0,this.dropCount=0),this.holding.left&&p-this.holding.left>=this.holdingThreshold&&(l=!0,this.cur.moveLeft()),this.holding.right&&p-this.holding.right>=this.holdingThreshold&&(l=!0,this.cur.moveRight()),o)){var _=this.cur,b=_.x,A=_.y,y=_.getBlocks();if(t._checkCollisions(b,A+1,y,!0)){o=!1;for(var T=0,G=0;G<_.blocksLen;G+=2)t._filled.add(b+y[G],A+y[G+1],_.blockType,_.blockVariation,T,_.orientation),A+y[G]<0&&(h=!0),T++;t._filled.checkForClears(),this.cur=this.nextShape(),this.renderChanged=!0,this.holding.left=null,this.holding.right=null,this.holding.drop=null,t.options.onPlaced.call(t.element)}}o&&(l=!0,this.cur.y++),(o||l)&&(this.renderChanged=!0),h?(this.gameover=!0,t.gameover(),t.options.autoplay&&t.options.autoplayRestart&&t.restart(),this.renderChanged=!0):(this.animateDelay=1e3/t.options.speed,this.animateTimeoutId=window.setTimeout(function(){t._board.animate()},this.animateDelay))},createRandomBoard:function(){var o=[],l,h,p,_,b;for(o=Object.keys(t._shapeFactory),l=0,h=t._BLOCK_WIDTH;l<h;l++)for(p=0,_=t._randChoice([t._randInt(0,8),t._randInt(5,9)]);p<_;p++)(!b||!t._randInt(0,3))&&(b=t._randChoice(o)),t._filled.add(l,t._BLOCK_HEIGHT-p,b,t._randInt(0,3),null,t._randInt(0,3));t._board.render(!0)},render:function(o){(this.renderChanged||o)&&(this.renderChanged=!1,t._ctx.clearRect(0,0,t._PIXEL_WIDTH,t._PIXEL_HEIGHT),t._drawBackground(),t._filled.draw(),this.cur.draw())},drawBlock:function(o,l,h,p,_,b,A){o=o*t._block_size,l=l*t._block_size,A=typeof A=="boolean"?A:!1;var y=t._theme.strokeWidth,T=Math.round(t._block_size*.23),G=Math.round(t._block_size*.3),N=this.getBlockColor(h,p,_,A);if(t._ctx.globalAlpha=1,N instanceof Image){if(t._ctx.globalAlpha=1,N.width===0||N.height===0)return;if(typeof t._theme.blocks<"u"&&t._theme.blocks!==null)t._ctx.drawImage(N,0,0,N.width,N.height,o,l,t._block_size,t._block_size);else if(typeof t._theme.complexBlocks<"u"&&t._theme.complexBlocks!==null){(typeof _>"u"||_===null)&&(_=0);var x=function(V,L,$){var Z=t._shapes[L][0],ae=Math.min(Z[0],Z[2],Z[4],Z[6]),Oe=Math.max(Z[0],Z[2],Z[4],Z[6]),Ue=Math.min(Z[1],Z[3],Z[5],Z[7]),u=Math.max(Z[1],Z[3],Z[5],Z[7]),xe=Oe-ae+1,te=u-Ue+1,et=V.width/xe,tt=V.height/te;return{x:et*(Z[$*2]-ae),y:tt*Math.abs(Ue-Z[$*2+1]),w:et,h:tt}},D=x(N,h,_);t._ctx.save(),t._ctx.translate(o,l),t._ctx.translate(t._block_size/2,t._block_size/2),t._ctx.rotate(-Math.PI/2*b),t._ctx.drawImage(N,D.x,D.y,D.w,D.h,-t._block_size/2,-t._block_size/2,t._block_size,t._block_size),t._ctx.restore()}else t._ctx.fillStyle="#ff0000",t._ctx.fillRect(o,l,t._block_size,t._block_size)}else typeof N=="string"&&(t._ctx.fillStyle=N,t._ctx.fillRect(o,l,t._block_size,t._block_size),typeof t._theme.innerShadow=="string"&&(t._ctx.globalAlpha=1,t._ctx.strokeStyle=t._theme.innerShadow,t._ctx.lineWidth=1,t._ctx.strokeRect(o+1,l+1,t._block_size-2,t._block_size-2)),typeof t._theme.stroke=="string"&&(t._ctx.globalAlpha=1,t._ctx.fillStyle=t._theme.stroke,t._ctx.strokeStyle=t._theme.stroke,t._ctx.lineWidth=y,t._ctx.strokeRect(o,l,t._block_size,t._block_size)),typeof t._theme.innerStroke=="string"&&(t._ctx.fillStyle=t._theme.innerStroke,t._ctx.fillRect(o+T,l+T,t._block_size-T*2,y),t._ctx.fillRect(o+T,l+T+y,y,t._block_size-T*2-y)),typeof t._theme.innerSquare=="string"&&(t._ctx.fillStyle=t._theme.innerSquare,t._ctx.globalAlpha=.2,t._ctx.fillRect(o+G,l+G,t._block_size-G*2,t._block_size-G*2)));t._ctx.globalAlpha=1},getBlockColor:function(o,l,h,p){var _=function(b,A){return a.isArray(b)?A!==null&&typeof b[A]<"u"?b[A]:b.length>0?b[0]:null:b};return typeof p!="boolean"&&(p=!0),p?typeof t._theme.primary=="string"&&t._theme.primary!==""?t._theme.primary:typeof t._theme.blocks<"u"&&t._theme.blocks!==null?_(t._theme.blocks[o],l):_(t._theme.complexBlocks[o],l):typeof t._theme.secondary=="string"&&t._theme.secondary!==""?t._theme.secondary:typeof t._theme.blocks<"u"&&t._theme.blocks!==null?_(t._theme.blocks[o],l):_(t._theme.complexBlocks[o],l)}},t._niceShapes=t._getNiceShapes()},_randInt:function(t,r){return t+Math.floor(Math.random()*(1+r-t))},_randSign:function(){return this._randInt(0,1)*2-1},_randChoice:function(t){return t[this._randInt(0,t.length-1)]},_preloadThemeAssets:function(){var t=this,r=new RegExp("^#[A-F0-9+]{3,6}","i"),o=function(){t._board&&t._board.render(!0)},l=function(A){var y=A;return r.test(y)?A=y:(A=new Image,A.src=y,A.onload=o),A},h=function(A){if(a.isArray(A)&&A.length>0)for(var y=0;y<A.length;y++)A[y]=l(A[y]);else typeof A=="string"&&(A=l(A));return A};if(typeof this._theme.complexBlocks<"u")for(var p=Object.keys(this._theme.complexBlocks),_=0;_<p.length;_++)this._theme.complexBlocks[p[_]]=h(this._theme.complexBlocks[p[_]]);else if(typeof this._theme.blocks<"u")for(var p=Object.keys(this._theme.blocks),_=0;_<p.length;_++)this._theme.blocks[p[_]]=h(this._theme.blocks[p[_]]);if(typeof this._theme.backgroundGrid<"u"&&typeof this._theme.backgroundGrid=="string"&&!r.test(this._theme.backgroundGrid)){var b=this._theme.backgroundGrid;this._theme.backgroundGrid=new Image,this._theme.backgroundGrid.src=b,this._theme.backgroundGrid.onload=o}},_createHolder:function(){this._$gameholder=a('<div class="blockrain-game-holder"></div>'),this._$gameholder.css("position","relative").css("width","100%").css("height","100%"),this.element.html("").append(this._$gameholder),this._$canvas=a('<canvas style="display:block; width:100%; height:100%; padding:0; margin:0; border:none;" />'),typeof this._theme.background=="string"&&this._$canvas.css("background-color",this._theme.background),this._$gameholder.append(this._$canvas),this._canvas=this._$canvas.get(0),this._ctx=this._canvas.getContext("2d")},_createUI:function(){var t=this;t._$score=a('<div class="blockrain-score-holder" style="position:absolute;"><div class="blockrain-score"><div class="blockrain-score-msg">'+this.options.scoreText+'</div><div class="blockrain-score-num">0</div></div></div>').hide(),t._$scoreText=t._$score.find(".blockrain-score-num"),t._$gameholder.append(t._$score),t._$start=a('<div class="blockrain-start-holder" style="position:absolute;"><div class="blockrain-start"><div class="blockrain-start-msg">'+this.options.playText+'</div><a class="blockrain-btn blockrain-start-btn">'+this.options.playButtonText+"</a></div></div>").hide(),t._$gameholder.append(t._$start),t._$start.find(".blockrain-start-btn").click(function(r){r.preventDefault(),t.start()}),t._$gameover=a('<div class="blockrain-game-over-holder" style="position:absolute;"><div class="blockrain-game-over"><div class="blockrain-game-over-msg">'+this.options.gameOverText+'</div><a class="blockrain-btn blockrain-game-over-btn">'+this.options.restartButtonText+"</a></div></div>").hide(),t._$gameover.find(".blockrain-game-over-btn").click(function(r){r.preventDefault(),t.restart()}),t._$gameholder.append(t._$gameover),this._createControls()},_createControls:function(){var t=this;t._$touchLeft=a('<a class="blockrain-touch blockrain-touch-left" />').appendTo(t._$gameholder),t._$touchRight=a('<a class="blockrain-touch blockrain-touch-right" />').appendTo(t._$gameholder),t._$touchRotateRight=a('<a class="blockrain-touch blockrain-touch-rotate-right" />').appendTo(t._$gameholder),t._$touchRotateLeft=a('<a class="blockrain-touch blockrain-touch-rotate-left" />').appendTo(t._$gameholder),t._$touchDrop=a('<a class="blockrain-touch blockrain-touch-drop" />').appendTo(t._$gameholder)},_refreshBlockSizes:function(){this.options.autoBlockWidth&&(this.options.blockWidth=Math.ceil(this.element.width()/this.options.autoBlockSize))},_getNiceShapes:function(){var t=this,r={},o;for(var o in this._shapeFactory)r[o]=this._shapeFactory[o]();function l(_,b,A,y,T,G,N){var x,D=b.length,V=0,L={},$,Z,ae;for(x=0;x<D;x+=2)V+=_[t._filled.asIndex(A+b[x],y+b[x+1])]||0;for(x=0;x<D;x+=2)$=b[x],Z=b[x+1],(L[$]===void 0||L[$]<Z)&&(L[$]=Z);ae=0;for($ in L)for($=parseInt($),Z=L[$]+1,x=0;y+Z<N;Z++,x++)if(!t._filled.check(A+$,y+Z)){ae+=x==0?2:1;break}return V=V-ae,V}function h(){for(var _ in r)r[_].x=0,r[_].y=-1}var p=function(_,b,A,y,T,G){G||h();var N=new Array(A*y),x=T=="evil",D,V,L,$,Z,ae,Oe,Ue,u,xe,te=(x?1:-1)*999,et,tt,Ze,ne,qe;for(D=0;D<A;D++)for(V=0;V<=y;V++)if(V==y||_.check(D,V)){for(L=V-4;L<V;L++)N[_.asIndex(D,L)]=L;break}var Yt=G===void 0?r:{cur:G};for($ in Yt){for(Z=Yt[$],Ze=-999,ae=0;ae<(Z.symmetrical?2:4);ae++)for(Oe=Z.getBlocks(ae),Ue=Z.getBounds(Oe),D=-Ue.left;D<A-Ue.width;D++)for(V=-1;V<y-Ue.bottom;V++)if(t._checkCollisions(D,V+1,Oe,!0)){u=l(N,Oe,D,V,_,A,y),u>Ze&&(Ze=u,ne=ae,qe=D);break}(x&&Ze<te||!x&&Ze>te)&&(xe=Z,te=Ze,et=ne,tt=qe)}return xe.best_orientation=et,xe.best_x=tt,xe};return p.no_preview=!0,p},_randomShapes:function(){var t=[];return a.each(this._shapeFactory,function(r,o){t.push(o)}),this._randChoice(t)},_setupControls:function(t){var r=this,o=function(N){if(!N){r._board.holding.left=null;return}r._board.holding.left||(r._board.cur.moveLeft(),r._board.holding.left=Date.now(),r._board.holding.right=null)},l=function(N){if(!N){r._board.holding.right=null;return}r._board.holding.right||(r._board.cur.moveRight(),r._board.holding.right=Date.now(),r._board.holding.left=null)},h=function(N){if(!N){r._board.holding.drop=null;return}r._board.holding.drop||(r._board.cur.drop(),r._board.holding.drop=Date.now())},p=function(){r.gameover()},_=function(N){if(!r._board.cur)return!0;var x=!1;if(x=!0,r.options.asdwKeys)switch(N.keyCode){case 65:o(!0);break;case 68:l(!0);break;case 83:h(!0);break;case 87:r._board.cur.rotate("right");break;case 27:p();break}switch(N.keyCode){case 37:o(!0);break;case 39:l(!0);break;case 40:h(!0);break;case 38:r._board.cur.rotate("right");break;case 27:p();break;default:x=!1}return x&&N.preventDefault(),!x},b=function(N){if(!r._board.cur)return!0;var x=!1;if(x=!0,r.options.asdwKeys)switch(N.keyCode){case 65:o(!1);break;case 68:l(!1);break;case 83:h(!1);break}switch(N.keyCode){case 37:o(!1);break;case 39:l(!1);break;case 40:h(!1);break;default:x=!1}return x&&N.preventDefault(),!x};function A(N){var x={stopKeys:{37:1,38:1,39:1,40:1}},D=x.stopKeys[N.keyCode]||x.moreStopKeys&&x.moreStopKeys[N.keyCode];return D&&N.preventDefault(),D}function y(N){return"safekeypress."+N.keyCode}function T(N){var x=y(N);return a.data(this,x,(a.data(this,x)||0)-1),_.call(this,N)}function G(N){return a.data(this,y(N),0),b.call(this,N),A(N)}a(document).unbind("keydown.blockrain").unbind("keyup.blockrain"),r.options.autoplay||t&&a(document).bind("keydown.blockrain",T).bind("keyup.blockrain",G)},_setupTouchControls:function(t){var r=this,o=function(T){T.preventDefault(),r._board.cur.moveLeft(),r._board.holding.left=Date.now(),r._board.holding.right=null,r._board.holding.drop=null},l=function(T){T.preventDefault(),r._board.cur.moveRight(),r._board.holding.right=Date.now(),r._board.holding.left=null,r._board.holding.drop=null},h=function(T){T.preventDefault(),r._board.cur.drop(),r._board.holding.drop=Date.now()},p=function(T){T.preventDefault(),r._board.holding.left=null},_=function(T){T.preventDefault(),r._board.holding.right=null},b=function(T){T.preventDefault(),r._board.holding.drop=null},A=function(T){T.preventDefault(),r._board.cur.rotate("left")},y=function(T){T.preventDefault(),r._board.cur.rotate("right")};r._$touchLeft.unbind("touchstart touchend click"),r._$touchRight.unbind("touchstart touchend click"),r._$touchRotateLeft.unbind("touchstart touchend click"),r._$touchRotateRight.unbind("touchstart touchend click"),r._$touchDrop.unbind("touchstart touchend click"),!r.options.autoplay&&t?(r._$touchLeft.show().bind("touchstart click",o).bind("touchend",p),r._$touchRight.show().bind("touchstart click",l).bind("touchend",_),r._$touchDrop.show().bind("touchstart click",h).bind("touchend",b),r._$touchRotateLeft.show().bind("touchstart click",A),r._$touchRotateRight.show().bind("touchstart click",y)):(r._$touchLeft.hide(),r._$touchRight.hide(),r._$touchRotateLeft.hide(),r._$touchRotateRight.hide(),r._$touchDrop.hide())}})})(Er);window.BlockrainThemes={custom:{background:"#040304",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAHHElEQVR4XsVZgZbkqgqkTO77//+dbuvtgQ7QcGwnO3PPZTPG1dhWASIxwP8OEcqTYhJ3ypsAuLqsB7KSNrQ14uMoXAXsnwNihoUDInKKbCdDf2YjPuL+KDRSyOpE1Q5k6JBJV7IJSfnvJUzf8RhyAOh9ADqN3vtz+am+zIXWHIK9l1D5ISuSTbv3aUAJZKfvmMYYBn3O6Y3W/lt2IFmmIHmbQDcCgOM4DCjJqeKsNgQAIe9ag13I4NNHoUWhomMn4BoiubXAqn27qAoNm9HLwhMAfQ10lgYxc5gqvgxcfuw8sdhMHKtD99IrGfCpkXZjBG9x9r8SizJ/JHF8Yww3hYszNDnz5uawDH3WsTESIZBcs6O5r36SVn4gmcFYJVmgSYZOMqmEdjf8vxV8riA4tG0Zo51qeeDQtQxhuP6hUmgYY/U/yu8JKYBVmGdZGznWhqBZoAefTTi7GYOY/jKHEPL57loObBU8zhL4z/P8UxbdN02sUzOSqKmlymZnCLckt2tdq41AOI8KyU4AQGfCrNEOkr0DPjxD767VBUls3qHNEfjdhdpWxa7++zkzVmMB+0PXcndy9yMogcwsd5fJAFzotccfgKBfArmukPKQQ8dCOvrGAXkNxBPekvMahyNbMZbfFFcDLcVPfgV8MoJOcgo2QcWDQZiNNh3lJ9IdaNRskCk0FMUZFJJhgTnpspxF3l5S/3UhuXgpq1EopxxQyX7V3pdB8ndxXo4aukmapDQaJAlSGGZzAu8bIdIDr/Lb6BnXTtgk/wLJnoCUbLSPR+PNTbAMmt3HCDPonnN/c0BrMU7MawAAmAQggOIweu9oGEUmiHLQBPxS+v2WSgDIwTgmjwrblgk1kBbtVId1p/453BAPR+5fJyKuQGQ49KLDWvnLSNQJse8e+SiunI/UcAQ5aTBo6ncj+HMLmGBH04WOqVkm+qPnQkwYBKR1GEpXcXOfpNVAOnSQmJS8euloqxd1fWLZUi2I4JCkvySWN/psMd8HDJhzyD/DdW5fBAFvIzvqKLsErOwcRkKUXT8D5CJdpkCvEG7Szz0r6qVFE6q0faCSxuV05kO8/GUBdOlNkL0wStgd/reRSgCE0FWPhoXfiS5Eg47P6CH8TBlSc+RSP31RCgjwytR5J0riVjsyh60AH3uVgKFPipkiQ/CBAyoUNsVvhE1HkL+SM6Gc6kW0QJrnSHENDa8J9jiYal07ND3uc75GAEkl4GWBkufc8hmsHYQeoUs3vb26TYfeoxBE6NBHxctbKwFV2eFvsdcU/2FdGsv/USX3nd01IfweWHx7i+qm6VmQ4ULBTAo+JrKjgHLXv386gveoiPIo1pEN5d4zyLVHnYYZYVkyjBAgmLUZzV3XPSHo6IMoe4p0U8Z6d/R7VRIoSwsINl5VzVSEXfdcL8P+gYPJD/CuEuAqus/FaQW70Vld/47EOiCawZRAiSBrZ+yooFy7+VG0yHcX4l8eTXLpQn0oIADxIUMBeoDtrsHW87EdsvtvbxgQSResFIHjRFZtj6KEX+ucgZ0D9+iL89avBCLvBMQ5RCUU3pOwvmVSwKwPMNWFoHvSTrXoCenqi8FwZMN7rYEOEN4bJnFBRcK4gi21nClKFOYZ7ZJLYxKwDRYEeXJs1tl92fv9tq/nQkguSVgF9FPonquwBi1ssdbxApQcgkvIAHbpdADKHsLw/C430332xJ8JYSJ6Z2emUHg6ehBCwB0JsQU1ENgmKz2WouXmWCUjKN4CYGOBqn4IWLlmxPTZuYUOh/Kqg6hnY/clDrbsh0jTsMe/lf0oflbRjYAlIiTXYRy3ImfbEN76xG+QT8c5KZPEVBKjKRgFY9vf4KTpkL2F1Ia6fK+2xTrvX5bmnO1Lvd6nkno8nxp6jkEBkOMNwi1GnS5MopWs7c6f9mMoKmlM4sDctT5VHo/Hi4DKgTF8LnLqPQbHLMNahn859fKCESuoLqtoBZC2zfj5LtHsun8+n19fX3/KOVXhyQLkyzknJylTcBw4j6GoHYCBLi/lNRKGC61fQZHA8yJe7AafzV3/oZJei5GjEC8ak4Q8XsobHFrJ2x9IYXtzjQAFpibC+kmUE3f6tJ4P0LGWU/c/Wi/ofYrzdR9G4eIqU54PhXoA42oXRi49BCNY2VCUPIgxiB47AYCC7HB8vgzBpAwgEVChSn2hiayfcZF8zikPOUXGIaBMDQBzUtEfA0Yg1Mp+YqU+eVVIRW8GiO8pIlNCGPfwnwg7RWiL+J+BEY3FK3wVTc7Hw9YPXaGkkDKZxAO0VTn1ojDaqaU1+lOqHuoVffkDducA9e4Th1sApnswouIEByhD5iRBe0TAMSzj85P8IAW3Rjp/prYL7E4CQu0IA033s1C/lUIO5QMBEQQOlHOhnogxciC+12k3l3DffqyXx01JP8p8CemsQ/9yGcwBFfk/Wqz6T1UU/3cAAAAASUVORK5CYII=",complexBlocks:{line:["assets/blocks/custom/line.png","assets/blocks/custom/line.png"],square:["assets/blocks/custom/square.png"],arrow:"assets/blocks/custom/arrow.png",rightHook:["assets/blocks/custom/rightHook.png"],leftHook:"assets/blocks/custom/leftHook.png",rightZag:["assets/blocks/custom/rightZag.png"],leftZag:"assets/blocks/custom/leftZag.png"}},candy:{background:"#040304",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAHHElEQVR4XsVZgZbkqgqkTO77//+dbuvtgQ7QcGwnO3PPZTPG1dhWASIxwP8OEcqTYhJ3ypsAuLqsB7KSNrQ14uMoXAXsnwNihoUDInKKbCdDf2YjPuL+KDRSyOpE1Q5k6JBJV7IJSfnvJUzf8RhyAOh9ADqN3vtz+am+zIXWHIK9l1D5ISuSTbv3aUAJZKfvmMYYBn3O6Y3W/lt2IFmmIHmbQDcCgOM4DCjJqeKsNgQAIe9ag13I4NNHoUWhomMn4BoiubXAqn27qAoNm9HLwhMAfQ10lgYxc5gqvgxcfuw8sdhMHKtD99IrGfCpkXZjBG9x9r8SizJ/JHF8Yww3hYszNDnz5uawDH3WsTESIZBcs6O5r36SVn4gmcFYJVmgSYZOMqmEdjf8vxV8riA4tG0Zo51qeeDQtQxhuP6hUmgYY/U/yu8JKYBVmGdZGznWhqBZoAefTTi7GYOY/jKHEPL57loObBU8zhL4z/P8UxbdN02sUzOSqKmlymZnCLckt2tdq41AOI8KyU4AQGfCrNEOkr0DPjxD767VBUls3qHNEfjdhdpWxa7++zkzVmMB+0PXcndy9yMogcwsd5fJAFzotccfgKBfArmukPKQQ8dCOvrGAXkNxBPekvMahyNbMZbfFFcDLcVPfgV8MoJOcgo2QcWDQZiNNh3lJ9IdaNRskCk0FMUZFJJhgTnpspxF3l5S/3UhuXgpq1EopxxQyX7V3pdB8ndxXo4aukmapDQaJAlSGGZzAu8bIdIDr/Lb6BnXTtgk/wLJnoCUbLSPR+PNTbAMmt3HCDPonnN/c0BrMU7MawAAmAQggOIweu9oGEUmiHLQBPxS+v2WSgDIwTgmjwrblgk1kBbtVId1p/453BAPR+5fJyKuQGQ49KLDWvnLSNQJse8e+SiunI/UcAQ5aTBo6ncj+HMLmGBH04WOqVkm+qPnQkwYBKR1GEpXcXOfpNVAOnSQmJS8euloqxd1fWLZUi2I4JCkvySWN/psMd8HDJhzyD/DdW5fBAFvIzvqKLsErOwcRkKUXT8D5CJdpkCvEG7Szz0r6qVFE6q0faCSxuV05kO8/GUBdOlNkL0wStgd/reRSgCE0FWPhoXfiS5Eg47P6CH8TBlSc+RSP31RCgjwytR5J0riVjsyh60AH3uVgKFPipkiQ/CBAyoUNsVvhE1HkL+SM6Gc6kW0QJrnSHENDa8J9jiYal07ND3uc75GAEkl4GWBkufc8hmsHYQeoUs3vb26TYfeoxBE6NBHxctbKwFV2eFvsdcU/2FdGsv/USX3nd01IfweWHx7i+qm6VmQ4ULBTAo+JrKjgHLXv386gveoiPIo1pEN5d4zyLVHnYYZYVkyjBAgmLUZzV3XPSHo6IMoe4p0U8Z6d/R7VRIoSwsINl5VzVSEXfdcL8P+gYPJD/CuEuAqus/FaQW70Vld/47EOiCawZRAiSBrZ+yooFy7+VG0yHcX4l8eTXLpQn0oIADxIUMBeoDtrsHW87EdsvtvbxgQSResFIHjRFZtj6KEX+ucgZ0D9+iL89avBCLvBMQ5RCUU3pOwvmVSwKwPMNWFoHvSTrXoCenqi8FwZMN7rYEOEN4bJnFBRcK4gi21nClKFOYZ7ZJLYxKwDRYEeXJs1tl92fv9tq/nQkguSVgF9FPonquwBi1ssdbxApQcgkvIAHbpdADKHsLw/C430332xJ8JYSJ6Z2emUHg6ehBCwB0JsQU1ENgmKz2WouXmWCUjKN4CYGOBqn4IWLlmxPTZuYUOh/Kqg6hnY/clDrbsh0jTsMe/lf0oflbRjYAlIiTXYRy3ImfbEN76xG+QT8c5KZPEVBKjKRgFY9vf4KTpkL2F1Ia6fK+2xTrvX5bmnO1Lvd6nkno8nxp6jkEBkOMNwi1GnS5MopWs7c6f9mMoKmlM4sDctT5VHo/Hi4DKgTF8LnLqPQbHLMNahn859fKCESuoLqtoBZC2zfj5LtHsun8+n19fX3/KOVXhyQLkyzknJylTcBw4j6GoHYCBLi/lNRKGC61fQZHA8yJe7AafzV3/oZJei5GjEC8ak4Q8XsobHFrJ2x9IYXtzjQAFpibC+kmUE3f6tJ4P0LGWU/c/Wi/ofYrzdR9G4eIqU54PhXoA42oXRi49BCNY2VCUPIgxiB47AYCC7HB8vgzBpAwgEVChSn2hiayfcZF8zikPOUXGIaBMDQBzUtEfA0Yg1Mp+YqU+eVVIRW8GiO8pIlNCGPfwnwg7RWiL+J+BEY3FK3wVTc7Hw9YPXaGkkDKZxAO0VTn1ojDaqaU1+lOqHuoVffkDducA9e4Th1sApnswouIEByhD5iRBe0TAMSzj85P8IAW3Rjp/prYL7E4CQu0IA033s1C/lUIO5QMBEQQOlHOhnogxciC+12k3l3DffqyXx01JP8p8CemsQ/9yGcwBFfk/Wqz6T1UU/3cAAAAASUVORK5CYII=",blocks:{line:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACuklEQVR4Xi2MzW4cRRSFz/2p6p4eT2zjjE2MHBQWvAALNjwDS8SOFc/FIyCxQgh2LFHkBQgJyQo/wXKCEZ7x9E9VV93LBPNJ516dxXfo/U8+HTZ9uzrZympTjLo4DbtDiBpXSBGMocI5lkaMhKv0fz+LVX9P6ZuvvxqBby+3L3eJu6Zt27DL4qgIWW0KsxPC3Kjxz5fPT3z48csvtHSHd0C/1374RddPX/9xK6JdcjEutNfqFJMBsQat3By+i/7VxqJ6c/zd5avvn1+N7dl2V9Ad92M2ViI2ksyWSJ2QXQXc5/H25jYcHHKl1YYebcJqw/rW03OOzfr89NHbR8vH3Wq9Olofrddni+XhycXJhBSkKFLxWeHBZFFDVyD343Rzc/0XeYSXeXZIJaam2V9pLsBOtRIKYAorXqvAg8giaKsCKw1zJAGFbKhwtxrdG9E3BQxAIW1xyYUKUIwNxMAwDEwuSgA5iAw2l5ITOeE/GLRMihIOsnQZnKqOlWXRUWidyYkFpCxtCF1s8D+seBggYVYRhChkqqjmld3NKhhu1XKuKUf4g6egEitkvqc5ewo+3ZOVZJO4Q4OSEDGRRyAQkYH8QfMUCR07KS8DIsO8xhjcnUXnSv4GMRYShSUG2MFCeby/awOJFyvF3TU22ckk3E3FQjci+mJVggwz12rKVEvWOk3dwWpIr7ezrU4XZ+9ciBAxWCVlhDb2o5cZTgBR17R3w45hgg8/fu+Dj643adZVXzCmebsbp5T6fhr2L9W8z5xLNsyDpl2btrsXPynS9NvVVc28xzMLPDCUYbVUMy+TMgdinupCEapdvPv0lqGwjW9fHsXjF39eIzRpnFbLdiy918qCWmclnq3mcWhVnzw5v+83XYz0+LPP/8lL704NB3BBdbCDKlChAq8QgRvmGSFouyo3vz7Lr/8FMHqie3VCpNQAAAAASUVORK5CYII=",square:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACfUlEQVR4Xh3LvY5cRRBA4VNV3ffe+fEaZARgWfBExEhEZEg8A69AgkC8AzEiICMgJCdAxggsGRuW3Z3dmenbXVWskT6d7MiXnz3qclu87esm1qW3NteRuqaCIAmQABwPvPU2NyeaUa6P159/9QV3l/HqlWqN41El0PaadEJAoZBKqS9+eybL/tvvvi8PrHA4ku33pz9v5rafKmc0I7QhbiGaJSikyeCh1T7OG6fMluOvP/5+8csb+/RxhUtlEXA5KUMpiEpWwZKU3D799Zl1CtpEjsoh++HRxUMBVhgry4yUXLvstnE8qWi/HZndTEwpppj5XLIg7fZ4+fJlb91jzSlGhjc2O7RMj995nApRIRW0BHRl9UXLona6PYiGGKpaa50qPtQ96/5BCgkpBKghpI7VJZK5bmYju5IxQkZONqtbu+txd5ZEQFI0KaRRJxEZY0wjh/dqKqbZ/z9tqmJIqpQSnaD8T9sYkGqWmuTIZHgoWYupKh4SqSQimqrJfeV1gTECF4NKmUHwDFRqNSuJjMTxFQANNKGUyTBxYqSX6J6USdc1BquYFhEMFEQCUvSeC5rheL/Y74kAvX/OPXRZojIkqHkaLpMwWdYJm1fHlZIJotdXN7tFtczvvfuB5MIyRZwQ11pora2BTKOvva3zPKtStpsKLNNmmcr53xtFMtLaGLSR61IKKaPHenO1L2+qThqrn5FvPuGjjz8s4x+NI6Ptdvtxckywo0cjstZZZfZhNhSWNuoPP/5Udhebc8+tbp4//zPd6dcaGtJtWtUiVkhTWSJkTn3y5P15M19ervL1p9UZFzX9zHYmO1Ph3KFQK+rkIBMScbY7DicOzn+QRoW5iamqhgAAAABJRU5ErkJggg==",arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACsklEQVR4XhWPu25bVxREZz/OuQ9RVKhXjBSu8gX5h+QD0udD8ilByjRpUqZxa6RxY8DuYlhwHhAc2qRIieK9vOfsvUMNBoPVrGLoh6+++7y7mbFfTNIVdShCxCGuAgE8tSilhOVWU6lrtPjPK33ffvvb6xd4KG9/+f1kenIYoAgOIc+AF9u5Rdteuvubty9LU168fqW9z7AFanr36uPZSOIgWHB1IJABKE0keSr3QdLolXitjw1n717++sfPP/7Ula6pfbYmeU7eaBybnzg6ewwpT8DW/vth2acFkzf9Pi0OOU1+/eVlM2/m14vZ+Rfz88t+Np+fnZ8tns1OL66vLss0FIughgppDumLzIpmYBrHz+uVsZVSsraorJoMQU5dOs3K3jaiSXGciNYoG3cQcbJjwiKC3Ny9ljhEEUlGBnh4IJwR+qQ6q7FbuMPBLEQCVjaYA0mYwcyIY6p5qYFQQqOexRMhHOqg6sV8mtiqQki51gSHV6YAMYMMxgIC2IOcBcIsQipBBCIjNqEQBWARjjAOHAtSh1eqk9bqLpBKQUSZE4ccIqpJFnWQiRSKypjUA1DgEDw5janNkgA4zKmGQtpgsNqhMoRCmRni4AgKJh6DB842TffENWWqU+m448eYje186GZT31nXo5EqPhUGIqoGwd1gtWFtRBeLxcXF1TydYh+td1E5lMdpOOxGr9bPOzdrtFGWk2lAg84e9/fYbGmsync0xD7mfkITgUMbJaKc26GOVn2sB61Gf958OE992wsoQjSSjBHUwEmlISTsxjEsOIsxP3v+/M3tey3wrRVh29wuA2Vo3Xoe3KP6Endhzh3v92NjKefcXZzETKxR+Sa+vt2s3/3z127YrYfN+mGz2m4+rT+tNuu77d3yfvn3+vbh8eH4bb3dLrer97c3q7L6H15gvODKB5u4AAAAAElFTkSuQmCC",rightHook:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACqElEQVR4Xh3PO2tlZRSH8f9a73XvPTkTExl1dLAIKFpNY2Fl4UcT7G3FwmIaO3sbEfQjWAxDAkIORDHJyXFf3stayzC/9qke+ubrF0u7zqwfsJNFXEKtCAJriBGBoB0gNAZ5WIekcC0f+br8++3Pr1AP5Y/f6Xgfx4RqoB2kI27QgkYQw5BA2L95M+vTn379y0c2HI+Y5Ob6z3B/M/ZmlTieV7ISj9rXZ2n338NciEMedGshJacbZ9X16vK3H76vh/1paCOWiWvos5M1U9llLIebKeqz0zG4PmZ/dfl6XWc/9p4Ox/fMwnIcXrwL6ohPg54OZhYTUUc+w1YQ83z3kMadEKdp8EmE54cnKifTBLOr17cqtwIf4gAuKhUd8Lh4+TKPowjyOK1l8cxAm9nK2nWnsQeAyNtgldnClCLntkrRrTBcFyPjYRg8AEAY4JDhkhp7uOBIRbyqrmK+KcBm1qU30UbSxHcGnIGpKYk63dQxnC2sPcWo2slZUCCGYXPkkBnUqjcCSAGFsaOUQk5koqUqPFV5G2sDai+tG3vv6ZF3BojBzFrvpeij4KtDZTjPXTWGBA91uWJTo1WkqTAZoAbpT3ejd0YOBW1zoAHE/tG8FThm52KOLnDv1dA8DACTwbRU6TxSaX1WZII/1qBgwLvWtgN6ieQc2hC9hwLGTFS35eTJ7uOL5xxTkZI44l7BDGpwBke8FFCA9Pj2EAipHbd8Qre3fxOMDWykGryyM2Vv67JwmCJ7cQRRM6JXX+CrLz97/uHJ4bgHFUdKBi8B5gECLLAys4grAkr5Vt758ZdLTwhuPNvfHP7ZPzjrBAHYLBlChwPQ+jrtpq2UJv3i0/clni/Y03efYzxPvZdBkAzeAKATukENAoTA86ynZ3GrVQl3Eu/yJ/8D33mmeKR3Cz8AAAAASUVORK5CYII=",leftHook:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACq0lEQVR4Xg3HO24mVRBH8X/Vrfv4ut02BjS8GSBAQuyCmE0gwSLICFgCBLASAhLiiQjQICFBMAMSFn63v+77qCp89EsO5U+/rus/0zQPPW8thXRQABLAjtHAAZ2gzGk2HRCG1YMPwgdf/fnXj1fX+O7732s/A0kzbwEUCW5Fgh8HGVdFTOn5H79NiZ/98rPATBVS8OzX5xTehYsxd3KFwXcGEljVOGVJ8a7W4Q4YT8sb33z70xdf/oB8HufzhjI0m2a3JLykuAyV4RGxrLVN5+f/3dxSKXJc59qfUk77djhdXhGx0/mMAg/rpm30bXq97Fp3su1mrMe19e46BLLw9Nb1w0WaZoO+fPmCNbTW3D1Fcjci77Cnn3wMhCBpWU7vuwqo3evgaar6QHRqfRXKhQiELFG1O6H3MZUyLpTIx24UMkNASbqZwZiN3AQsgKhZ6/VYR9OcDw/blg5xmKqPnIRBLQUZw4iIWQKydRcEcvLOOZ2A80Nv8SRv1iiHQWPXewbztm3MbObMYgpGCMwiwgwAIhJCAGBmjMD+KDJJThJzTI8TKZm5E9S7U3c0s6PrkVujvYbm0Qr1iceJ+GZ9772OMawNDNAgVm8cADcAQSgzCSiChZj8MRLwXCTPufQEC8SlVKPWNTJJ4BTDcds58tCaMsVoIQ8Nq2AgS97uVg2h7v29Dz86W86MGqB922F+djjsdbWE0eu233fbwF0opd57KYU43l5ewQ43N7d17CwUHJnlsl4QmUwkJJKZ5uXaLdBrnzl6EGbTbV2nVIiMuMU44EMwMjn76GMHeWAKhKuLvyXoC+F3IvXrfy9zmO/WKyUM6c1riWUY7btKiA+9UkyvPnk7KFMPtLz/uS9vrjVFLNqTUSEJNLN5hQL7gIXpsGytO0ekCduR/fg/hV+olVqSm3YAAAAASUVORK5CYII=",rightZag:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACt0lEQVR4Xg3LOW6eVRQG4PcM937DP9hYlkgUQ6RQsAiEWAC7YCWUtGyAFqhpEHRI0CCBIjpHJBSxEhzkxP6H+93pHPz0D3358IsbuyY/XlCs7/YU5zjFZgdGp07BEDq4KXwA0PvuqIfDGbT0u69/+hZvr/DrH1gc1WENwUAGM3RDcXQGRbA9/e3nJPX3F5dqdY/ja8ztx++/+YhX5S6P47REODW2Pra+qsbOR5VFWwjHVPKJJF1FevPn019++O7jeYo3h5VG8Ua5OLnCh25T7+RwYfZavVz993q5OehccfImnV3nqdLjD54gTiDAF3cnEJrBAbZNSS//vTKP1FcTk0ppsfYzkpEt58Pls8vb29vTabDWYZJzjsqnJ+vHjx9tVvf3qG3QVpXJ0Y5L2xWmYbPt7W5WeK7RKUqICic7poQY6q4Fw2AUDSykUGUlQ0cUy3XUqCxm8Obe4SypVoRwOC7kLE5szIoBHsmlO6NJO3Qv5GEozI3IiE25K2EeLAiYADiBOwi51NLdCRrGcQ5xTLVUcg1BVeFszXtaWinkIAcALigQDwISby0Vq3dpR8IA2r1cKNfZRTq9F2c1iLuYqQcHg2Dmvbam08QUG1V07zASqDCLouSSE0tojCbGablFoMgkpMxht9QukvICASIXtNLy7rDDakVDeGepzpIUup1mlIZs5Dbo9OknnwEELGgZJgBhHHDYIx/v8/r98+d/P2cVVSOkitRPN9uXfz0j2rRSh1CZDKRmFomgnns62Wyvrq+ncTy2JJ/rRXv76vx04ymr83pci9gYRYISS4N3cgRKvYb15EHOHzy8fPaPgtMe8zHG5y8uH6y3wa7LPbNOIIkQRpCOZt7KzatHFx+Ww0Ki9NX8ZHWy7Sltchtz2aj32nicjZkpLr1m760vp5tN2e8jtHX0Yf4f3da+1L4oEEQAAAAASUVORK5CYII=",leftZag:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAACtElEQVR4Xg2Lu25cZRhF93f5L3OOPeOQmJuDhEIHDa/CC/B4SHSICqS0CERDE2MJAYKEmITEcewZz/nvH7O0taq16eTL++P66nhCDegOAEhghFYhDDM0hSgowQkKkDIwJi0pP/72G9j24vIi8S7nN34lYG1VyOKg0uVKFFIiY/XL+R8s977+6nvttBMkovTDz9/Np3G3fTlvYkoFJswzaxtya2haQ0nUdGa2PLY6GD/9+vjJ+Y+bD+K2vFxtrLS3cQq9t1rLwUZ7IpuOAmQQ8u9/PgFDWbG5708/jK/Ti9OzExErhYVU1TMrCZqV7fY2Or2+uQ5H7zgPMNQF5HL7+upZeFeHLU//etrraM2YedQBAXsnoPXHn8yrcHVzE0LICWoECTQf+SG19dRqK3tMUxSRZtkIZtqbsblW+vF8/Pzy1XoNvdthjDas7He7swdno+JkM21v997r6A1MIKNBwiCiXssqhNsbcAwQosPTeek1MzBa947NmnewYcGR8Oh1sZG8s5LvQoACaK0Yegi+965MNWXnxIAx0AdyWnqDMjuh1KoIkYGNUPqh0zHaYcpwoin1ZiBFjFBVEWLm1ppzTkQAsAQYQdwhTap+dBCRXzkW6g2lIpdqRkYE1v1+AZgEuiRo8G2YaCBo75ZylSCdiMnoYPVefO1k8AYm7rlAjUDi7/ZN18HIffbp5zFO22Vf0bzXfsBQUu4DIJ6P1/t/XowB9RGl4Xj94M62zy+vou2sDUySyhJjTDXpAeL9YFKXaxYnuoL2BRfnzxghj7YKm4liHkszGkOUjtxIYjKM9ncpTnPr4+HDj8j+U5/B5R5k/vfv344m6rfXHb3NSqKvdrs5xKUWeN95nUd69Oi9vpQI0PtfTAn7eE/eLF0Y92eUjrcDISBmrBjbgkrIDPFYCfoCLPgflXOjuIEFgMYAAAAASUVORK5CYII="}},modern:{background:"#000000",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZTg0NzU4MC00ODk3LTRkNjAtOWNhYi1mZTk1NzQ5NzhiNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEzOEQwMDc5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEzOEQwMDY5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplNDRjOWZiNC0yNzE5LTQ3NDYtYmRmMi0wMmY2ZTA4ZjAxMmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMwNTNEOTk5MDM1MTFFNDlBMzlFNzY4RjBCNkNENzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7Y01+zAAAAMklEQVR42mJgGAWjYBSMgkEJGIlUd+j/WjjbjjGYGC1MtHP10DR6FIyCUTAKBikACDAA0NoDCLGGjH8AAAAASUVORK5CYII=",primary:null,secondary:null,stroke:null,blocks:{line:"#fa1e1e",square:"#f1fa1e",arrow:"#d838cb",rightHook:"#f5821f",leftHook:"#42c6f0",rightZag:"#4bd838",leftZag:"#fa1e1e"}},retro:{background:"#000000",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZTg0NzU4MC00ODk3LTRkNjAtOWNhYi1mZTk1NzQ5NzhiNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEzOEQwMDc5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEzOEQwMDY5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplNDRjOWZiNC0yNzE5LTQ3NDYtYmRmMi0wMmY2ZTA4ZjAxMmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMwNTNEOTk5MDM1MTFFNDlBMzlFNzY4RjBCNkNENzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7Y01+zAAAAMklEQVR42mJgGAWjYBSMgkEJGIlUd+j/WjjbjjGYGC1MtHP10DR6FIyCUTAKBikACDAA0NoDCLGGjH8AAAAASUVORK5CYII=",primary:null,secondary:null,stroke:"#000000",innerStroke:"#000000",blocks:{line:"#fa1e1e",square:"#f1fa1e",arrow:"#d838cb",rightHook:"#f5821f",leftHook:"#42c6f0",rightZag:"#4bd838",leftZag:"#fa1e1e"}},monochrome:{background:"#000000",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZTg0NzU4MC00ODk3LTRkNjAtOWNhYi1mZTk1NzQ5NzhiNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEzOEQwMDc5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEzOEQwMDY5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplNDRjOWZiNC0yNzE5LTQ3NDYtYmRmMi0wMmY2ZTA4ZjAxMmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMwNTNEOTk5MDM1MTFFNDlBMzlFNzY4RjBCNkNENzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7Y01+zAAAAMklEQVR42mJgGAWjYBSMgkEJGIlUd+j/WjjbjjGYGC1MtHP10DR6FIyCUTAKBikACDAA0NoDCLGGjH8AAAAASUVORK5CYII=",primary:"#ffffff",secondary:"#ffffff",stroke:"#000000",innerStroke:"#000000"},aerolab:{background:"#ffffff",primary:"#ff7b00",secondary:"#000000"},gameboy:{background:"#C4CFA1",primary:null,secondary:null,stroke:"#414141",innerStroke:"#414141",innerSquare:"#000000",blocks:{line:"#88926A",square:"#585E44",arrow:"#A4AC8C",rightHook:"#6B7353",leftHook:"#6B7353",rightZag:"#595F45",leftZag:"#595F45"}},vim:{background:"#000000",backgroundGrid:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZTg0NzU4MC00ODk3LTRkNjAtOWNhYi1mZTk1NzQ5NzhiNjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEzOEQwMDc5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEzOEQwMDY5MDQyMTFFNDlBMzlFNzY4RjBCNkNENzMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplNDRjOWZiNC0yNzE5LTQ3NDYtYmRmMi0wMmY2ZTA4ZjAxMmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMwNTNEOTk5MDM1MTFFNDlBMzlFNzY4RjBCNkNENzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7Y01+zAAAAMklEQVR42mJgGAWjYBSMgkEJGIlUd+j/WjjbjjGYGC1MtHP10DR6FIyCUTAKBikACDAA0NoDCLGGjH8AAAAASUVORK5CYII=",primary:"#C2FFAE",secondary:"#C2FFAE",stroke:"#000000",strokeWidth:3,innerStroke:null}};class Qs{static VERSION="whatsnew-shortrest-102";static EXTENSIONID="com.battle-system.shortrest";static PAUSEID="com.battle-system.shortrest-pause";static EXTENSIONWHATSNEW="com.battle-system.shortrest-whatsnew";static TRANSPORT="battle-system.shortrest.transport";static SCORE="battle-system.shortrest.score";static MESSAGE="battle-system.shortrest.message";static READY="READY";static BUSY="BUSY";static CHECKREGISTRATION="https://vrwtdtmnbyhaehtitrlb.supabase.co/functions/v1/patreon-check";static ANONAUTH="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0";static BASEHTML=`
    <div class="header">Short Rest!</div><div id="whatsNew"></div>
    <table>
        <tr>
            <td>
                <button id="pauseButton">Pause</br>Game</button>
            </td>
            <td>
                <button id="hideViewButton">Hide View</br>Disabled</button>
            </td>
        </tr>
        <tr>
            <td>
                <div class="wrapper">
                    <label for="breakLength">Break Timer (Mins):</label>
                    <div id="timeWrapper">
                        <input type="number" id="breakLength" name="breakLength" maxlength="2" min="0">
                        <div id="breakTimer">--:--</div>
                    </div>
                </div>
            </td>
            <td>
                <button id="gameViewButton">Mini-Game</br>Disabled</button>
            </td>
        </tr>
    </table>
    </br>
    <div id="messageSendingControls">
        <textarea id="MessageTextarea" rows="4" placeholder="Add a message to the pause screen..."></textarea>
        <button id="sendMessage">SEND</button>
    </div>
        
    <div id="attendanceBox">
        <ul id="playerList"></ul>
    </div>
    <div id="blockGameContainer" class="block-game"></div>
    <div id="blockGameControls">
        <table style="width: 100%;">
            <tr>
                <th colspan="2">Controls</th>
            </tr>
            <tr>
                <td class="block-controls-text">A / D : Move</td>
                <td class="block-controls-text">S : Drop</td>
            </tr>
            <tr>
                <td class="block-controls-text">W : Rotate</td>
                <td class="block-controls-text">ESC : End Game</td>
            </tr>
        </table>
    </div>
`}async function Xs(){const a="https://worldtimeapi.org/api/timezone/Etc/UTC";try{const t=await fetch(a);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return(await t.json()).utc_datetime}catch(t){throw console.error("Failed to fetch UTC time:",t),t}}export{Er as $,Qs as C,Xs as F,Ks as O};
